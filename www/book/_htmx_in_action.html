<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Adam Stepinski, Carson Gross, Deniz Akşimşek">
<title>Building Hypermedia Systems</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_htmx_in_action" class="book">
<div id="header">
<h1>Building Hypermedia Systems</h1>
<div class="details">
<span id="author" class="author">Adam Stepinski, Carson Gross, Deniz Akşimşek</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a></span></p><ul class="sectlevel0">
<li><a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a>
<ul class="sectlevel1">
<li><a href="_reintroducing_hypermedia.html">1. Reintroducing Hypermedia</a>
</li>
<li><a href="_rest_hateoas_and_all_that.html">2. REST, HATEOAS and All That</a>
</li>
<li><a href="_building_a_simple_web_1_0_application.html">3. Building A Simple Web 1.0 Application</a>
</li>
<li><a href="_extending_html_as_hypermedia.html">4. Extending HTML As Hypermedia</a>
</li>
<li><a href="_htmx_in_action.html"><span class="toc-current">5. htmx In Action</span></a>
<ul class="sectlevel2">
<li><a href="_htmx_in_action.html#_installing_htmx">5.1. Installing htmx</a>
</li>
<li><a href="_htmx_in_action.html#_ajax_ifying_our_application">5.2. AJAX-ifying Our Application</a>
<ul class="sectlevel3">
<li><a href="_htmx_in_action.html#_boosted_links">5.2.1. Boosted Links</a>
</li>
<li><a href="_htmx_in_action.html#_boosted_forms">5.2.2. Boosted Forms</a>
</li>
<li><a href="_htmx_in_action.html#_attribute_inheritance">5.2.3. Attribute Inheritance</a>
</li>
<li><a href="_htmx_in_action.html#_progressive_enhancement">5.2.4. Progressive Enhancement</a>
</li>
<li><a href="_htmx_in_action.html#_adding_hx_boost_to_contact_app">5.2.5. Adding <code>hx-boost</code> to Contact.app</a>
</li>
</ul>
</li>
<li><a href="_htmx_in_action.html#_a_next_step_deleting_contacts">5.3. A Next Step: Deleting Contacts</a>
<ul class="sectlevel3">
<li><a href="_htmx_in_action.html#_updating_the_server_side">5.3.1. Updating The Server Side</a>
</li>
<li><a href="_htmx_in_action.html#_targeting_the_right_element">5.3.2. Targeting The Right Element</a>
</li>
<li><a href="_htmx_in_action.html#_updating_the_location_bar_url_properly">5.3.3. Updating The Location Bar URL Properly</a>
</li>
<li><a href="_htmx_in_action.html#_one_last_thing">5.3.4. One Last Thing</a>
</li>
<li><a href="_htmx_in_action.html#_progressive_enhancement_2">5.3.5. Progressive Enhancement?</a>
</li>
</ul>
</li>
<li><a href="_htmx_in_action.html#_next_steps_validating_contact_emails">5.4. Next Steps: Validating Contact Emails</a>
<ul class="sectlevel3">
<li><a href="_htmx_in_action.html#_updating_our_input_type">5.4.1. Updating Our Input Type</a>
</li>
<li><a href="_htmx_in_action.html#_inline_validation">5.4.2. Inline Validation</a>
</li>
<li><a href="_htmx_in_action.html#_validating_emails_server_side">5.4.3. Validating Emails Server Side</a>
</li>
<li><a href="_htmx_in_action.html#_taking_our_user_experience_further">5.4.4. Taking Our User Experience Further</a>
</li>
<li><a href="_htmx_in_action.html#_debouncing_our_validation_requests">5.4.5. Debouncing Our Validation Requests</a>
</li>
<li><a href="_htmx_in_action.html#_ignoring_non_mutating_keys">5.4.6. Ignoring Non-Mutating Keys</a>
</li>
</ul>
</li>
<li><a href="_htmx_in_action.html#_another_improvement_paging">5.5. Another Improvement: Paging</a>
<ul class="sectlevel3">
<li><a href="_htmx_in_action.html#_click_to_load">5.5.1. Click To Load</a>
</li>
<li><a href="_htmx_in_action.html#_infinite_scroll">5.5.2. Infinite Scroll</a>
</li>
</ul>
</li>
<li><a href="_htmx_in_action.html#_summary_4">5.6. Summary</a>
</li>
</ul>
</li>
<li><a href="_building_hypermedia_systems_2.html">6. Building Hypermedia Systems</a>
</li>
<li><a href="_more_htmx_patterns.html">7. More htmx Patterns</a>
</li>
<li><a href="_building_hypermedia_systems_3.html">8. Building Hypermedia Systems</a>
</li>
<li><a href="_a_dynamic_archive_ui_with_htmx.html">9. A Dynamic Archive UI With htmx</a>
</li>
<li><a href="_building_hypermedia_systems_4.html">10. Building Hypermedia Systems</a>
</li>
<li><a href="_deep_htmx.html">11. Deep htmx</a>
</li>
<li><a href="_hyperview_a_mobile_hypermedia.html">12. Hyperview: A Mobile Hypermedia</a>
</li>
<li><a href="_building_a_contacts_app_with_hyperview.html">13. Building a Contacts App With Hyperview</a>
</li>
<li><a href="_extending_the_hyperview_client.html">14. Extending the Hyperview Client</a>
</li>
<li><a href="_client_side_scripting.html">15. Client Side Scripting</a>
</li>
<li><a href="_building_hypermedia_systems_5.html">16. Building Hypermedia Systems</a>
</li>
<li><a href="_json_data_apis_hypermedia_driven_applications.html">17. JSON Data APIs &amp; Hypermedia Driven Applications</a>
</li>
<li><a href="_other_hypermedia_libraries_technologies.html">18. Other Hypermedia Libraries &amp; Technologies</a>
</li>
<li><a href="_conclusion_3.html">19. Conclusion</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_htmx_in_action">5. htmx In Action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter covers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Installing htmx in Contact.app</p>
</li>
<li>
<p>Adding AJAX-based navigation to Contact.app via "boosting"</p>
</li>
<li>
<p>Implementing a proper delete mechanic for contacts</p>
</li>
<li>
<p>Validating emails as the user types</p>
</li>
<li>
<p>Implementing paging in Contact.app</p>
</li>
<li>
<p>Creating a "Click To Load" button</p>
</li>
<li>
<p>Adding the "Infinite Scroll" pattern</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_installing_htmx">5.1. Installing htmx</h3>
<div class="paragraph">
<p>Now that we&#8217;ve seen how htmx extends HTML as a hypermedia, it&#8217;s time to put it into action.  We will still be
exchanging hypermedia, that is HTML, with our server: we will issue HTTP requests and get back HTML.  But, with the
additional functionality that htmx provides, we will have a more <em>powerful hypermedia</em> to work with, allowing us to
accomplish much more sophisticated interfaces.  This will allow us to address user experience issues, such as long feedback
cycles or painful page refreshes, without needing to write much, if any, JavaScript, without creating a JSON API, and so
on: everything will be implemented in hypermedia, using the core concepts of the original web!</p>
</div>
<div class="paragraph">
<p>The first thing we need to do is install the htmx javascript library in our web application.  We are going to do this by downloading the
source and saving it locally in our application, so we aren&#8217;t dependent on any external systems.  This is known as "vendoring"
the library.  We can grab the latest version of htmx by navigating our browser to <code><a href="https://unpkg.com/htmx.org" class="bare">https://unpkg.com/htmx.org</a></code>, which will
redirect it to the latest version of the library.</p>
</div>
<div class="paragraph">
<p>We can save the content from this URL into the <code>static/js/htmx.js</code> file in our project.</p>
</div>
<div class="paragraph">
<p>You may, of course, use a more sophisticated JavaScript package manager such as Node Package Manager (NPM) or yarn to install
htmx by referring to it&#8217;s package name, <code>htmx.org</code>, in the usual manner for your tool.  However, htmx is very small
(approximately 12kb when compressed and zipped) and is dependency free, so it does not require an elaborate mechanism or
build tool in order to install and use.</p>
</div>
<div class="paragraph">
<p>Now, with htmx downloaded locally to our system, we can now "install" the library.  We can do so by adding the
the following code to the <code>head</code> tag in our <code>layout.html</code> file, so it will be included on every page in our web
application:</p>
</div>
<div id="listing-4-1" class="listingblock">
<div class="title">Listing 1. 41. Installing htmx</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">  &lt;head&gt;
    &lt;script src="/js/htmx.js"&gt;&lt;/script&gt;
    ...
  &lt;/head&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Recall that the <code>layout.html</code> file is a <em>layout</em> file included in most templates that wraps the content of those templates
in common HTML, including a <code>head</code> element that we are using here to install htmx.</p>
</div>
<div class="paragraph">
<p>And, believe it or not, that&#8217;s it!  No need to add a build step or anything else to our project, this simple inclusion of the htmx script
file will make its functionality available across our entire application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ajax_ifying_our_application">5.2. AJAX-ifying Our Application</h3>
<div class="paragraph">
<p>The first feature of we are going to take advantage of is a bit of a "cheater" feature: <code>hx-boost</code>.  The <code>hx-boost</code>
attribute is unlike most other attributes in htmx.  Other htmx attributes tend to be very focused on
one aspect of improving HTML: <code>hx-trigger</code> focuses on the events that trigger a request, <code>hx-swap</code> focuses on how responses
are swapped into the DOM, and so forth.</p>
</div>
<div class="paragraph">
<p>The <code>hx-boost</code> attribute, in contrast, operates at a very high level: when you put it on an element with the value <code>true</code>,
it will "boost" all anchor tags and forms within that element.  Boost, in this case, means it will convert those elements
from regular anchor tags and forms into AJAX-powered anchors and forms.  This means that navigation will "feel" faster
because the browser will not be re-interpreting the <code>&lt;head&gt;</code> tags and so forth.</p>
</div>
<div class="paragraph">
<p>So boosted links, for example, rather than issuing a "normal" browser request, will issue an AJAX <code>GET</code> and replace
the whole body with the response.</p>
</div>
<div class="sect3">
<h4 id="_boosted_links">5.2.1. Boosted Links</h4>
<div class="paragraph">
<p>Let&#8217;s take a look at an example of a boosted link.  Here we have a link to a hypothetical settings page.  Because it has
<code>hx-boost="true"</code> on it, htmx will prevent the normal link behavior of issuing a request to the <code>/settings</code> path and replacing
the entire page with the response.  Instead, htmx will issue an AJAX request to <code>/settings</code>, taking the result and replacing
the <code>body</code> element with the new content.</p>
</div>
<div id="listing-4-1" class="listingblock">
<div class="title">Listing 1. 42. A Boosted Link</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;a href="/settings" hx-boost="true"&gt;Settings&lt;/a&gt; <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A simple attribute makes this link AJAX-powered</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, you might wonder: what&#8217;s the advantage here?  We are issuing an AJAX request and simply replacing the entire body.</p>
</div>
<div class="paragraph">
<p>Is that significantly different from just issuing a normal link request?</p>
</div>
<div class="paragraph">
<p>The answer is yes: in a boosted link, the browser is able to avoid any processing associated with the head tag.  The head
tag often contains many scripts and CSS file references.  In the boosted scenario, it is not necessary to re-process those
resources: the scripts and styles have already been processed and will continue to apply to the new content.  This can
often be a very easy way to speed up your hypermedia application.</p>
</div>
<div class="paragraph">
<p>A second question you might have is: does the response have to be formatted specially to work with <code>hx-boost</code>?  After all,
the settings page would normally render an <code>html</code> tag, with a <code>head</code> tag and so forth.  Do you need to handle "boosted"
requests specially?</p>
</div>
<div class="paragraph">
<p>The answer in this case is no: htmx is smart enough to pull out only the content of the <code>body</code> tag to swap in to the new page.
The <code>head</code> tag, etc. are all ignored.  This means you don&#8217;t need to do anything special on the server side to render
templates that <code>hx-boost</code> can handle: just return the normal HTML for your page, and it should work fine.</p>
</div>
<div class="paragraph">
<p>Note that boosted links (and forms) will also continue to update the navigation bar and history, so users will be able to use
the browser back button, be able to copy and paste URLs (or "deep links") and so forth.  It will act pretty much like
a "normal" web application, just faster.</p>
</div>
</div>
<div class="sect3">
<h4 id="_boosted_forms">5.2.2. Boosted Forms</h4>
<div class="paragraph">
<p>Boosted form tags work in a similar way to boosted anchor tags: a boosted form will use an AJAX request rather than the
usual browser-issued request, and will replace the entire body with the response:</p>
</div>
<div class="paragraph">
<p>Here is an example of a form that posts messages to the <code>/messages</code> end point using an HTTP <code>POST</code> request.  By adding
<code>hx-boost</code> to it, those requests will be done in AJAX, rather than the normal browser behavior.</p>
</div>
<div id="listing-4-2" class="listingblock">
<div class="title">Listing 1. 43. A Boosted Form</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;form action="/messages" method="post" hx-boost="true"&gt;<b class="conum">(1)</b>
  &lt;input type="text" name="message" placeholder="Enter A Message..."&gt;
  &lt;button&gt;Post Your Message&lt;/button&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>As with the link, a simple attribute makes this form AJAX-powered</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Another advantage of the AJAX-based request that <code>hx-boost</code> uses is that it avoids what is known as a "flash of unstyled
content", which is when a page renders before all of the styling information has been downloaded for it.  This causes
a disconcerting momentary flash of the unstyled content.  The content is then restyled when all the style information is available.
You probably notice this as a flicker when you move around the internet: text, images and other content can "jump around"
on the page as styles are applied to it.</p>
</div>
<div class="paragraph">
<p>With <code>hx-boost</code> the sites styling is already loaded <em>before</em> the content is retrieved, so there is no such flash of
unstyled content.  This can make a "boosted" application feel both smoother and snappier in general.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attribute_inheritance">5.2.3. Attribute Inheritance</h4>
<div class="paragraph">
<p>Let&#8217;s expand on our previous example of a boosted link, and add a few more boosted links alongside it.  We add links
such that we have one to the <code>/contacts</code> page, the one to the <code>/settings</code> page, and one to the <code>/help</code> page.  All these
links are boosted and will behave in the manner that we have described above.</p>
</div>
<div class="paragraph">
<p>But this feels a little redundant, doesn&#8217;t it?  It is a shame we have to annotate all three links with the <code>hx-boost="true"</code>,
right next to one another.</p>
</div>
<div id="listing-4-3" class="listingblock">
<div class="title">Listing 1. 44. A Set of Boosted Links</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;a href="/contacts" hx-boost="true"&gt;Contacts&lt;/a&gt;
&lt;a href="/settings" hx-boost="true"&gt;Settings&lt;/a&gt;
&lt;a href="/help" hx-boost="true"&gt;Help&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Luckily, htmx offers a feature to help reduce redundancy here: attribute inheritance.  With most attributes in htmx, if you
place it on a parent, it will also apply to all children elements.  This is how Cascading Style Sheets work, and that idea
inspired htmx to adopt a similar "cascading htmx attributes" concept.</p>
</div>
<div class="paragraph">
<p>So, to avoid the redundancy in this example, lets introduce a <code>div</code> element that encloses all the links and "hoist" the
<code>hx-boost</code> attribute up to it.  This will let us remove the redundant <code>hx-boost</code> attributes, but ensure all the links are
still boosted, inheriting that functionality from the parent <code>div</code>.  Note that any legal element type could be used here,
we just used a <code>div</code> out of habit.</p>
</div>
<div id="listing-4-3" class="listingblock">
<div class="title">Listing 1. 45. Boosting Links Via The Parent</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div hx-boost="true"&gt; <b class="conum">(1)</b>
    &lt;a href="/contacts"&gt;Contacts&lt;/a&gt;
    &lt;a href="/settings"&gt;Settings&lt;/a&gt;
    &lt;a href="/help"&gt;Help&lt;/a&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>hx-boost</code> has been moved to the parent div</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>But what if you have a link that you <em>don&#8217;t</em> want boosted within an element that has <code>hx-boost="true"</code> on it?  A good
example is a link to a resource to be downloaded, such as a PDF.  Downloading a file can&#8217;t be handled well by an AJAX
request, so you&#8217;d want that link to behave normally.</p>
</div>
<div class="paragraph">
<p>To deal with this situation, you would override the parent <code>hx-boost</code> value with <code>hx-boost="false"</code> on the element
in question:</p>
</div>
<div id="listing-4-3" class="listingblock">
<div class="title">Listing 1. 46. Disabling Boosting</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div hx-boost="true"&gt; <b class="conum">(1)</b>
    &lt;a href="/contacts"&gt;Contacts&lt;/a&gt;
    &lt;a href="/settings"&gt;Settings&lt;/a&gt;
    &lt;a href="/help"&gt;Help&lt;/a&gt;
    &lt;a href="/help/documentation.pdf" hx-boost="false"&gt;Download Docs&lt;/a&gt; <b class="conum">(2)</b>
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>hx-boost</code> is still on the parent div</p>
</li>
<li>
<p>The boosting behavior is overridden for this link</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here we have a new link to a documentation PDF that we wish to function normally.  We have added <code>hx-boost="false"</code> to
the link and this will override the <code>hx-boost="true"</code> on the parent, reverting this link to regular link behavior and
allowing the download behavior that we want.</p>
</div>
</div>
<div class="sect3">
<h4 id="_progressive_enhancement">5.2.4. Progressive Enhancement</h4>
<div class="paragraph">
<p>A very nice aspect of <code>hx-boost</code> is that it "progressively enhances" web applications.  Consider the links in the
example above.  What would happen if someone did not have JavaScript enabled?  Nothing much!  The application would
continue to work, but it would issue regular HTTP requests, rather than AJAX-based HTTP requests.  This means that
your web application will work for the maximum number of users, with users of more modern browsers (or users who
have not turned off JavaScript) able to take advantage of the benefits of AJAX-style navigation, but other people
still able to use the app just fine.  This is sometimes called "graceful degredation" as well.</p>
</div>
<div class="paragraph">
<p>Compare this with a JavaScript heavy Single Page Application: it simply won&#8217;t function without JavaScript, obviously.
It is very difficult to adopt a progressive enhancement approach within that model.</p>
</div>
<div class="paragraph">
<p>This is not to say that htmx <em>always</em> offers progressive enhancement.  It is certainly possible to build features that
do not offer a "No JS" fallback in htmx, and, in fact, many of the features we will build later in the book will fall
into this category.  (I will note when a feature is progressive enhancement friendly and when it is not.)  Ultimately,
it is up to you, the developer, to decide if the tradeoffs of progressive enhancement (more basic UX functionality, a
limited improvement over plain HTML) are worth the benefits for your applications users.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_hx_boost_to_contact_app">5.2.5. Adding <code>hx-boost</code> to Contact.app</h4>
<div class="paragraph">
<p>For our contact app we want this "boost" behavior&#8230;&#8203; well, everywhere.  Right?  Why not?  How could we accomplish that?</p>
</div>
<div class="paragraph">
<p>Pretty darned easy: just add <code>hx-boost</code> on the <code>body</code> tag of our <code>layout.html</code> template, and be done with it!</p>
</div>
<div id="listing-4-3" class="olist arabic">
<ol class="arabic">
<li>
<p>Boosting The Entire Contact.app</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-" data-lang="">&lt;html&gt;
...
&lt;body hx-boost="true"&gt;<b class="conum">(1)</b>
...
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>All links and forms will be boosted now!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now every link and form in our application will use AJAX by default, making it feel much snappier!  Consider the
"New Contact" link on the main page:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A Newly Boosted "Add Contact" Link</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-" data-lang="">  &lt;a href="/contacts/new"&gt;Add Contact&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though we haven&#8217;t touched anything on this link or on the server side handling of the URL it targets, it will
now "just work" with AJAX (or, if JavaScript isn&#8217;t enabled, using standard web navigation), including updating history,
back button support and so on.</p>
</div>
<div class="paragraph">
<p>All this with one, single attribute.  This extremely high power-to-weight ratio is why <code>hx-boost</code>, which is so different from
every other attribute in htmx, is part of the library.  It&#8217;s just too good an idea not to include!</p>
</div>
<div class="paragraph">
<p>So, that&#8217;s it, books over!  You&#8217;ve got yourself an AJAX-powered hypermedia application now!</p>
</div>
<div class="paragraph">
<p>Of course, I&#8217;m kidding.  There is a lot more to htmx, and there is a lot more room for improvement in our application,
so let&#8217;s keep rolling.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_next_step_deleting_contacts">5.3. A Next Step: Deleting Contacts</h3>
<div class="paragraph">
<p>In Chapter 2 you&#8217;ll recall that we had a small form on the edit page of a contact to delete the contact:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 47. Plain HTML Form To Delete A Contact</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">    &lt;form action="/contacts/{{ contact.id }}/delete" method="post"&gt;
        &lt;button&gt;Delete Contact&lt;/button&gt;
    &lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This form issued an HTTP <code>POST</code> to, for example, <code>/contacts/42/delete</code>, in order to delete the contact with the ID 42.</p>
</div>
<div class="paragraph">
<p>I mentioned previously that one of the tremendously annoying things about HTML is that you can&#8217;t issue an HTTP <code>DELETE</code>
(or <code>PUT</code> or <code>PATCH</code>) request directly, even though these are all part of HTTP and HTTP is <em>obviously designed</em> for
transferring HTML!  But now, with htmx, we have a chance to rectify this situation.</p>
</div>
<div class="paragraph">
<p>The "right thing", from a REST-ful, resource oriented perspective is, rather than issuing an HTTP <code>POST</code> to
<code>/contacts/42/delete</code>, to issue an HTTP <code>DELETE</code> to <code>/contacts/42</code>.  We want to delete the contact.  The contact is
a resource.  The URL for that resource is <code>/contacts/42</code>.  So the ideal situation is a <code>DELETE</code> to <code>`/contacts/42/</code>.</p>
</div>
<div class="paragraph">
<p>So, how can we update our application to do this while still staying within the hypermedia model?  We can simply take
advantage of the <code>hx-delete</code> attribute, like so:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 48. An htmx Powered Button For Deleting A Contact</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">  &lt;button hx-delete="/contacts/{{ contact.id }}"&gt;Delete Contact&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pretty simple!  There are two things, in particular, to notice about this new implementation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We no longer need a <code>form</code> tag to wrap the button, because the button itself carries the hypermedia action that
it performs directly on itself.</p>
</li>
<li>
<p>We no longer need to use the somewhat awkward <code>"/contacts/{{ contact.id }}/delete"</code> route, but can simply use the
<code>"/contacts/{{ contact.id }}</code> route, since we are issuing a <code>DELETE</code>, which disambiguates the operation we are
performing on the resource from other potential operations!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, I should note, unlike with the <code>hx-boost</code> examples above, this solution will <em>not</em> degrade gracefully.  To make
this solution degrade gracefully, we would need to wrap the button in a form element and handle a <code>POST</code> on the server
side as well.  In the interest of keeping things simple, we are going to omit that more elaborate solution.</p>
</div>
<div class="sect3">
<h4 id="_updating_the_server_side">5.3.1. Updating The Server Side</h4>
<div class="paragraph">
<p>We have updated our client-side code, that is our HTML, so it now does "the right thing" from a hypermedia perspective:
we want to delete a contact, and we are issuing a <code>DELETE</code> request.  But we still have some work to do!  Since we
updated both the route and the HTTP action we are using, we are going to need to update the server side implementation
as well to handle this new HTTP Request.</p>
</div>
<div class="paragraph">
<p>Here is the original code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">@app.route("/contacts/&lt;contact_id&gt;/delete", methods=["POST"])
def contacts_delete(contact_id=0):
    contact = Contact.find(contact_id)
    contact.delete()
    flash("Deleted Contact!")
    return redirect("/contacts")</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are going to have to do two things: first we need to update the route for our handler to the new location and method
we are using to delete contacts.  This will be relatively straight forward.</p>
</div>
<div class="paragraph">
<p>Secondly, and this is a bit more subtle, we are going to need to change the HTTP Response Code that the flask handler
sends back to the client for this redirect.  Let&#8217;s take a quick sidebar on what HTTP response codes are, and why they are
important to understand in this case.</p>
</div>
<div class="sect4">
<h5 id="_http_response_codes">HTTP Response Codes</h5>
<div class="paragraph">
<p>HTTP Response Codes are numeric values that are embedded in an HTTP response that let the client know what the result
of a request was.  The most familiar response code for most web developers is <code>404</code>, which stands for "Not Found" and
is the response code that is returned by web servers when a resource that does not exist is requested.</p>
</div>
<div class="paragraph">
<p>HTTP breaks response codes up into various categories:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code>-<code>199</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Informational responses that provide information about how the server is processing the response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200</code>-<code>299</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Successful responses indicating that the request succeeded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>300</code>-<code>399</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redirection responses indicating that the request should be sent to some other URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>400</code>-<code>499</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client error responses indicating that the client made some sort of bad request (e.g. asking for something that didn&#8217;t
  exist in the case of <code>404</code> errors)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500</code>-<code>599</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server error responses indicating that the server encountered an error internally as it attempted to respond to the request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Within each of these categories there are multiple response codes for specific situations.  A good example is the <code>404 Not Found</code>
response code that we already mentioned, which indicates that the requested resource was not fount.  This is in contrast
with the <code>403 Forbidden</code> response code, which is still a "Client Error" response code, but which indicates that the current user
is not allowed to view the given resource.</p>
</div>
<div class="paragraph">
<p>Different response codes will often trigger different browser behaviors, so it is important to understand exactly which
one you are returning, especially as you get deeper into creating a Hypermedia Driven Application.</p>
</div>
</div>
<div class="sect4">
<h5 id="_returning_to_our_handler">Returning To Our Handler</h5>
<div class="paragraph">
<p>OK, now we are armed with a more in-depth understanding of what HTTP response codes are.  A problem with our current
delete handler is that, by default, in Flask the <code>redirect()</code> method responds with a <code>302</code> response code.  According to the
Mozilla Developer Network (MDN) web docs, this means that the HTTP method and body of the requests <em>will be unchanged</em>
when the redirected request is issued.</p>
</div>
<div class="paragraph">
<p>We are issuing a <code>DELETE</code> request with htmx and then being redirected to the <code>/contacts</code> path by flask.  According to this
logic, that would mean that the redirected request would still be a <code>DELETE</code> method, so we would issue a <code>DELETE</code> request
to <code>/contacts</code>!  Yikes!  That looks like a request to delete all the contacts in our system, doesn&#8217;t it?</p>
</div>
<div class="paragraph">
<p>It wouldn&#8217;t do that, of course, since we haven&#8217;t implemented that behavior, but it is still definitely not what we want:
we&#8217;d like it to simply issue a <code>GET</code>, slightly modifying the Post/Redirect/Get behavior we discussed earlier to be a
Delete/Redirect/Get.</p>
</div>
<div class="paragraph">
<p>Fortunately for us, there is a response code, <code>303 See Other</code>, that does the right thing: when you respond with a 303
response code and a redirect, the browser will issue a <code>GET</code> to the new location.  So we want to use this response code
in our flask application.  Thankfully, this is very easy: there is a second parameter to <code>redirect()</code> that takes the
numeric response code you wish to send.</p>
</div>
</div>
<div class="sect4">
<h5 id="_putting_it_all_together">Putting It All Together</h5>
<div class="paragraph">
<p>So we want to make the following changes to our server side code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We want to change the HTTP action associated with it to <code>DELETE</code></p>
</li>
<li>
<p>We want to remove the ugly <code>/delete</code> at the end of the path, since we are now using a proper HTTP action</p>
</li>
<li>
<p>We want to be sure to issue a <code>303 See Other</code> response code so we properly issue a <code>GET</code> after the redirect</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is our updated code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">@app.route("/contacts/&lt;contact_id&gt;", methods=["DELETE"]) <b class="conum">(1)</b>
def contacts_delete(contact_id=0):
    contact = Contact.find(contact_id)
    contact.delete()
    flash("Deleted Contact!")
    return redirect("/contacts", 303) <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A slightly different path and method for the handler</p>
</li>
<li>
<p>The response code is now a 303</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, when you want to remove a given contact, you can simply issue a <code>DELETE</code> to the same URL as you used to access the
contact in the first place.  A much more natural HTTP approach to deleting a resource!</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_targeting_the_right_element">5.3.2. Targeting The Right Element</h4>
<div class="paragraph">
<p>We aren&#8217;t quite out of the woods yet, however.  As you may recall, by default htmx "targets" the element that triggers a request,
and will place the HTML returned by the server inside that element.  In this case, since the redirect to <code>/contacts</code> is
going to re-render the entire contact list, we will end up in the unfortunate situation where the entire list ends up
<em>inside</em> the "Delete Contact" button!</p>
</div>
<div class="paragraph">
<p>Mis-targeting elements comes up from time to time in htmx and can lead to some pretty funny situations.</p>
</div>
<div class="paragraph">
<p>The fix for this is to add an explicit target to the button, targeting the <code>body</code> element with the response:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 49. A fixed htmx Powered Button For Deleting A Contact</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">  &lt;button hx-delete="/contacts/{{ contact.id }}"
          hx-target="body"&gt; <b class="conum">(1)</b>
    Delete Contact
  &lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We have added an explicit target to the button now</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now our button behaves as expected: clicking on the button will issue an HTTP <code>DELETE</code> to the server against the URL for
the current contact, delete the contact and redirect back to the contact list page, with a nice flash message.  Perfect!</p>
</div>
</div>
<div class="sect3">
<h4 id="_updating_the_location_bar_url_properly">5.3.3. Updating The Location Bar URL Properly</h4>
<div class="paragraph">
<p>Well, almost.</p>
</div>
<div class="paragraph">
<p>If you click on the button you will notice that, despite the redirect, the URL in the location bar is
not correct.  It still points to <code>/contacts/{{ contact.id }}</code>.  This is because we haven&#8217;t told htmx to update
the URL: it just issues the <code>DELETE</code> request and then updates the DOM with the response.</p>
</div>
<div class="paragraph">
<p>As we mentioned, boosting will naturally update the location bar for you, mimicking normal anchors and forms, but in
this case we are building a custom button because we want to issue a <code>DELETE</code>, something that is not possible in plain HTML.
So we need to let htmx know that we want the resulting URL from this request "pushed" into the location bar.</p>
</div>
<div class="paragraph">
<p>We can achieve this by adding the <code>hx-push-url</code> attribute with the value <code>true</code> to our button:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 50. Deleting A Contact, Now With Proper Location Information</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">  &lt;button hx-delete="/contacts/{{ contact.id }}"
          hx-push-url="true" <b class="conum">(1)</b>
          hx-target="body"&gt;
    Delete Contact
  &lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We tell htmx to push the redirected URL up into the location bar</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>Now</em> we are done.  We have a button that, all by itself, is able to issue a properly formatted HTTP <code>DELETE</code> request to
the correct URL, and the UI and location bar are all updated correctly.  This was accomplished with three declarative
attributes placed directly on the button <code>hx-delete</code>, <code>hx-target</code> and <code>hx-push-url</code>.  Not only that, we were able to remove
the enclosing form tag as a bonus!  Pretty clean!</p>
</div>
</div>
<div class="sect3">
<h4 id="_one_last_thing">5.3.4. One Last Thing</h4>
<div class="paragraph">
<p>And yet, if you are like me, something probably doesn&#8217;t feel quite right here.  Deleting a contact is a pretty darned
destructive action, isn&#8217;t it?  And what if someone accidentally clicked on the "Delete Contact" button when they meant
to click on the "Save" button?</p>
</div>
<div class="paragraph">
<p>As it stands now we would just delete that contact and too bad, so sad for the user.</p>
</div>
<div class="paragraph">
<p>Fortunately htmx has an easy mechanism for adding a confirmation message on destructive operations like this: the
<code>hx-confirm</code> attribute.  You can place this attribute on an element, with a message as its value, and the JavaScript
method <code>confirm()</code> will be called before a request is issued, which will show a simple confirmation dialog to the user
asking them to confirm the action.  Very easy and a great way to prevent accidents.</p>
</div>
<div class="paragraph">
<p>Here is how we would add confirmation of the contact delete operation:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 51. Confirming Deletion</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">  &lt;button hx-delete="/contacts/{{ contact.id }}"
          hx-push-url="true"
          hx-confirm="Are you sure you want to delete this contact?" <b class="conum">(1)</b>
          hx-target="body"&gt;
    Delete Contact
  &lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This message will be shown to the user, asking them to confirm the delete</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, when someone clicks on the "Delete Contact" button, they will be presented with a prompt that asks "Are you sure
you want to delete this contact?" and they will have an opportunity to cancel if they clicked the button in error.  Very
nice.</p>
</div>
<div class="paragraph">
<p>With this final change we now have a pretty solid "delete contact" mechanic: we are using the correct REST-ful routes
and HTTP Methods, we are confirming the deletion, and we have removed a lot of the cruft that normal HTML imposes on us,
all while using declarative attributes in our HTML and staying firmly within the normal hypermedia model of the web.</p>
</div>
</div>
<div class="sect3">
<h4 id="_progressive_enhancement_2">5.3.5. Progressive Enhancement?</h4>
<div class="paragraph">
<p>One thing to note about our solution, however, is that it is <em>not</em> a progressive enhancement to our web application: if
someone has disabled JavaScript then this functionality will no longer work.  You could do additional work to keep
the older mechanism working in a JavaScript-disabled environment, but it would introduce additional and redundant code.</p>
</div>
<div class="paragraph">
<p>Progressive Enhancement can be a hot-button topic in web development, with lots of passionate opinions and perspectives.
htmx, like most JavaScript libraries, makes it possible to create applications that do not function in the absence of
JavaScript. Retaining support for non-JavaScript clients requires additional work and complexity.  It is important to
determine exactly how important supporting non-JavaScript clients is before you begin using htmx, or any other JavaScript
framework, for improving your web applications.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_next_steps_validating_contact_emails">5.4. Next Steps: Validating Contact Emails</h3>
<div class="paragraph">
<p>Let&#8217;s move on to another improvement in our application: a big part of any web app is validating the data that is
submitted to the server side: ensuring emails are correctly formatted and unique, numeric values are valid, dates are
acceptable, and so forth.  Currently, our application has a small amount of validation that is done entirely server side
andthat displays an error message when an error is detected.</p>
</div>
<div class="paragraph">
<p>We are not going to go into the details of how validation works in the model objects, but recall what
the code for updating a contact looks like from Chapter 2:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 52. Server Side Validation On Contact Update</div>
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">def contacts_edit_post(contact_id=0):
    c = Contact.find(contact_id)
    c.update(request.form['first_name'], request.form['last_name'], request.form['phone'], request.form['email'])
    if c.save(): <b class="conum">(1)</b>
        flash("Updated Contact!")
        return redirect("/contacts/" + str(contact_id))
    else:
        return render_template("edit.html", contact=c) <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We attempt to save the contact</p>
</li>
<li>
<p>If the save does not succeed we re-render the form to display error messages</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So we attempt to save the contact, and, if the <code>save()</code> method returns true, we redirect to the contact&#8217;s detail page.
If the <code>save()</code> method does not return true, that indicates that there was a validation error and so, instead of redirecting
we re-render the HTML for editing the contact.  This gives the user a chance to correct the errors, which are displayed
alongside the inputs.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at the HTML for the email input:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 53. Validation Error Messages</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="text" placeholder="Email" value="{{ contact.email }}"&gt;
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt;<b class="conum">(1)</b>
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Display any errors associated with the email field</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We have a label for the input, an input of type <code>text</code> and then a bit of HTML to display any error messages associated
with the email.  When the template is rendered on the server, if there are errors associated with the contact&#8217;s email, they will
be displayed in this span, which will be highlighted red.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Server Side Validation Logic</div>
<div class="paragraph">
<p>Right now there is a bit of logic in the contact class that checks if there are any other contacts with
the same email address, and adds an error to the contact model if so, since we do not want to have duplicate emails in the
database.  This is a very common validation example: emails are usually unique and adding two contacts with the same email
is almost certainly a user error.</p>
</div>
<div class="paragraph">
<p>Again, we are not going to go into the details of how validation works in our models, in the interest of staying focused
on hypermedia, but whatever server side framework you are using almost certainly has some sort of infrastructure available
for validating data and collecting errors to display to the user.  This sort of infrastructure is very common in
Web 1.0 server side frameworks.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The error message shown when a user attempts to save a contact with a duplicate email is "Email Must Be Unique":</p>
</div>
<div id="figure-4-1" class="imageblock">
<div class="content">
<img src="../images/screenshot_validation_error.png" alt="screenshot validation error">
</div>
<div class="title">Figure 1. 5. Email Validation Error</div>
</div>
<div class="paragraph">
<p>All of this is done using plain HTML and using Web 1.0 techniques, and it works well.</p>
</div>
<div class="paragraph">
<p>However, as the application currently stands, there are two annoyances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, there is no email format validation: you can enter whatever characters you&#8217;d like as an email and,
as long as they are unique, the system will allow it</p>
</li>
<li>
<p>Second, if a user has entered a duplicate email, they will not find this fact out until they have filled in
all the fields because we only check the email&#8217;s uniqueness when all the data is submitted.  This could be
quite annoying if the user was accidentally reentering a contact and had to put all the contact information in
before being made aware of this fact!</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_updating_our_input_type">5.4.1. Updating Our Input Type</h4>
<div class="paragraph">
<p>For the first issue, we have a pure HTML mechanism for improving our application: HTML 5 supports inputs of
type <code>email</code>!  All we need to do is switch our input from type <code>text</code> to type <code>email</code>, and the browser will
enforce that the value entered properly matches the email format:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 54. Changing The Input To Type <code>email</code></div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="email" placeholder="Email" value="{{ contact.email }}"&gt; <b class="conum">(1)</b>
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A simple change of the <code>type</code> attribute to <code>email</code> ensures that values entered are valid emails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With this change, when the user enters a value that isn&#8217;t a valid email, the browser will display an
error message asking for a properly formed email in that field.</p>
</div>
<div class="paragraph">
<p>So a simple single-attribute change done in pure HTML improves our validation and addresses the first
annoyance we noted!</p>
</div>
<div class="paragraph">
<p>Not bad!</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Server Side vs. Client Side Validations</div>
<div class="paragraph">
<p>More experienced web developers might be grinding their teeth a bit at the code above: this validation
is done entirely on <em>the client side</em>.  That is, we are relying on the browser to detect the malformed
email and correct the user.  Unfortunately, the client side is not trustworthy: a browser may have a
bug in it that allows the user to circumvent the validation code.  Or, worse, the user may be malicious
and figure out a mechanism around our validation entirely.  For example: they could simply inspect the
email input and revert its type to text.</p>
</div>
<div class="paragraph">
<p>This is a perpetual danger in web development: all validations done on the client side cannot be trusted
and, if the validation is important, <em>must be redone</em> on the server side.  This is less of a problem in
Hypermedia Driven Applications than in Single Page Applications, because the focus of HDAs is the server
side, but it is still something worth bearing in mind as you build your application!</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_inline_validation">5.4.2. Inline Validation</h4>
<div class="paragraph">
<p>While we have improved our validation experience a bit, the user must still submit the form to get any feedback
on duplicate emails.  We can use htmx to improve this user experience.</p>
</div>
<div class="paragraph">
<p>It would be better if the user were able to see a duplicate email error immediately after entering the email value.  It
turns out that inputs fire a <code>change</code> event and, in fact, the <code>change</code> event is the <em>default trigger</em> for inputs in htmx.
So, what we want to have happen is as follows: when the user enters an email, we immediately issue a request to the server
and validate that email, and render an error message if necessary.</p>
</div>
<div class="paragraph">
<p>Recall the current HTML for our email input:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 55. The Initial Email Configuration</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="email" placeholder="Email" value="{{ contact.email }}"&gt; <b class="conum">(1)</b>
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt; <b class="conum">(2)</b>
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This is the input that we want to have drive an HTTP request to validate the email</p>
</li>
<li>
<p>This is the span we want to put the error message, if any, into</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So we want to add an <code>hx-get</code> to this input, which will cause it to issue an HTTP <code>GET</code> request to a given URL to validate
the email.  We then want to target the error span following the input with any error message returned from the server.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s make those changes to our HTML:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 56. Our Updated HTML</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="email"
           hx-get="/contacts/{{ contact.id }}/email" <b class="conum">(1)</b>
           hx-target="next .error" <b class="conum">(2)</b>
           placeholder="Email" value="{{ contact.email }}"&gt; <b class="conum">(1)</b>
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Issue an HTTP <code>GET</code> to the <code>email</code> endpoint the contact</p>
</li>
<li>
<p>Target the next element with the class <code>error</code> on it</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, with these two simple attributes in place, whenever someone changes the value of the input (remember, <code>change</code> is the
<em>default</em> trigger for inputs in htmx) an HTTP request will be issued to the given URL and, if there are any errors, they
will be loaded into the error span.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validating_emails_server_side">5.4.3. Validating Emails Server Side</h4>
<div class="paragraph">
<p>Next, let&#8217;s look at the server side implementation.  We are going to add another end point, similar to our edit
end point in some ways: it is going to look up the contact based on the ID encoded in the URL.  In this case, however,
we only want to update the email of the contact, and we obviously don&#8217;t want to save it!  Instead, we will call the
<code>validate()</code> method on it.</p>
</div>
<div class="paragraph">
<p>That method will validate the email is unique and so forth.  At that point we can return any errors associated with the
email directly, or the empty string if none exist.</p>
</div>
<div class="paragraph">
<p>Here is the code:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 57. Our Email Validation End-Point</div>
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">@app.route("/contacts/&lt;contact_id&gt;/email", methods=["GET"])
def contacts_email_get(contact_id=0):
    c = Contact.find(contact_id) <b class="conum">(1)</b>
    c.email = request.args.get('email') <b class="conum">(2)</b>
    c.validate() <b class="conum">(3)</b>
    return c.errors.get('email') or "" <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Look up the contact by id</p>
</li>
<li>
<p>Update its email (note that since this is a <code>GET</code>, we use the <code>args</code> property rather than the <code>form</code> property)</p>
</li>
<li>
<p>Validate the contact</p>
</li>
<li>
<p>Return a string, either the errors associated with the email field or, if there are none, the empty string</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With this small bit of code in place, we now have the following very nice user experience: when a user enters an email
and tabs to the next field, they are immediately notified if the email is already taken!</p>
</div>
<div class="paragraph">
<p>Note that the email validation is <em>still</em> done when the entire contact is submitted for an update, so there is no danger
of allowing duplicate email contacts to slip through: we have simply made it possible for users to catch this situation
earlier by use of htmx.</p>
</div>
<div class="paragraph">
<p>It is also worth noting that this email validation <em>must</em> be done on the server side: you cannot
determine that an email is unique across all contacts unless you have access to the data store of record.  This is another
simplifying aspect of Hypermedia Driven Applications: since validations are done server side, you have access to all
the data you might need to do any sort of validation you&#8217;d like.</p>
</div>
<div class="paragraph">
<p>Here again I want to stress that this interaction is done entirely within the hypermedia model: we are using declarative
attributes to exchange hypermedia with the server in a manner very similar to how links or forms work, but we have managed
to improve our user experience dramatically!</p>
</div>
</div>
<div class="sect3">
<h4 id="_taking_our_user_experience_further">5.4.4. Taking Our User Experience Further</h4>
<div class="paragraph">
<p>Now, despite the fact that we haven&#8217;t written a lot of code here, this is a fairly sophisticated user interface, at
least when compared with plain HTML-based applications.  However, if you have used more advanced web applications you
have probably seen the pattern where an email field (or similar) is validated <em>as you type</em>.</p>
</div>
<div class="paragraph">
<p>This is surely beyond the reach of a Hypermedia Driven Application, right?  Only a sophisticated Single Page Application
framework could provide that level of interactivity!</p>
</div>
<div class="paragraph">
<p>Oh ye of little faith.  With a bit more effort, we can use htmx to achieve this user experience.</p>
</div>
<div class="paragraph">
<p>In fact, all we need to do is to change our trigger.  Currently, we are using the default trigger for inputs, which is the
<code>change</code> event.  To validate as the user types, we would want to capture the <code>keyup</code> event as well:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 58. Triggering With <code>keyup</code> Events</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="email"
           hx-get="/contacts/{{ contact.id }}/email"
           hx-target="next .error"
           hx-trigger="change, keyup" <b class="conum">(1)</b>
           placeholder="Email" value="{{ contact.email }}"&gt;
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>An explicit trigger has been declared, and it triggers on both the <code>change</code> and <code>keyup</code> events</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With this tiny change, every time a user types a character we will issue a request and validate the email!  Simple!</p>
</div>
</div>
<div class="sect3">
<h4 id="_debouncing_our_validation_requests">5.4.5. Debouncing Our Validation Requests</h4>
<div class="paragraph">
<p>Unfortunately, this is probably not what you want: issuing a new request on every key up event would be very wasteful
and could potentially overwhelm your server.  What we want to do is only issue the request if the user has paused for
a small amount of time.  This is called "debouncing" the input, where requests are delayed until things have "settled down".</p>
</div>
<div class="paragraph">
<p>htmx supports a <code>delay</code> modifier for triggers that allows you to debounce a request by adding a delay before the request
is sent. If another event of the same kind appears within that interval, htmx will not issue the request and will reset
the timer.  This is exactly what we want for this situation: if the user is busy typing in an email we won&#8217;t interrupt them,
but as soon as they pause or leave the field, we&#8217;ll issue a request.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add a delay of 200 milliseconds to the <code>keyup</code> trigger, which is long enough to detect that the user has stopped
typing.:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 59. Debouncing the <code>keyup</code> Event</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="email"
           hx-get="/contacts/{{ contact.id }}/email"
           hx-target="next .error"
           hx-trigger="change, keyup delay:200ms" <b class="conum">(1)</b>
           placeholder="Email" value="{{ contact.email }}"&gt;
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We debounce the <code>keyup</code> event by adding a <code>delay</code> modifier</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now we no longer issue a stream of validation requests as the user types.  Instead, we wait until the user pauses for
a bit and then issue the request.  Much better for our server, and still a great user experience!</p>
</div>
</div>
<div class="sect3">
<h4 id="_ignoring_non_mutating_keys">5.4.6. Ignoring Non-Mutating Keys</h4>
<div class="paragraph">
<p>There is one last thing we might want to address: as it stand we will issue a request no matter <em>which</em> keys are pressed,
even if they are keys like the arrow keys, which have no effect on the value of the input.  It would be nice if there were
a way to only issue a request if the input value has changed.  It turns out that htmx has support for that pattern using
the <code>changed</code> modifier for events.  (Not to be confused with the <code>change</code> event!)</p>
</div>
<div class="paragraph">
<p>By adding <code>changed</code> to our <code>keyup</code> trigger, the input will not issue validation requests unless the keyup event actually
updates the inputs value:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 60. Only Sending Requests When The Input Value Changes</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;
    &lt;label for="email"&gt;Email&lt;/label&gt;
    &lt;input name="email" id="email" type="email"
           hx-get="/contacts/{{ contact.id }}/email"
           hx-target="next .error"
           hx-trigger="change, keyup delay:200ms changed" <b class="conum">(1)</b>
           placeholder="Email" value="{{ contact.email }}"&gt;
    &lt;span class="error"&gt;{{ contact.errors['email'] }}&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We do away with pointless requests by only issuing them when the inputs value has actually changed</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now that&#8217;s some pretty good-looking ode!</p>
</div>
<div class="paragraph">
<p>With a total of three attributes and a simple new server-side end point, we
have added a fairly sophisticated user experience to our web application.   Even better, any email validation rules we
add on the server side will <em>automatically</em> just work using this model: because we are using hypermedia as our
communication mechanism there is no need to keep a client-side and server-side model in sync with one another.</p>
</div>
<div class="paragraph">
<p>This is a great demonstration of the power of the hypermedia architecture!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_another_improvement_paging">5.5. Another Improvement: Paging</h3>
<div class="paragraph">
<p>Currently, our application does not support paging: if there are 10,000 contacts in the database we will show
10,000 contacts on the main page!  Let&#8217;s fix that, so that we only show ten contacts at a time with a "Next" and
"Previous" link if there are more than 10 or if we are beyond the first page.</p>
</div>
<div class="paragraph">
<p>The first change we will need to make is to add a simple paging widget to our <code>index.html</code> template.  Here
we will conditionally include two links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If we are beyond the first page, we will include a link to the previous page</p>
</li>
<li>
<p>If there are ten contacts in the current result set, we will include a link to the next page</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This isn&#8217;t a perfect paging widget: ideally we&#8217;d show the number of pages and offer the ability to do more
specific page navigation, and there is the possibility that the next page might have 0 results in it since
we aren&#8217;t checking the total results count, but it will do for now for our simple application.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at the jinja template code for this.</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 61. Adding Paging Widgets To Our List of Contacts</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div&gt;
    &lt;span  style="float: right"&gt; <b class="conum">(1)</b>
        {% if page &gt; 1 %}
          &lt;a href="/contacts?page={{ page - 1 }}"&gt;Previous&lt;/a&gt; <b class="conum">(2)</b>
        {% endif %}
        {% if contacts|length == 10 %}
          &lt;a href="/contacts?page={{ page + 1 }}"&gt;Next&lt;/a&gt; <b class="conum">(3)</b>
        {% endif %}
    &lt;/span&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Include a new div under the table to hold our navigation links</p>
</li>
<li>
<p>If we are beyond page 1, include an anchor tag with the page decremented by one</p>
</li>
<li>
<p>If there are 10 contacts in the current page, include an anchor tag linking to the next page by incrementing it by one</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that here we are using the special jinja syntax <code>contacts|length</code> to compute the length of the contacts
list.</p>
</div>
<div class="paragraph">
<p>Now lets address the server side implementation.</p>
</div>
<div class="paragraph">
<p>We need to look for the <code>page</code> parameter and pass that through to our model as an integer so the model knows
what page of contacts to return:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 62. Adding Paging To Our Request Handler</div>
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">@app.route("/contacts")
def contacts():
    search = request.args.get("q")
    page = int(request.args.get("page", 1)) <b class="conum">(1)</b>
    if search is not None:
        contacts_set = Contact.search(search)
    else:
        contacts_set = Contact.all(page) <b class="conum">(2)</b>
    return render_template("index.html", contacts=contacts_set, page=page)</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Resolve the page parameter, defaulting to page 1 if no page is passed in</p>
</li>
<li>
<p>Pass the page through to the model when loading all contacts so it knows which page of 10 contacts to
return</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This is fairly straightforward: we just need to get another parameter, like the <code>q</code> parameter we passed in for
searching contacts earlier, convert it to an integer and then pass it through to the <code>Contact</code> model so it
knows which page to return.</p>
</div>
<div class="paragraph">
<p>And that&#8217;s it.  We now have a very basic paging mechanism for our web application.  And, believe it or not,
it is already using AJAX, thanks to our use of <code>hx-boost</code> in the application.  Easy!</p>
</div>
<div class="sect3">
<h4 id="_click_to_load">5.5.1. Click To Load</h4>
<div class="paragraph">
<p>Now, the current paging mechanism is fine, although it could use some additional polish.  But sometimes you
don&#8217;t want to have to page through items and lose your place in the application.  In cases like this a different
UI pattern might be better.  For example, you may want to load the next page <em>inline</em> in the current page.  This
is the common "click to load more" UX pattern:</p>
</div>
<div id="figure-1-1" class="imageblock">
<div class="content">
<img src="../images/screenshot_click_to_load.png" alt="screenshot click to load">
</div>
<div class="title">Figure 1. 6. A Click To Load UI</div>
</div>
<div class="paragraph">
<p>Here, you have a button that you can click, and it will load the next set of contacts directly into the page, rather
than "paging" to the next page.  This allows you to keep the current contacts "in context" visually on the page, but
still progress through them as you would in a normal, paged user interface.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how we can implement this in htmx.</p>
</div>
<div class="paragraph">
<p>It&#8217;s actually surprisingly simple: we can just take the existing "Next" link and repurpose it a bit using
nothing but htmx attributes!</p>
</div>
<div class="paragraph">
<p>We want to have a button that, when clicked, appends the rows from the next page of contacts to the current,
exiting table, rather than re-rendering the whole table.  This can be achieved by adding a row to our table
that has just such a button in it:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 63. Changing To "Click To Load"</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">        &lt;tbody&gt;
        {% for contact in contacts %}
            &lt;tr&gt;
                &lt;td&gt;{{ contact.first }}&lt;/td&gt;
                &lt;td&gt;{{ contact.last }}&lt;/td&gt;
                &lt;td&gt;{{ contact.phone }}&lt;/td&gt;
                &lt;td&gt;{{ contact.email }}&lt;/td&gt;
                &lt;td&gt;&lt;a href="/contacts/{{ contact.id }}/edit"&gt;Edit&lt;/a&gt; &lt;a href="/contacts/{{ contact.id }}"&gt;View&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
        {% endfor %}
        {% if contacts|length == 10 %} <b class="conum">(1)</b>
            &lt;tr&gt;
                &lt;td colspan="5" style="text-align: center"&gt;
                    &lt;button hx-target="closest tr" <b class="conum">(2)</b>
                            hx-swap="outerHTML"   <b class="conum">(3)</b>
                            hx-select="tbody &gt; tr" <b class="conum">(4)</b>
                            hx-get="/contacts?page={{ page + 1 }}"&gt;Load More&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        {% endif %}
        &lt;/tbody&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>As with the "Next" link in our paging example, we only show "Load More" if there are 10 contact results in the current page</p>
</li>
<li>
<p>In this case, the button needs to target the closest enclosing row, which is what the <code>closest</code> syntax allows</p>
</li>
<li>
<p>We want to replace this row with the response from the server</p>
</li>
<li>
<p>Of course, we don&#8217;t want to replace the row with the entire response, we only want to replace it with the
rows within the table body of the response, so we use the <code>hx-select</code> attribute to select those rows out using
a standard CSS selector</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Believe it or not, that&#8217;s all we need to change to enable a "Click To Load" style UI!  No server side changes are necessary
because of the flexibility that htmx gives you with respect to how we process server responses.  Pretty cool, eh?</p>
</div>
<div class="sect4">
<h5 id="_relative_positional_targets">Relative Positional Targets</h5>
<div class="paragraph">
<p>Here we saw the first example of a target that was "relatively positioned": <code>closest tr</code>.  The <code>closest</code> keyword indicates
that the closest parent that matches the following CSS selector is the target.  So in this example the target was the
<code>tr</code> that was enclosing the button.</p>
</div>
<div class="paragraph">
<p>htmx also supports <code>next</code> and <code>previous</code> relative positional expressions, allowing you to target the next element or
previous element that matches a given CSS selector.</p>
</div>
<div class="paragraph">
<p>Relative positional expressions like this are quite powerful and allow you to avoid having to generate <code>id</code> attributes
in your HTML just so you can target a particular element.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_infinite_scroll">5.5.2. Infinite Scroll</h4>
<div class="paragraph">
<p>Another somewhat common pattern for dealing with long lists of things is known as "infinite scroll", where,
as the end of a list or table is scrolled into view, more elements are loaded.  This behavior makes more sense
in situations where a user is exploring a category or series of social media posts, rather than in the context of
a contact application, but for completeness we will show how to achieve this in htmx.</p>
</div>
<div class="paragraph">
<p>We can repurpose the "Click To Load" code to implement this new pattern.  If you think about it for a moment, really
infinite scroll is just the "Click To Load" logic, but rather than loading when a click occurs, we want to
load when an element is "revealed" in the view portal of the browser.</p>
</div>
<div class="paragraph">
<p>As luck would have it, htmx offers a synthetic (non-standard) DOM event, <code>revealed</code> that can be used in tandem
with the <code>hx-trigger</code> attribute, to trigger a request when, well, when an element is revealed.  Let&#8217;s convert
our button to a span and take advantage of this event:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. 64. Changing To "Infinite Scroll"</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">{% if contacts|length == 10 %} <b class="conum">(1)</b>
    &lt;tr&gt;
        &lt;td colspan="5" style="text-align: center"&gt;
            &lt;span&lt;1&gt;hx-target="closest tr"
                    hx-trigger="revealed" <b class="conum">(2)</b>
                    hx-swap="outerHTML"
                    hx-select="tbody &gt; tr"
                    hx-get="/contacts?page={{ page + 1 }}"&gt;Loading More...&lt;/span&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
{% endif %}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We have converted our element from a button to a span, since the user will not be clicking on it</p>
</li>
<li>
<p>We trigger the request when the element is revealed, that is when it comes into view in the portal</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So all we needed to do to convert from "Click to Load" to "Infinite Scroll" was update our element to be
a span and add the <code>revealed</code> trigger.  The fact that this was so easy shows how well htmx generalizes
HTML: just a few attributes allow us to dramatically expand what we can achieve with our hypermedia.  And,
again, I note that we are doing all this within the original, REST-ful model of the web, exchanging hypermedia
with the server.  As the web was designed!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_4">5.6. Summary</h3>
<div class="ulist">
<ul>
<li>
<p>Hypermedia-Driven Applications (HDA) can be made more interactive by using the htmx library.</p>
</li>
<li>
<p>A simple and quick way to improve the application is to use the <code>hx-boost</code> attribute, which "boosts"
all links and forms to use AJAX interactions.</p>
</li>
<li>
<p>Deleting a contact can be updated to use the proper <code>DELETE</code> HTTP request, using the <code>hx-delete</code> attribute.</p>
</li>
<li>
<p>Validating the email of a contact as the user entered it can be achieved using a combination of <code>hx-get</code> and <code>hx-target</code>
attributes.</p>
</li>
<li>
<p>AJAX-based paging, in addition to the "Click To Load" and "Infinite Scroll" patterns, can be implemented simply and cleanly
using htmx.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_extending_html_as_hypermedia.html">Extending HTML As Hypermedia</a> | ↑ Up: <a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a> | ⌂ Home: <a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a> | Next: <a href="_building_hypermedia_systems_2.html">Building Hypermedia Systems</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-20 12:44:43 -0600
</div>
</div>
</body>
</html>