<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Adam Stepinski, Carson Gross, Deniz Akşimşek">
<title>Building Hypermedia Systems</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_extending_html_as_hypermedia" class="book">
<div id="header">
<h1>Building Hypermedia Systems</h1>
<div class="details">
<span id="author" class="author">Adam Stepinski, Carson Gross, Deniz Akşimşek</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a></span></p><ul class="sectlevel0">
<li><a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a>
<ul class="sectlevel1">
<li><a href="_reintroducing_hypermedia.html">1. Reintroducing Hypermedia</a>
</li>
<li><a href="_rest_hateoas_and_all_that.html">2. REST, HATEOAS and All That</a>
</li>
<li><a href="_building_a_simple_web_1_0_application.html">3. Building A Simple Web 1.0 Application</a>
</li>
<li><a href="_extending_html_as_hypermedia.html"><span class="toc-current">4. Extending HTML As Hypermedia</span></a>
<ul class="sectlevel3">
<li><a href="_extending_html_as_hypermedia.html#_a_close_look_at_a_hyperlink">4.1. A Close Look At A Hyperlink</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_extending_html_as_a_hypermedia_with_htmx">4.2. Extending HTML as a Hypermedia with htmx</a>
<ul class="sectlevel3">
<li><a href="_extending_html_as_hypermedia.html#_installing_and_using_htmx">4.2.1. Installing and Using htmx</a>
</li>
</ul>
</li>
<li><a href="_extending_html_as_hypermedia.html#_triggering_http_requests">4.3. Triggering HTTP Requests</a>
<ul class="sectlevel3">
<li><a href="_extending_html_as_hypermedia.html#_its_all_just_html">4.3.1. It&#8217;s All Just HTML!</a>
</li>
</ul>
</li>
<li><a href="_extending_html_as_hypermedia.html#_targeting_other_elements">4.4. Targeting Other Elements</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_swap_styles">4.5. Swap Styles</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_using_other_events">4.6. Using Other Events</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_passing_request_parameters">4.7. Passing Request Parameters</a>
<ul class="sectlevel3">
<li><a href="_extending_html_as_hypermedia.html#_enclosing_forms">4.7.1. Enclosing Forms</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_including_inputs">4.7.2. Including inputs</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_inline_values">4.7.3. Inline Values</a>
</li>
</ul>
</li>
<li><a href="_extending_html_as_hypermedia.html#_history_support">4.8. History Support</a>
</li>
<li><a href="_extending_html_as_hypermedia.html#_summary_3">4.9. Summary</a>
</li>
</ul>
</li>
<li><a href="_htmx_in_action.html">5. htmx In Action</a>
</li>
<li><a href="_building_hypermedia_systems_2.html">6. Building Hypermedia Systems</a>
</li>
<li><a href="_more_htmx_patterns.html">7. More htmx Patterns</a>
</li>
<li><a href="_building_hypermedia_systems_3.html">8. Building Hypermedia Systems</a>
</li>
<li><a href="_a_dynamic_archive_ui_with_htmx.html">9. A Dynamic Archive UI With htmx</a>
</li>
<li><a href="_building_hypermedia_systems_4.html">10. Building Hypermedia Systems</a>
</li>
<li><a href="_deep_htmx.html">11. Deep htmx</a>
</li>
<li><a href="_hyperview_a_mobile_hypermedia.html">12. Hyperview: A Mobile Hypermedia</a>
</li>
<li><a href="_building_a_contacts_app_with_hyperview.html">13. Building a Contacts App With Hyperview</a>
</li>
<li><a href="_extending_the_hyperview_client.html">14. Extending the Hyperview Client</a>
</li>
<li><a href="_client_side_scripting.html">15. Client Side Scripting</a>
</li>
<li><a href="_building_hypermedia_systems_5.html">16. Building Hypermedia Systems</a>
</li>
<li><a href="_json_data_apis_hypermedia_driven_applications.html">17. JSON Data APIs &amp; Hypermedia Driven Applications</a>
</li>
<li><a href="_other_hypermedia_libraries_technologies.html">18. Other Hypermedia Libraries &amp; Technologies</a>
</li>
<li><a href="_conclusion_3.html">19. Conclusion</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_extending_html_as_hypermedia">4. Extending HTML As Hypermedia</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter covers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some shortcomings of "plain" HTML</p>
</li>
<li>
<p>How htmx addresses these opportunties to improve the expressiveness of HTML</p>
</li>
<li>
<p>How to issue various HTTP requests with htmx</p>
</li>
<li>
<p>History and back button support in htmx</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the previous chapter we introduced a simple Web 1.0-style hypermedia application to manage contacts.  This application
supported the normal CRUD operations for contacts, as well as a simple mechanism for searching contacts.  Our application
was built using nothing but forms and anchor tags, the traditional tags used to interact with servers, and it exchanges
hypermedia (HTML) with the server over HTTP, issuing <code>GET</code> and <code>POST</code> HTTP requests and receiving back full HTML documents
in response.  It is pretty simple, but it is also definitely a Hypermedia Driven Application.</p>
</div>
<div class="paragraph">
<p>Our application is robust, leverages the web&#8217;s strengths and is simple to understand.  So what&#8217;s not to like?
Well, unfortunately, our application isn&#8217;t completely satisfying from either a user experience perspective, or
from a technical perspective.  It suffers from problems typical of this style of Web 1.0 applications.</p>
</div>
<div class="paragraph">
<p>Two obvious problems that jump out are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From a user experience perspective: there is a noticeable refresh when you move between pages of the application, of when you create, update or
delete a contact.  This is because every user interaction (link click or form submission) requires a full page
refresh, with a whole new HTML document to process after each action.</p>
</li>
<li>
<p>From a technical perspective, all the updates are done with the <code>POST</code> HTTP action.  This is despite the fact that
more logical actions HTTP request types like <code>PUT</code> and <code>DELETE</code> exist and would make far more sense for some
operations.  After all, if we wanted to delete a resource, wouldn&#8217;t it make more sense to use an HTTP <code>DELETE</code> request
to do so?  Somewhat ironically, since we are using pure HTML, we are unable to access the full expressive power
of HTTP, which was designed specifically <em>for</em> HTML!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first point, in particular, is noticeable in Web 1.0 style applications like ours and is what is responsible for giving
them the reputation for being "clunky" when compared with their more sophisticated JavaScript-based Single Page Application
cousins.</p>
</div>
<div class="paragraph">
<p>Single Page Applications eliminate this clunkiness by updating a web page directly, by mutating the Document Object Model
(DOM).  The DOM is the internal model that a browser builds up when it processes HTML, forming a tree of "nodes" for
the tags and other content in the HTML.  The DOM provides a programmatic JavaScript API that allows you to update the nodes
in a page directly, without the use of hypermedia.  Using this API, JavaScript code can insert new content, or remove or
update existing content, entirely outside the normal browser request mechanism.</p>
</div>
<div class="paragraph">
<p>There are a few of different styles of SPA, but, as we  discussed in Chapter 1, the most common approach today is to tie
the DOM to a JavaScript model and then let an SPA framework like react (<a href="https://reactjs.org/" class="bare">https://reactjs.org/</a>) or vue (<a href="https://vuejs.org/" class="bare">https://vuejs.org/</a>)
<em>reactively</em> update the DOM when the JavaScript model is updated: you make a change to a JavaScript object and the
web page magically updates its state to reflect the change in the model.</p>
</div>
<div class="paragraph">
<p>Recall that in this style of application communication with the server is typically done via a JSON Data API,
with the application sacrificing the advantages of hypermedia in order to provide a better, smoother user experience.</p>
</div>
<div class="paragraph">
<p>Many web developers today would not even consider the hypermedia approach due to the perceived "legacy" feel of these
Web 1.0 style applications.</p>
</div>
<div class="paragraph">
<p>The second, technical point may strike you as a bit pedantic, and I am the first to admit that conversations around
REST and which HTTP Action is right for a given operation can become very tedious.  But, nonetheless, it has to be
admitted that, when using plain HTML, it is impossible to use HTTP to its full power and, therefore, it is impossible
to realize the full vision of the web as a REST-ful system: a complete, stateless, resource-oriented distributed networking
architecture that is flexible and resilient.</p>
</div>
<div class="sect3">
<h4 id="_a_close_look_at_a_hyperlink">4.1. A Close Look At A Hyperlink</h4>
<div class="paragraph">
<p>As we have been saying, it turns out that you can actually get a lot of interactivity out of the hypermedia model, if
you adopt a hypermedia-oriented library like htmx.  To understand conceptually how htmx allows us to better address the UX
concerns of Web 1.0 style applications, let&#8217;s revisit the hyperlink/anchor tag from Chapter 1 and really drill in to
each facet of it:</p>
</div>
<div class="paragraph">
<p>This simple anchor tag, when interpreted by a browser, creates a hyperlink to the Manning website:</p>
</div>
<div id="listing-3-1" class="listingblock">
<div class="title">Listing 1. 23. A Simple Hyperlink, Again</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;a href="https://www.manning.com/"&gt;
  Manning Books
&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Breaking down exactly what this link will tell the browser to do, we have the following list:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The browser will render the text "Manning Books" to the screen, likely with a decoration indicating it is clickable</p>
</li>
<li>
<p>Then, when a user clicks on the text&#8230;&#8203;</p>
</li>
<li>
<p>The browser will issue an HTTP <code>GET</code> to <code><a href="https://www.manning.com" class="bare">https://www.manning.com</a></code> and then&#8230;&#8203;</p>
</li>
<li>
<p>The browser will load the HTTP response into the browser window, replacing the current document</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So we have four aspects of a simple hypermedia link like this, with the last three being the mechanic that distinguishes
a hyperlink from "normal" text.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a moment and think about how we can generalize this fundamental hypermedia mechanic of HTML.  There is no rule saying that
hypermedia can <em>only</em> work this way, after all!</p>
</div>
<div class="paragraph">
<p>An initial observation is: why are anchor tags so special?  Shouldn&#8217;t other elements (besides forms) be able to
issue HTTP requests as well?  For example, shouldn&#8217;t <code>button</code> elements be able to do so?  It seemed silly to have to
wrap a form tag around a button to make deleting contacts work in our application.  Why should only anchor tags and
forms be able to issue requests?</p>
</div>
<div class="paragraph">
<p>This presents our first opportunity to expand the expressiveness of HTML:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="title">Opportunity 1</div>
<div class="paragraph">
<p>HTML could be extended to allow <em>any</em> element to issue a request to the server</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For our next observation, let&#8217;s consider the event that triggers the request to the server on our link: a click.
Well, what&#8217;s so special about clicking (in the case of anchors) or submitting (in the case of forms)?  Those are just two
of many, many events that are fired by the DOM, after all.  Events like mouse down, or key up, or blur are all events
you might want to use to issue an HTTP request. Why shouldn&#8217;t these other events be able to trigger requests as well?</p>
</div>
<div class="paragraph">
<p>This gives us our second opportunity to expand the expressiveness of HTML:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="title">Opportunity 2</div>
<div class="paragraph">
<p>HTML could be extended to allow <em>any</em> event, not just a click, as in the case of our hyperlinks, to trigger HTTP requests</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Getting a bit more technical in our thinking leads us to the problem we noted earlier in the chapter: plain HTML only
give us access to the <code>GET</code> and <code>POST</code> actions of HTTP?  HTTP <em>stands</em> for HyperText Transfer Protocol, and yet the format
it was explicitly designed for, HTML, only supports two of the five developer-facing request types!  You <em>have</em> to use
JavaScript and issue an AJAX request to get at the other three: <code>DELETE</code>, <code>PUT</code> and <code>PATCH</code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s recall what are all of these different HTTP request types designed to represent?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>GET</code> corresponds with "getting" a representation for a resource from a URL: it is a pure read, with no mutation of
the resource</p>
</li>
<li>
<p><code>POST</code> submits an entity (or data) to the given resource, often creating or mutating the resource and causing a state change</p>
</li>
<li>
<p><code>PUT</code> submits an entity (or data) to the given resource for update or replacement, again likely causing a state change</p>
</li>
<li>
<p><code>PATCH</code> is similar to <code>PUT</code> but implies a partial update and state change rather than a complete replacement of the entity</p>
</li>
<li>
<p><code>DELETE</code> deletes the given resource</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operations correspond closely to the CRUD operations we discussed in Chapter 2, and by only giving us access to two
of them, HTML is presenting us with a severe and obvious technical limitation.</p>
</div>
<div class="paragraph">
<p>So here is our third opportunity to expand the expressiveness of HTML:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="title">Opportunity 3</div>
<div class="paragraph">
<p>HTML could be extended so that it could access these missing three HTTP actions, <code>PUT</code>, <code>PATCH</code> and <code>DELETE</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a final observation, consider that last aspect of a hyperlink: it replaces  the <em>entire</em> screen when a user clicks on it.  It
is this technical detail that makes for a poor user experience: it causes flashes of unstyled content, a loss of scroll
state and so forth.  But, again, there is no rule saying that hypermedia exchanges <em>must</em> replace the entire document.</p>
</div>
<div class="paragraph">
<p>This gives us our forth, final and perhaps most important opportunity to generalize HTML:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="title">Opportunity 4</div>
<div class="paragraph">
<p>HTML could be extended to allow the responses to requests to replace elements <em>within</em> the current document, rather than
requiring that they replace the <em>entire</em> document</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This is actually a very old concept in hypermedia.  Ted Nelson, in his 1980 book "Literary Machines" coined the term
<em>transclusion</em> to capture this idea: the inclusion of content into an existing document via a hypermedia reference.
If HTML supported this style of "dynamic transclusion", then Hypermedia Driven Applications could function much more like
a Single Page Application, where only part of the DOM is updated by a given user interaction or network request.</p>
</div>
<div class="paragraph">
<p>If we were to take these four opportunities to generalize HTML, we would be extending HTML far beyond its normal
capabilities, and we would be doing so <em>entirely within</em> the normal, hypermedia model of the web.  We wouldn&#8217;t be
changing the fundamentals of the HTML and the HTTP requests that we use to build our application.  Rather, these
four generalizations of existing functionality already found within HTML would simply let us accomplish <em>more</em>
using HTML.</p>
</div>
</div>
<div class="sect2">
<h3 id="_extending_html_as_a_hypermedia_with_htmx">4.2. Extending HTML as a Hypermedia with htmx</h3>
<div class="paragraph">
<p>It turns out that there are some JavaScript libraries that extends HTML in exactly this manner.  This may seem somewhat ironic,
given that JavaScript-based SPAs have supplanted HTML-based hypermedia applications, that JavaScript would be used in this
manner.  But JavaScript is simply a language for extending browser functionality on the client side, and there is no rule
saying it has to be used to write SPAs.  In fact, JavaScript is the perfect tool for addressing shortcomings of
HTML as a hypermedia: it has full access to the DOM and is nearly universally available!</p>
</div>
<div class="paragraph">
<p>One such library is htmx, which will be the focus of the next few chapters.  htmx is not the only JavaScript library that
takes this hypermedia-oriented approach, there are other excellent libraries like Unpoly (<a href="https://unpoly.com" class="bare">https://unpoly.com</a>) and Hotwire
(<a href="https://hotwire.dev" class="bare">https://hotwire.dev</a>).  But htmx is perhaps the purest of these libraries in the pursuit of extending HTML as a hypermedia.</p>
</div>
<div class="paragraph">
<p>It focuses on the four opportunities for improving HTML that we discussed above and attempts to incrementally address
each one, without introducing a significant amount of additional conceptual infrastructure for web developers beyond
what is necessary to address those opportunities.</p>
</div>
<div class="sect3">
<h4 id="_installing_and_using_htmx">4.2.1. Installing and Using htmx</h4>
<div class="paragraph">
<p>From a practical, getting started perspective, htmx is a simple, dependency-free and stand-alone library that can be
added to a web application by simply including it via a <code>script</code> tag in your <code>head</code> element</p>
</div>
<div class="paragraph">
<p>Because of this simple installation model, we can take advantage of tools like public CDNs to install the library.
Below we are using the popular unpkg Content Delivery Network (CDN) to install version <code>1.7.0</code> of the library.  We use
an integrity hash to ensure that the delivered content matches what we expect.  This SHA can be found on the htmx
website.  Finally, we mark the script as <code>crossorigin="anonymous"</code> so no credentials will be sent to the CDN.</p>
</div>
<div id="listing-3-2" class="listingblock">
<div class="title">Listing 1. 24. Installing htmx</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;head&gt;
  &lt;script src="https://unpkg.com/htmx.org@1.7.0"
          integrity="sha384-EzBXYPt0/T6gxNp0nuPtLkmRpmDBbjg6WmCUZRLXBBwYYmwAUxzlSGej0ARHX0Bo"
          crossorigin="anonymous"&gt;&lt;/script&gt;

&lt;/head&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Believe it or not, that&#8217;s all it takes to install htmx!  If you are used to the extensive build systems in today&#8217;s JavaScript
world, this may seem impossible or insane, but this is in the spirit of the early web: you could simply include a script tag
and things would just work.  And it still feels like magic, even today!</p>
</div>
<div class="paragraph">
<p>Of course, you may not want to use a CDN, in which case you can download htmx to your local system and adjust the
script tag to point to wherever you keep your static assets.  Or, you may have one of those more sophisticated build system
that automatically installs dependencies.  In this case you can use the Node Package Manager (npm) name for the library:
<code>htmx.org</code> and install it in the usual manner that your build system supports.</p>
</div>
<div class="paragraph">
<p>Once htmx has been installed, you can begin using it immediately.</p>
</div>
<div class="paragraph">
<p>And here we get to the funny part of htmx: unlike the vast majority of JavaScript libraries, htmx does not require you,
the user, to actually write any JavaScript!</p>
</div>
<div class="paragraph">
<p>Instead, you will use <em>attributes</em> placed directly on elements in your HTML to drive more dynamic behavior.  Remember:
htmx is extending HTML as a hypermedia, and we want that extension to be as natural and consistent as possible with existing
HTML concepts.  Just as an anchor tag uses an <code>href</code> attribute to specify the URL to retrieve, and forms use an <code>action</code>
attribute to specify the URL to submit the form to, htmx uses HTML <em>attributes</em> to specify the URL that an HTTP request
should be issued to.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_triggering_http_requests">4.3. Triggering HTTP Requests</h3>
<div class="paragraph">
<p>Let&#8217;s look at the first feature of htmx: the ability for any element in a web page to issue HTTP requests.  This is the
core functionality of htmx, and it consists of five attributes that can be used to issue the five different developer-facing
types of HTTP requests:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hx-get</code> - issues an HTTP <code>GET</code> request</p>
</li>
<li>
<p><code>hx-post</code> - issues an HTTP <code>POST</code> request</p>
</li>
<li>
<p><code>hx-put</code> - issues an HTTP <code>PUT</code> request</p>
</li>
<li>
<p><code>hx-patch</code> - issues an HTTP <code>PATCH</code> request</p>
</li>
<li>
<p><code>hx-delete</code> - issues an HTTP <code>DELETE</code> request</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these attributes, when placed on an element, tell the htmx library: "When a user clicks (or whatever) this
element, issue an HTTP request of the specified type"</p>
</div>
<div class="paragraph">
<p>The values of these attributes are similar to the values of both <code>href</code> on anchors and <code>action</code> on forms: you specify the
URL you wish to issue the given HTTP request type to.  Typically, this is done via a server-relative path.</p>
</div>
<div class="paragraph">
<p>So, for example, if we wanted a button to issue a <code>GET</code> request to <code>/contacts</code> then we would write:</p>
</div>
<div id="listing-3-2" class="listingblock">
<div class="title">Listing 1. 25. A Simple htmx-Powered Button</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts"&gt; <b class="conum">(1)</b>
  Get The Contacts
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A simple button that issues an HTTP <code>GET</code> to <code>/contacts</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>htmx will see the <code>hx-get</code> attribute on this button, and hook up some JavaScript logic to issue an HTTP
<code>GET</code> AJAX request to the <code>/contacts</code> path when the user clicks on it.  Very easy to understand and very consistent
with the rest of HTML.</p>
</div>
<div class="sect3">
<h4 id="_its_all_just_html">4.3.1. It&#8217;s All Just HTML!</h4>
<div class="paragraph">
<p>Now we get to perhaps the most important thing to understand about htmx: it expects the response to this AJAX request <em>to be
HTML</em>!  htmx is an extension of HTML and, just as the response to an anchor tag click or form submission is usually
expected to be HTML, htmx expects the server to respond with a hypermedia, namely with HTML.</p>
</div>
<div class="paragraph">
<p>This may come as a shock to web developers who are unused to responding to an AJAX request with anything other than JSON,
which is far and away the most common response format for such requests.  But AJAX requests are just HTTP requests and
there is no rule saying they must be JSON!  Recall again that AJAX stands for Asynchronous Javascript &amp; XML, so JSON
is already a step away from the format originally envisioned for this API: XML.  htmx simply goes another direction
and expects HTML.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">htmx vs. "plain" HTML responses</div>
<div class="paragraph">
<p>So, we have established that htmx expects HTML responses to the HTTP requests it makes.  But there is an important
difference between the HTTP responses to normal anchor and form driven requests and to htmx-powered requests like the one
made by this button: in the case of htmx triggered requests, responses are often only <em>partial</em> bits of HTML.</p>
</div>
<div class="paragraph">
<p>In htmx-powered interactions we are typically not replacing the entire document.  Rather we are using "transclusion" to
include content <em>within</em> an existing document.  Because of this, it is often not necessary or desirable to transfer an entire
HTML document from the server to the browser.  This fact can be used to save bandwidth as well as resource loading time,
since less overall content is transferred from the server to the client and since it isn&#8217;t necessary to reprocess a
<code>head</code> tag with style sheets,script tags, and so forth.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s consider what a simple <em>partial</em> HTML response to the "Get Contacts" button might be when it is clicked.</p>
</div>
<div class="paragraph">
<p>It might look something like this:</p>
</div>
<div id="listing-3-3" class="listingblock">
<div class="title">Listing 1. 26. A partial HTML Response to an htmx Request</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li&gt;&lt;a href="mailto:joe@example.com"&gt;Joe&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="mailto:sarah@example.com"&gt;Sarah&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="mailto:fred@example.com"&gt;Fred&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is just a simple unordered list of contacts with some clickable elements in it.  Note that there is no opening
<code>html</code> tag, no <code>head</code> tag, and so forth: it is a <em>raw</em> HTML list, without any decoration around it.  A response in a
real application might of course contain far more sophisticated HTML than a simple list, but it wouldn&#8217;t need to be an
entire page of HTML.</p>
</div>
<div class="paragraph">
<p>This response is perfect for htmx: it will take the returned content and swap it in to the DOM.  This is fast and efficient,
leveraging the existing HTML parser in the browser.  And this demonstrates that htmx is staying within the hypermedia
paradigm: just like in a "normal" web application, we see hypermedia being transferred to the client in a stateless and
uniform manner, where the client knows nothing about the internals of the resources being displayed.</p>
</div>
<div class="paragraph">
<p>This button just a more sophisticated component for building a Hypermedia Driven Application!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_targeting_other_elements">4.4. Targeting Other Elements</h3>
<div class="paragraph">
<p>Now, given that htmx has issued a request and gotten back some HTML as a response, what should be done with it?</p>
</div>
<div class="paragraph">
<p>It turns out that the default htmx behavior is to simply put the returned content inside the element that triggered the
request.  That&#8217;s obviously <em>not</em> a good thing in this situation: we will end up with a list of contacts awkwardly embedded within
a button element on the page!  That will look pretty silly and is obviously not what we want.</p>
</div>
<div class="paragraph">
<p>Fortunately htmx provides another attribute, <code>hx-target</code> which can be used to specify exactly where in the DOM the
new content should be placed.  The value of the <code>hx-target</code> attribute is a Cascading Style Sheet (CSS) <em>selector</em> that
allows you to specify the element to put the new hypermedia content into</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add a <code>div</code> tag that encloses the button with the id <code>main</code>.  We will then target this <code>div</code> with the response:</p>
</div>
<div id="listing-3-4" class="listingblock">
<div class="title">Listing 1. 27. A Simple htmx-Powered Button</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt; <b class="conum">(1)</b>

  &lt;button hx-get="/contacts" hx-target="#main"&gt; <b class="conum">(2)</b>
    Get The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A <code>div</code> element that wraps the button</p>
</li>
<li>
<p>The <code>hx-target</code> attribute that specifies the target of the response</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We have added <code>hx-target="#main"</code> to our button, where <code>#main</code> is a CSS selector that says "The thing with the ID 'main'".
Note that by using CSS selectors, htmx is once again building on top of familiar and standard HTML concepts.  By doing
so it keeps the additional conceptual load beyond normal HTML to a minimum.</p>
</div>
<div class="paragraph">
<p>Given this new configuration, what would the HTML on the client look like after a user clicks on this button and a
response has been received and processed?</p>
</div>
<div class="paragraph">
<p>It would look something like this:</p>
</div>
<div id="listing-3-5" class="listingblock">
<div class="title">Listing 1. 28. Our HTML After the htmx Request Finishes</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href="mailto:joe@example.com"&gt;Joe&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="mailto:sarah@example.com"&gt;Sarah&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="mailto:fred@example.com"&gt;Fred&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response HTML has been swapped into the <code>div</code>, replacing the button that triggered the request.  Transclusion!  And
this has happened "in the background" via AJAX, without a large page refresh.  Nonetheless, this is <em>definitely</em> a hypermedia
interaction.  It isn&#8217;t as coarse-grained as a normal, full web page request coming from an anchor might be, but it certainly
falls within the same conceptual model!</p>
</div>
</div>
<div class="sect2">
<h3 id="_swap_styles">4.5. Swap Styles</h3>
<div class="paragraph">
<p>Now, maybe we don&#8217;t want to simply load the content from the server response <em>into</em> the div, as child elements.  Perhaps,
for whatever reasons, we wish to <em>replace</em> the entire div with the response.  Seems like a reasonable behavior to
make configurable.</p>
</div>
<div class="paragraph">
<p>As luck would have it, htmx provides another attribute, <code>hx-swap</code>, that allows you to specify exactly <em>how</em> the content
should be swapped into  the DOM.  (Are you beginning to sense a pattern here?)</p>
</div>
<div class="paragraph">
<p>The <code>hx-swap</code> attribute supports the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>innerHTML</code> - The default, replace the inner html of the target element</p>
</li>
<li>
<p><code>outerHTML</code> - Replace the entire target element with the response</p>
</li>
<li>
<p><code>beforebegin</code> - Insert the response before the target element</p>
</li>
<li>
<p><code>afterbegin</code> - Insert the response before the first child of the target element</p>
</li>
<li>
<p><code>beforeend</code> - Insert the response after the last child of the target element</p>
</li>
<li>
<p><code>afterend</code> - Insert the response after the target element</p>
</li>
<li>
<p><code>delete</code> - Deletes the target element regardless of the response</p>
</li>
<li>
<p><code>none</code> - No swap will be performed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first two values, <code>innerHTML</code> and <code>outerHTML</code>, are taken from the standard DOM properties that allow you to replace content
within an element or in place of an entire element respectively.</p>
</div>
<div class="paragraph">
<p>The next four values are taken from the <code>Element.insertAdjacentHTML()</code> DOM API, which allow you to place an element or
elements around a given element in various ways.</p>
</div>
<div class="paragraph">
<p>The last two values, <code>delete</code> and <code>none</code> are specific to htmx, but should be fairly obvious for you understand.</p>
</div>
<div class="paragraph">
<p>Again, you can see that htmx tries to stay as close as possible to the existing web standards to keep your conceptual
load to a minimum.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider if, rather than replacing the <code>innerHTML</code> content of the main div above, we wished to replace the <em>entire
div</em> with the HTML response.  To do so would require only a small change to our button:</p>
</div>
<div id="listing-3-6" class="listingblock">
<div class="title">Listing 1. 29. Replacing the Entire div</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;button hx-get="/contacts" hx-target="#main" hx-swap="outerHTML"&gt; <b class="conum">(1)</b>
    Get The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>hx-swap</code> attribute specifies how to swap new content in</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, when a response is received, the <em>entire</em> div will be replaced with the hypermedia content:</p>
</div>
<div id="listing-3-7" class="listingblock">
<div class="title">Listing 1. 30. Our HTML After the htmx Request Finishes</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;ul&gt;
  &lt;li&gt;&lt;a href="mailto:joe@example.com"&gt;Joe&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="mailto:sarah@example.com"&gt;Sarah&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="mailto:fred@example.com"&gt;Fred&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see that, with this change, the target div has been entirely removed from the DOM, and the list that was returned
as the response has replaced it.</p>
</div>
<div class="paragraph">
<p>Later in the book we will see additional uses for <code>hx-swap</code>, for example when we implement infinite scrolling in our
contact management application.</p>
</div>
<div class="paragraph">
<p>Note that with the <code>hx-get</code>, <code>hx-post</code>, <code>hx-put</code>, <code>hx-patch</code> and <code>hx-delete</code> attributes, we have addressed two of the
opportunities for improvement that we enumerated regarding plain HTML:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opportunity 1: We can now issue an HTTP request with <em>any</em> element (in this case we are using a button)</p>
</li>
<li>
<p>Opportunity 3: We can issue <em>any sort</em> of HTTP request we want, <code>PUT</code>, <code>PATCH</code> and <code>DELETE</code>, in particular</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And, with <code>hx-target</code> and <code>hx-swap</code> we have addressed a third opportunity:
the requirement that the entire page be replaced.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opportunity 4: We can now replace any element we want in our page via transclusion, and we can do so in any manner want</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, with seven relatively simple additional attributes, we have addressed most of the hypermedia shortcomings we identified
earlier with HTML.  Not bad!</p>
</div>
<div class="paragraph">
<p>There was one remaining shortcoming of HTML that we noted: the fact that only a <code>click</code> event (on an anchor) or a <code>submit</code> event
(on a form) can trigger HTTP request.  Let&#8217;s look at how we can address that concern next.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_other_events">4.6. Using Other Events</h3>
<div class="paragraph">
<p>Thus far we have been using a button to issue a request with htmx.  You have probably intuitively understood that the
request will be issued when the button is clicked on since, well, that&#8217;s what you do with buttons!  You click on them!</p>
</div>
<div class="paragraph">
<p>And, yes, by default when an <code>hx-get</code> or another request-driving annotation from htmx is placed on a button, the request
will beissued when the button is clicked.</p>
</div>
<div class="paragraph">
<p>However, htmx generalizes this notion of an event triggering a request by using, you guessed it, another attribute:
<code>hx-trigger</code>.  The <code>hx-trigger</code> attribute allows you to specify one or more events that will cause the element to
trigger an HTTP request, overriding the default triggering event.</p>
</div>
<div class="paragraph">
<p>What is the "default triggering event" in htmx?  It depends on the element type, but should be fairly intuitive to anyone
familiar with HTML:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Requests on <code>input</code>, <code>textarea</code> &amp; <code>select</code> elements are triggered by the <code>change</code> event</p>
</li>
<li>
<p>Requests on <code>form</code> elements are triggered on the <code>submit</code> event</p>
</li>
<li>
<p>Requests on all other elements are triggered by the <code>click</code> event</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, lets consider if we wanted to trigger the request on our button when the mouse entered it.  This is certainly
not a recommended UX pattern, but let&#8217;s just look at it as an example!</p>
</div>
<div class="paragraph">
<p>To do this, we would add the following attribute to our button:</p>
</div>
<div id="listing-3-8" class="listingblock">
<div class="title">Listing 1. 31. A Terrible Idea, But It Demonstrates The Concept!</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;button hx-get="/contacts" hx-target="#main" hx-swap="outerHTML" hx-trigger="mouseenter"&gt; <b class="conum">(1)</b>
    Get The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Issue a request&#8230;&#8203; on the <code>mouseenter</code> event?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, whenever the mouse enters this button, a request will be triggered.  Hey, we didn&#8217;t say this was a <em>good</em> idea!</p>
</div>
<div class="paragraph">
<p>Let&#8217;s try something a bit more realistic: let&#8217;s add support for a keyboard shortcut for loading the contacts, <code>Ctrl-L</code>
(for "Load").  To do this we will need to take advantage of some additional syntax that the <code>hx-trigger</code> attribute
supports: event filters and additional arguments.</p>
</div>
<div class="paragraph">
<p>Event filters are a mechanism for determining if a given event should trigger a request or not.  They are applied to an
event by adding square brackets after it: <code>someEvent[someFilter]</code>.  The filter itself is a JavaScript expression that
will be evaluated when the given event occurs.  If the result is truthy, in the JavaScript sense, it will trigger the
request.  If not, it will not.</p>
</div>
<div class="paragraph">
<p>In the case of keyboard shortcuts, we want to catch the <code>keyup</code> event in addition to the keyup event:</p>
</div>
<div id="listing-3-9" class="listingblock">
<div class="title">Listing 1. 32. A Start</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;button hx-get="/contacts" hx-target="#main" hx-swap="outerHTML" hx-trigger="click, keyup"&gt; <b class="conum">(1)</b>
    Get The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A trigger with two events</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that we have a comma separated list of events that can trigger this element, allowing us to respond to more than
one potential triggering event.</p>
</div>
<div class="paragraph">
<p>There are two problems with this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It will trigger requests on <em>any</em> keyup event</p>
</li>
<li>
<p>It will trigger requests only when a keyup occurs <em>within</em> this button (an unlikely occurrence!)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To fix the first issue, lets use a trigger filter:</p>
</div>
<div id="listing-3-10" class="listingblock">
<div class="title">Listing 1. 33. Better!</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;button hx-get="/contacts" hx-target="#main" hx-swap="outerHTML" hx-trigger="click, keyup[ctrlKey &amp;&amp; key == 'l']"&gt; <b class="conum">(1)</b>
    Get The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>keyup</code> now has a filter, so the control key and L must be pressed</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The trigger filter in this case is <code>ctrlKey &amp;&amp; key == 'l'</code>.  This can be read as "A key up event, where the ctrlKey property
is true and the key property is equal to 'l'".  Note that the properties <code>ctrlKey</code> and <code>key</code> are resolved against the event
rather than the global name space, so you can easily filter on the properties of a given event.  You can use any expression
you like for a filter, however: calling a global JavaScript function, for example, is perfectly acceptable.</p>
</div>
<div class="paragraph">
<p>OK, so this filter limits the keyups that will trigger the request to only <code>Ctrl-L</code> presses.  However, we still have
the problem that, as it stands, only <code>keyup</code> events <em>within</em> the button will trigger the request.  If you are familiar
with the JavaScript event bubbling model: events typically "bubble" up to parent elements so an event like a keyup
will be triggered first on the focused element, then on it&#8217;s parent, and so on, until it reaches the top level <code>document</code>
that is the root of all other elements.</p>
</div>
<div class="paragraph">
<p>In this case, this is obviously not what we want!  People typically aren&#8217;t typing characters <em>within</em> the button, they
click on buttons!  Here we want to listen to the <code>keyup</code> events on the entire page, or, equivalently, on the <code>body</code>
element.</p>
</div>
<div class="paragraph">
<p>To fix this, we need to take advantage of another feature that the <code>hx-trigger</code> attribute supports:
the ability to listen to <em>other elements</em> for events using the <code>from:</code> modifier.  The `from:`modifier, as with many other
attributes and modifiers in htmx, uses a CSS selector to select the element to listen on.</p>
</div>
<div class="paragraph">
<p>We can use it like this:</p>
</div>
<div id="listing-3-11" class="listingblock">
<div class="title">Listing 1. 34. Better!</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;button hx-get="/contacts" hx-target="#main" hx-swap="outerHTML" hx-trigger="click, keyup[ctrlKey &amp;&amp; key == 'L'] from:body"&gt;<b class="conum">(1)</b>
    Get The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Listen to the event on the <code>body</code> tag</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, in addition to clicks, our button is listening for <code>keyup</code> events on the body of the page, and should issue a
request both when it is clicked on, and also whenever someone hits <code>Ctrl-L</code> within the body of the page!</p>
</div>
<div class="paragraph">
<p>A nice little keyboard shortcut!  Perfect!</p>
</div>
<div class="paragraph">
<p>The <code>hx-trigger</code> attribute is more elaborate than the other htmx attributes we have looked at so far, but that is because
events, in general, are used more elaborately in modern user interfaces.  The default options often suffice, however, and you
shouldn&#8217;t need to reach for complicated trigger features too often when using htmx.</p>
</div>
<div class="paragraph">
<p>That being said, even in the more elaborate situations like the example above, where we have a keyboard shortcut, the
overall feel of htmx is <em>declarative</em> rather than <em>imperative</em> and follows along closely with the standard feel and
philosophy of HTML.</p>
</div>
<div class="paragraph">
<p>And hey, check it out!  With this final attribute, <code>hx-trigger</code>, we have addressed the final opportunity for improvement
of HTMl that we enumerated at the start of this chapter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opportunity 2: We can use <em>any</em> event to trigger an HTTP request</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That&#8217;s a grand total of eight, count 'em, <em>eight</em> attributes that all fall squarely within the same conceptual model as
normal HTML and that, by extending HTML as a hypermedia, open up whole new world of user interaction possibilities
within HTML!</p>
</div>
<div class="paragraph">
<p>Here is a table summarizing the opportunities to improve HTML and which htmx attributes address them:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. 1. Opportunities For Improving HTML</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Opportunity To Improve HTML</th>
<th class="tableblock halign-left valign-top">htmx attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any element should be able to make HTTP requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-get</code>, <code>hx-post</code>, <code>hx-put</code>, <code>hx-patch</code>, <code>hx-delete</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any event should be able to trigger an HTTP request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-trigger</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any HTTP Action should be available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-put</code>, <code>hx-patch</code>, <code>hx-delete</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any place on the page should be replaceable (transclusion)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-target</code>, <code>hx-swap</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_passing_request_parameters">4.7. Passing Request Parameters</h3>
<div class="paragraph">
<p>So far we have been just looking at situation where a button makes a simple <code>GET</code> request.  This is conceptually very
close to what an anchor tag might do.  But there is the other primary element in traditional hypermedia-based applications:
forms.  Forms are used to pass additional information beyond just a URL up to the server in a request.  This information
is typically entered into elements within the form via the various types of input tags in HTML.</p>
</div>
<div class="paragraph">
<p>htmx allows you include this additional information in a natural way that mirrors how HTML itself works.</p>
</div>
<div class="sect3">
<h4 id="_enclosing_forms">4.7.1. Enclosing Forms</h4>
<div class="paragraph">
<p>The simplest way to pass additional input values up with a request in htmx is to enclose the input within a form tag.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take our original button for retrieving contacts and repurpose it for searching contacts:</p>
</div>
<div id="listing-3-12" class="listingblock">
<div class="title">Listing 1. 35. A Simple htmx-Powered Button</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;form&gt; <b class="conum">(1)</b>
      &lt;label for="search"&gt;Search Contacts:&lt;/label&gt;
      &lt;input id="search" name="q" type="search" placeholder="Search Contacts"&gt; <b class="conum">(2)</b>
      &lt;button hx-post="/contacts" hx-target="#main"&gt; <b class="conum">(3)</b>
        Search The Contacts
      &lt;/button&gt;
  &lt;/form&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>With an enclosing form tag, all inputs values will be submitted</p>
</li>
<li>
<p>A new input that users will be able to enter search text into</p>
</li>
<li>
<p>Our button has been converted to an <code>hx-post</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here we have added a form tag surrounding the button along with a search input that can be used to enter a term to
search the contacts with.</p>
</div>
<div class="paragraph">
<p>Now, when a user clicks on the button, the value of the input with the id <code>search</code> will be included in the request.  This
is by virtue of the fact that there is a form tag enclosing both the button and the input: when an htmx-driven request
is triggered, htmx will look up the DOM hierarchy for an enclosing form, and, if one is found, it will include all
values from within that form.  (This is sometimes referred to as "serializing" the form.)</p>
</div>
<div class="paragraph">
<p>You might have noticed that the button was switched from a <code>GET</code> request to a <code>POST</code> request.  This is because, by default,
htmx does <em>not</em> include the closest enclosing form for <code>GET</code> requests.  This is to avoid serializing forms in situations
where the data is not needed and to keep URLs clean when dealing with history entries, which we discuss in the next
section.</p>
</div>
</div>
<div class="sect3">
<h4 id="_including_inputs">4.7.2. Including inputs</h4>
<div class="paragraph">
<p>While enclosing all the inputs you want included in a request is the most common approach for including values from inputs
in htmx requests, it isn&#8217;t always possible or desirable: form tags can have layout consequences and simply cannot be
placed in some spots in HTML documents.  A good example of the latter situation is in table row (<code>tr</code>) elements: the
<code>form</code> tag is not a valid child or parent of table rows, so you can&#8217;t place a form within or around an entire
row of data in a table.</p>
</div>
<div class="paragraph">
<p>To address this issue, htmx provides another mechanism for including value in requests: the <code>hx-include</code> attribute.  The
<code>hx-include</code> attribute allows you to select input values that you wish to include in a request via CSS selectors.</p>
</div>
<div class="paragraph">
<p>Here is the above example reworked to include the input, dropping the form:</p>
</div>
<div id="listing-3-13" class="listingblock">
<div class="title">Listing 1. 36. A Simple htmx-Powered Button</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="main"&gt;

  &lt;label for="search"&gt;Search Contacts:&lt;/label&gt;
  &lt;input id="search" name="q" type="search" placeholder="Search Contacts"&gt;
  &lt;button hx-post="/contacts" hx-target="#main" hx-include="#search"&gt; <b class="conum">(1)</b>
    Search The Contacts
  &lt;/button&gt;

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>hx-include</code> can be used to include values directly in a request</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>hx-include</code> attribute takes a CSS selector value and allows you to specify exactly which values to send along
with the request.  This can be useful if it is difficult to colocate an element issuing a request with all the inputs
that need to be submitted with it.  It is also useful when you do, in fact, want to submit values with a <code>GET</code> request
and overcome the default behavior of htmx with respect to <code>GET</code> requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_inline_values">4.7.3. Inline Values</h4>
<div class="paragraph">
<p>A final way to include values in htmx-driven requests is to use the <code>hx-vals</code> attribute, which allows you to include
"static" values in the request.  This can be useful if you have additional information that you want to include in
requests, but you don&#8217;t want to have this information embedded in, for example, hidden inputs (which would be the
standard mechanism for including additional, hidden information in HTML.)</p>
</div>
<div class="paragraph">
<p>Here is an example of <code>hx-vals</code>:</p>
</div>
<div id="listing-3-13" class="listingblock">
<div class="title">Listing 1. 37. A Simple htmx-Powered Button</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts" hx-vals='{"state":"MT"}'&gt; <b class="conum">(1)</b>
  Get The Contacts In Montana
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>hx-vals</code>, a JSON value to include in the request</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The parameter <code>state</code> the value <code>MT</code> will be included in the <code>GET</code> request, resulting in a path and parameters that
looks like this:  <code>/contacts?state=MT</code>.  One thing to note is that we switched the <code>hx-vals</code> attribute to use single quotes
around its value.  This is because JSON strictly requires double quotes and, therefore, to avoid escaping we needed to
use the single-quote form for the attribute value.</p>
</div>
<div class="paragraph">
<p>This approach is useful when you have fixed data that you want to include in a request and you don&#8217;t want to rely on
something like a hidden input.  You can also prefix <code>hx-vals</code> with a <code>js:</code> and pass values evaluated at the time of the
request, which can be useful for including things like a dynamically maintained variable, or value from a third party
javascript library.</p>
</div>
<div class="paragraph">
<p>For example, if the <code>state</code> variable were maintained dynamically, via some JavaScript, and there existed a JavaScript
function, <code>getCurrentState()</code>, that returned the currently selected state, it could be included dynamically in htmx
requests like so:</p>
</div>
<div id="listing-3-13" class="listingblock">
<div class="title">Listing 1. 38. A Dynamic Value</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts" hx-vals='js:{"state":getCurrentState()}'&gt; <b class="conum">(1)</b>
  Get The Contacts In The Selected State
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>With the <code>js:</code> prefix, this expression will evaluate at submit time</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These three mechanisms, using <code>form</code> tags, using the <code>hx-include</code> attribute and using the <code>hx-vals</code> attribute, allow you
to include values in your hypermedia requests with htmx in a manner that should feel very familiar and in keeping with
the spirit of HTML, while also giving you the flexibility to achieve what you want.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_history_support">4.8. History Support</h3>
<div class="paragraph">
<p>A final piece of functionality to discuss to close out our overview of htmx is browser history.  When you use normal
HTML links and forms, your browser will keep track of all the pages that you have visited.  You can use the back button
to navigate back to a previous page and, once you have done this, you can use a forward button to go forward to the
original page you were on.</p>
</div>
<div class="paragraph">
<p>This notion of history was one of the killer features of the early web.  Unfortunately it turns out that history becomes
tricky when you move to the Single Page Application paradigm.  An AJAX request does not, by itself, register a web
page in your browsers history and this is a good thing!  An AJAX request may have nothing to do with the state of the
web page (perhaps it is just recording some activity in the browser), so it wouldn&#8217;t be appropriate to create a new
history entry for the interaction.</p>
</div>
<div class="paragraph">
<p>However, there are likely to be a lot of AJAX driven interactions in a Single Page Application where it <em>is</em> appropriate
to create a history entry.  And JavaScript does provide an API for working with the history cache.  Unfortunately the
API is very difficult to work with and is often simply ignored by developers.  If you have ever used a Single Page
Application and accidentally clicked the back button, only to lose your entire application state and have to start over,
you have seen this problem in action.</p>
</div>
<div class="paragraph">
<p>In htmx, as in Single Page Application frameworks, you often need to explicitly work with the history API.  Fortunately, htmx
makes it much easier to do so than most other libraries.</p>
</div>
<div class="paragraph">
<p>Consider the button we have been discussing again:</p>
</div>
<div id="listing-3-14" class="listingblock">
<div class="title">Listing 1. 39. Our trusty button</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts" hx-target="#main"&gt;
  Get The Contacts
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As it stands, if you click this button it will retrieve the content from <code>/contacts</code> and load it into the element with the
id <code>main</code>, but it will <em>not</em> create a new history entry.  If we wanted it to create a history entry we would add another
attribute to the button, <code>hx-push-url</code>:</p>
</div>
<div id="listing-3-14" class="listingblock">
<div class="title">Listing 1. 40. Our trusty button, now with history!</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts" hx-target="#main" hx-push-url="true"&gt; <b class="conum">(1)</b>
  Get The Contacts
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>hx-push-url</code> will create an entry in history when the button is clicked</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, when the button is clicked, the <code>/contacts</code> path will be put into the browser&#8217;s navigation bar and a history entry
will be created for it.  Furthermore, if the user clicks the back button, the original content for the page will be
restored, along with th original URL.</p>
</div>
<div class="paragraph">
<p><code>hx-push-url</code> might sound a little obscure, but this is based on the JavaScript API, <code>history.pushState()</code>.  This notion
of "pushing" derives from the fact that history entries are modeled as a stack, and so you are "pushing" new entries
onto the top of the stack of history entries.</p>
</div>
<div class="paragraph">
<p>With this (relatively) simple mechanism, htmx allows you to integrate with the back button in a way that mimics the
"normal" behavior of HTML.  Not bad if you look at what other javascript librarires require of you!</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Drawbacks To The htmx Approach</div>
<div class="paragraph">
<p>htmx is a very pure extension to HTML, aiming to incrementally improve the language as a hypermedia in a manner that is
conceptually coherent with the underlying markup language.  This approach, like any technical choice, is not without
tradeoffs: by staying so close to HTML, htmx does not give developers a lot of infrastructure that many might feel
should be there "by default".</p>
</div>
<div class="paragraph">
<p>A good example is the concept of modal dialogs. Many web applications today make heavy use of modal dialogs, effectively
in-page pop-ups that sit "on top" of the existing page.  (Of course, in reality, this is an optical illusion and it is
all just a web page: the web has no notion of"modals" in this regard.)</p>
</div>
<div class="paragraph">
<p>A web developer might expect htmx to provide some sort of modal dialog component out of the box, since it is, after all,
a front-end library, and many front end libraries offer support for this pattern.</p>
</div>
<div class="paragraph">
<p>htmx, however, has no notion of modals.  That&#8217;s not to say you can&#8217;t use modals with htmx, and we will look at how you
can do so later.  But htmx, like HTML itself, won&#8217;t give you an API specifically for creating modals.  You
would need to use a 3rd party library or roll your own modal implementation and then integrate htmx into it if you want
to use modals within an htmx-based application.</p>
</div>
<div class="paragraph">
<p>This is the design tradeoff that htmx makes: it retains conceptual purity as an extension of HTML, and, in exchange,
lacks some of the "batteries included" features found in other front end libraries.</p>
</div>
<div class="paragraph">
<p>As an aside, it&#8217;s worth nothing that htmx <em>can</em> be used to effectively implement a slightly different UX pattern, inline
editing, which is often a good alternative to modals, and, in our opinion, is more consistent with the stateless nature
of the web.  We will look at this approach later in the book, and you can see an example of it here: <a href="https://htmx.org/examples/click-to-edit/" class="bare">https://htmx.org/examples/click-to-edit/</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_3">4.9. Summary</h3>
<div class="ulist">
<ul>
<li>
<p>Although it has been wildly successful, HTML presents a few opportunities for improvement as a hypermedia</p>
</li>
<li>
<p>For example, plain HTML doesn&#8217;t give you access to non-<code>GET</code> or <code>POST</code> HTTP requests</p>
</li>
<li>
<p>Additionally, it only offers a very limited set of hypermedia controls: links and forms</p>
</li>
<li>
<p>Perhaps most importantly, plain HTML updates the entire page on every HTTP request</p>
</li>
<li>
<p>htmx addresses each of these opportunities, increasing the expressiveness of HTML as a hypermedia</p>
</li>
<li>
<p>The <code>hx-get</code>, <code>hx-post</code>, etc. attributes can be used to issue requests with any element in the dom</p>
</li>
<li>
<p>The <code>hx-swap</code> attribute can be used to control exactly how HTML responses to htmx requests should be swapped
into the DOM</p>
</li>
<li>
<p>The <code>hx-trigger</code> attribute can be used to control the event that triggers a request</p>
</li>
<li>
<p>Event filters can be used in <code>hx-trigger</code> to narrow down the exact situation that you want to issue a request for</p>
</li>
<li>
<p>htmx offers three mechanisms for including additional input information with requests:</p>
<div class="ulist">
<ul>
<li>
<p>Enclosing elements within a <code>form</code> tag</p>
</li>
<li>
<p>Using the <code>hx-include</code> attribute to select inputs to include in the request</p>
</li>
<li>
<p><code>hx-vals</code> for embedding values directly via JSON or, dynamically, resolving values via JavaScript</p>
</li>
</ul>
</div>
</li>
<li>
<p>htmx also provides integration with the browser history and back button, using the <code>hx-push-url</code> attribute
= Building Hypermedia Systems
:chapter: 4
:sectnums:
:figure-caption: Figure 1.
:listing-caption: Listing 1.
:table-caption: Table 1.
:sectnumoffset: 3
:leveloffset: 1
:sourcedir: ../code/src
:source-language:</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_building_a_simple_web_1_0_application.html">Building A Simple Web 1.0 Application</a> | ↑ Up: <a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a> | ⌂ Home: <a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a> | Next: <a href="_htmx_in_action.html">htmx In Action</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-20 12:44:43 -0600
</div>
</div>
</body>
</html>