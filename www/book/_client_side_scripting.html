<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Adam Stepinski, Carson Gross, Deniz Akşimşek">
<title>Building Hypermedia Systems</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_client_side_scripting" class="book">
<div id="header">
<h1>Building Hypermedia Systems</h1>
<div class="details">
<span id="author" class="author">Adam Stepinski, Carson Gross, Deniz Akşimşek</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a></span></p><ul class="sectlevel0">
<li><a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a>
<ul class="sectlevel1">
<li><a href="_reintroducing_hypermedia.html">1. Reintroducing Hypermedia</a>
</li>
<li><a href="_rest_hateoas_and_all_that.html">2. REST, HATEOAS and All That</a>
</li>
<li><a href="_building_a_simple_web_1_0_application.html">3. Building A Simple Web 1.0 Application</a>
</li>
<li><a href="_extending_html_as_hypermedia.html">4. Extending HTML As Hypermedia</a>
</li>
<li><a href="_htmx_in_action.html">5. htmx In Action</a>
</li>
<li><a href="_building_hypermedia_systems_2.html">6. Building Hypermedia Systems</a>
</li>
<li><a href="_more_htmx_patterns.html">7. More htmx Patterns</a>
</li>
<li><a href="_building_hypermedia_systems_3.html">8. Building Hypermedia Systems</a>
</li>
<li><a href="_a_dynamic_archive_ui_with_htmx.html">9. A Dynamic Archive UI With htmx</a>
</li>
<li><a href="_building_hypermedia_systems_4.html">10. Building Hypermedia Systems</a>
</li>
<li><a href="_deep_htmx.html">11. Deep htmx</a>
</li>
<li><a href="_hyperview_a_mobile_hypermedia.html">12. Hyperview: A Mobile Hypermedia</a>
</li>
<li><a href="_building_a_contacts_app_with_hyperview.html">13. Building a Contacts App With Hyperview</a>
</li>
<li><a href="_extending_the_hyperview_client.html">14. Extending the Hyperview Client</a>
</li>
<li><a href="_client_side_scripting.html"><span class="toc-current">15. Client Side Scripting</span></a>
<ul class="sectlevel2">
<li><a href="_client_side_scripting.html#_scripting_in_hypermedia_driven_applications">Scripting in Hypermedia-Driven Applications</a>
</li>
<li><a href="_client_side_scripting.html#_scripting_tools_for_the_web">15.1. Scripting tools for the Web</a>
</li>
<li><a href="_client_side_scripting.html#_vanilla_javascript">15.2. Vanilla JavaScript</a>
</li>
<li><a href="_client_side_scripting.html#_a_simple_counter">15.3. A Simple Counter</a>
<ul class="sectlevel3">
<li><a href="_client_side_scripting.html#_an_inline_implementation">15.3.1. An Inline Implementation</a>
</li>
<li><a href="_client_side_scripting.html#_separating_our_scripting_out">15.3.2. Separating Our Scripting Out</a>
</li>
<li><a href="_client_side_scripting.html#_locality">15.3.3. Locality</a>
</li>
<li><a href="_client_side_scripting.html#_what_to_do_with_our_counter">15.3.4. What To Do With Our Counter?</a>
</li>
<li><a href="_client_side_scripting.html#_vanilla_js_in_action_an_overflow_menu">15.3.5. Vanilla JS in action: an overflow menu</a>
</li>
</ul>
</li>
<li><a href="_client_side_scripting.html#_alpine_js">15.4. Alpine.js</a>
<ul class="sectlevel3">
<li><a href="_client_side_scripting.html#_x_onclick_vs_onclick">15.4.1. <code>x-on:click</code> vs. <code>onclick</code></a>
</li>
<li><a href="_client_side_scripting.html#_reactivity_and_templating">15.4.2. Reactivity and Templating</a>
</li>
<li><a href="_client_side_scripting.html#_alpine_js_in_action_a_bulk_action_toolbar">15.4.3. Alpine.js in Action: A Bulk Action Toolbar</a>
</li>
</ul>
</li>
<li><a href="_client_side_scripting.html#_hyperscript">15.5. _hyperscript</a>
<ul class="sectlevel3">
<li><a href="_client_side_scripting.html#_hyperscript_in_action_a_keyboard_shortcut">15.5.1. _hyperscript in action: a keyboard shortcut</a>
</li>
<li><a href="_client_side_scripting.html#_why_a_new_programming_language">15.5.2. Why a new programming language?</a>
</li>
</ul>
</li>
<li><a href="_client_side_scripting.html#_using_off_the_shelf_components">15.6. Using Off-the-shelf Components</a>
<ul class="sectlevel3">
<li><a href="_client_side_scripting.html#_integration_options">15.6.1. Integration Options</a>
</li>
</ul>
</li>
<li><a href="_client_side_scripting.html#_pragmatic_scripting">15.7. Pragmatic Scripting</a>
</li>
<li><a href="_client_side_scripting.html#_summary_10">15.8. Summary</a>
</li>
</ul>
</li>
<li><a href="_building_hypermedia_systems_5.html">16. Building Hypermedia Systems</a>
</li>
<li><a href="_json_data_apis_hypermedia_driven_applications.html">17. JSON Data APIs &amp; Hypermedia Driven Applications</a>
</li>
<li><a href="_other_hypermedia_libraries_technologies.html">18. Other Hypermedia Libraries &amp; Technologies</a>
</li>
<li><a href="_conclusion_3.html">19. Conclusion</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_client_side_scripting">15. Client Side Scripting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter covers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How scripting can be effectively added to a Hypermedia Driven Application</p>
</li>
<li>
<p>Adding a three-dot menu in our contacts table</p>
</li>
<li>
<p>Adding a toolbar for bulk actions that appears when selecting contacts</p>
</li>
<li>
<p>Adding a keyboard shortcut for focusing the search input</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_scripting_in_hypermedia_driven_applications">Scripting in Hypermedia-Driven Applications</h3>
<div class="quoteblock">
<blockquote>
REST allows client functionality to be extended by downloading and executing code in the form of applets or scripts.
This simplifies clients by reducing the number of features required to be pre-implemented.
</blockquote>
<div class="attribution">
&#8212; Roy Fielding<br>
<cite>Architectural Styles and the Design of Network-based Software Architectures</cite>
</div>
</div>
<div class="paragraph">
<p>Thus far we have avoided writing any JavaScript in Contact.app, mainly because the functionality we implemented so far has not required it.
We have shown that, contrary to what some people content, hypermedia is not simply for "documents", but is also an excellent
technology for building "applications", with many affordances for building compelling interactive experiences.
A goal of this book is to show that it is possible to build sophisticated web applications using the original technology of the web,
hypermedia, without the application developer needing to reach for the abstractions provided by JavaScript frameworks.</p>
</div>
<div class="paragraph">
<p>On the other hand, htmx <em>itself</em> is written in JavaScript, and we don&#8217;t want the message of this book to be interpreted
as "JavaScript bad", or, more generally, "Client-side scripting bad."</p>
</div>
<div class="paragraph">
<p>The question isn&#8217;t "Should we be scripting for the web?" but, rather, "How should we be using scripting for the web?"</p>
</div>
<div class="paragraph">
<p>Scripting has been a massive force multiplier of the power of the web.
Using scripting, web application developers are not only able to enhance their hypertext-based websites, but are able to create
fully-fledged client-side applications that can often compete with native, thick client applications.  However, with this
power, the browser has often become a distribution mechanism for what are effectively cross-platform thick clients, with
the original, REST-ful web architecture being discarded in favor of a more JavaScript-centric and data-oriented approach.</p>
</div>
<div class="paragraph">
<p>Note, again, we do not claim this is a bad thing!  It is a testament to the power of the web and, in particular, of
modern browsers, that developers are able to build such sophisticated JavaScript-centric applications.</p>
</div>
<div class="paragraph">
<p>However, we want to show that, in addition to this more JavaScript-centric style, scripting <em>can also</em> be done in a manner
compatible and consistent with Hypermedia-Driven Applications.</p>
</div>
<div class="paragraph">
<p>We feel that you are scripting in an HDA-compatible manner if the following two constraints are adhered to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, the main data format exchanged between server and client must be hypermedia, the same as it would be with no scripting.</p>
</li>
<li>
<p>Second, client-side state, outside the DOM itself, is kept to a minimum.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Satisfying these constraints requires us to adopt different practices and patterns than what is typically recommended for
JavaScript, since the most common advice often comes, naturally, from JavaScript-centric applications.</p>
</div>
<div class="paragraph">
<p>Simply listing "best practices" is rarely convincing or edifying (and, lets be frank, it is boring).
Instead, we will demonstrate them by implementing client-side features in Contact.app:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We will add an overflow menu to hold the <em>Edit</em>, <em>View</em> and <em>Delete</em> actions, to clean up visual clutter in our list of contacts</p>
</li>
<li>
<p>We will add an improved interface for bulk deletion</p>
</li>
<li>
<p>We will add a keyboard shortcut for focusing the search box</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The important concept in the implementation of each of these features is that, while they are implemented entirely
client-side using scripting, they don&#8217;t exchange information with the server using, for example, JSON, and they don&#8217;t
store a significant amount of state outside the DOM itself.</p>
</div>
<div class="paragraph">
<p>By satisfying these two constraints with our scripting, we will keep these features within the bounds of the Hypermedia
Driven Application approach.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scripting_tools_for_the_web">15.1. Scripting tools for the Web</h3>
<div class="paragraph">
<p>The primary scripting language for the web is, of course, JavaScript, which is ubiquitous in web development today.
A bit of interesting internet lore, however, is that JavaScript was not always the only built-in option.
As the quote from Roy Fielding at the start of this chapter indicates, "applets" written in other languages such as Java
were considered part of the scripting infrastructure of the web.
In addition, there was a brief period when Internet Explorer supported VBScript, a scripting language based on Visual Basic.</p>
</div>
<div class="paragraph">
<p>Today, we have a variety of <em>transcompilers</em> (often shortened to <em>transpilers</em>) that convert many languages to JavaScript,
such as TypeScript, Dart, Kotlin, ClojureScript, F#.
There is also the WebAssembly (WASM) bytecode format, which is supported as a compilation target for C, Rust, and the
WASM-first language AssemblyScript.</p>
</div>
<div class="paragraph">
<p>However, most of these options are not geared towards an HDA-compatible style of scripting.  Compile-to-JS languages are
often paired with SPA-oriented libraries (Dart and AngularDart, ClojureScript and Reagent, F# and Elmish), and WASM is
currently mainly geared toward linking to existing C/C++ libraries from JavaScript.</p>
</div>
<div class="paragraph">
<p>Because of this, we are going to focus on three client-side scripting technologies that <em>are</em> geared, or at least
highly-compatible with, the Hypermedia Driven Application approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Vanilla JS, that is, using JavaScript without depending on any framework.</p>
</li>
<li>
<p>Alpine.js, a JavaScript library for adding behavior directly in HTML.</p>
</li>
<li>
<p>_hyperscript, a non-JavaScript scripting language created alongside htmx.
Like AlpineJS, it is usually embedded in HTML.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s take a quick look at each of these scripting options, so we know what we are dealing with.</p>
</div>
<div class="paragraph">
<p>Note that, as with CSS, we are not going to take a deep dive into any of these technologies.  Insteat, we are going to
show just enough to give you a flavor of how they work and, we hope, spark your interest in looking into each of them
more extensively.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vanilla_javascript">15.2. Vanilla JavaScript</h3>
<div class="quoteblock">
<blockquote>
No code is faster than no code.
</blockquote>
<div class="attribution">
&#8212; Merb
</div>
</div>
<div class="paragraph">
<p>Vanilla JavaScript is simply using JavaScript in your application without any intermediate layers.
The term "Vanilla" came into vogue as a play on the fact that there are so many ".js" frameworks out there to help you write JavaScript.
As JavaScript matured as a scripting language, standardized across browsers and provided more and more functionality, the utility
of many of these frameworks and libraries has diminished.</p>
</div>
<div class="paragraph">
<p>(Ironically, at  the same time, SPAs have become more popular, which require even more elaborate JavaScript frameworks!)</p>
</div>
<div class="paragraph">
<p>A quote from the website <a href="http://vanilla-js.com" class="bare">http://vanilla-js.com</a> captures the situation well:</p>
</div>
<div class="quoteblock">
<blockquote>
VanillaJS is the lowest-overhead, most comprehensive framework I&#8217;ve ever used.
</blockquote>
<div class="attribution">
&#8212; http://vanilla-js.com
</div>
</div>
<div class="paragraph">
<p>The message of <em>VanillaJS</em> here is: "The browser already has JavaScript baked into it, there isn&#8217;t any need to download
a framework for your application to function!"</p>
</div>
<div class="paragraph">
<p>With JavaScript having  matured as a scripting language, this is certainly the case for many applications.  It is especially
true the case in HDAs, since, by using hypermedia, your application doesn&#8217;t need many features typically provided by
JavaScript frameworks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Client-side routing</p>
</li>
<li>
<p>An abstraction over DOM manipulation, i.e.: templates that automatically update when referenced variables change</p>
</li>
<li>
<p>Server side rendering (rendering here refers to HTML generation)</p>
</li>
<li>
<p>Attaching dynamic behavior to server-rendered tags on load</p>
</li>
<li>
<p>Network requests</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Without all this complexity being handled in JavaScript, your framework needs are dramatically reduced.</p>
</div>
<div class="paragraph">
<p>One of the best things about VanillaJS is how you install it: you don&#8217;t have to! You can just start writing JavaScript
in your web application, and it will simply work.  Amazing!</p>
</div>
<div class="paragraph">
<p>That&#8217;s the good news. The bad news is that, despite improvements over the last decade, JavaScript has some significant
limitations as a scripting language that can make it a less than ideal as a stand-alone scripting technology for
Hypermedia Driven Applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is a relatively complex language that has accreted a lot of features and warts.</p>
</li>
<li>
<p>JavaScript has a complicated and confusing set of features for working with asynchronous code, that is, code that
requires waiting for an asynchronous operation (such as an AJAX request) to complete</p>
</li>
<li>
<p>Working with events in JavaScript is surprisingly difficult</p>
</li>
<li>
<p>DOM APIs (a large portion of which were originally designed for Java) are verbose and frequently do not make common
functionality easy to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>None of these limitations are deal-breakers, of course, and many people prefer the "close to the browser"
nature of vanilla JavaScript over more elaborate client-side scripting approaches.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_simple_counter">15.3. A Simple Counter</h3>
<div class="paragraph">
<p>To dive into vanilla JavaScript as a front end scripting option, let&#8217;s create a simple counter widget.  Counter widgets
are a common "Hello World" example demonstrated by JavaScript frameworks, so looking at how it can be done in vanilla
JavaScript will be instructive.</p>
</div>
<div class="paragraph">
<p>Our counter widget will be very simple: it will have a number, shown as text, and a button that increments the number.</p>
</div>
<div class="paragraph">
<p>Now, one problem with tackling this problem in vanilla JavaScript is that it lacks one thing most JavaScript frameworks
provide: a default code and architectural style.  With vanilla JavaScript, there are no rules!</p>
</div>
<div class="paragraph">
<p>This lack of structure, however, isn&#8217;t all bad: it presents a great opportunity to take a small journey through
various styles that people have developed for writing their JavaScript.</p>
</div>
<div class="sect3">
<h4 id="_an_inline_implementation">15.3.1. An Inline Implementation</h4>
<div class="paragraph">
<p>To begin, let&#8217;s start with the simplest thing imaginable: all of our JavaScript will be written inline, directly in the
HTML.  When the button is clicked, we will look up the <code>output</code> element holding the number, and increment the number
contained within it.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 205. Counter in vanilla JavaScript, inline version</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;section class="counter"&gt;
  &lt;output id="my-output"&gt;0&lt;/output&gt; <b class="conum">(1)</b>
  &lt;button
    onclick=" <b class="conum">(2)</b>
      document.querySelector('#my-output') <b class="conum">(3)</b>
        .textContent++ <b class="conum">(4)</b>
    "
  &gt;Increment&lt;/button&gt;
&lt;/section&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Our output element has an ID to help us find it</p>
</li>
<li>
<p>We use the <code>onclick</code> attribute to add an event listener</p>
</li>
<li>
<p>Find the output via a querySelector() call</p>
</li>
<li>
<p>JavaScript allows us use the <code>++</code> operator on strings</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Not too bad!</p>
</div>
<div class="paragraph">
<p>The code is a little gronky, if you aren&#8217;t used to the DOM APIs.  It&#8217;s a little annoying that we needed to add an <code>id</code> to
the <code>output</code> element to make things work.  Tje <code>document.querySelector()</code> function is a bit verbose compared with, say,
the <code>$</code> function (a common function used in jQuery, an older, popular JavaScript librar.)</p>
</div>
<div class="paragraph">
<p>But (but!) it works, it&#8217;s easy enough to understand, and, crucially, it doesn&#8217;t require any other JavaScript libraries.</p>
</div>
<div class="paragraph">
<p>So that&#8217;s the simple, inline approach.</p>
</div>
</div>
<div class="sect3">
<h4 id="_separating_our_scripting_out">15.3.2. Separating Our Scripting Out</h4>
<div class="paragraph">
<p>While the inline implementation is simple, a more standard way to write this code would be to move the code into a separate
JavaScript file.  This JavaScript file would then either be linked to via a <code>&lt;script src&gt;</code> tag or placed into an inline
<code>&lt;script&gt;</code> element by a build process.</p>
</div>
<div class="paragraph">
<p>Here we see the HTML and JavaScript <em>separated out</em> from one another, in different files.  The HTML is now "cleaner"
in that there is no JavaScript in it.  The JavaScript is a bit more complex than in our inline version: we need to look
up the button using a query selector and add an <em>event listener</em> to handle the click event and increment the counter.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 206. Counter HTML</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;section class="counter"&gt;
  &lt;output id="my-output"&gt;0&lt;/output&gt;
  &lt;button class="increment-btn"&gt;Increment&lt;/button&gt;
&lt;/section&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 12. 207. Counter JavaScript</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">const counterOutput = document.querySelector("#my-output") <b class="conum">(1)</b>
const incrementBtn  = document.querySelector(".counter .increment-btn") <b class="conum">(2)</b>

incrementBtn.addEventListener("click", e =&gt; { <b class="conum">(3)</b>
  counterOutput.innerHTML++ <b class="conum">(4)</b>
})</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Find the output element</p>
</li>
<li>
<p>and the button</p>
</li>
<li>
<p>We use <code>addEventListener</code>, which is preferable to <code>onclick</code> for many reasons</p>
</li>
<li>
<p>The logic stays the same, only the structure around it changes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In moving the JavaScript out to another file, we are following a software design principle known as <em>Separation of Concerns (SoC).</em>
Separation of Concerns posits that the various "concerns" (or aspects) of a software project should be divided up into
multiple files, so that they don&#8217;t "pollute" one another. JavaScript isn&#8217;t markup, so it shouldn&#8217;t be in your HTML,
it should be <em>elsewhere</em>.  Styling information, similarly, isn&#8217;t markup, and so it belongs in a separate file as well
(A CSS file, for example.)  For quite some time, this Separation of Concerns was considered the "orthodox" way to build
web applications.</p>
</div>
<div class="paragraph">
<p>A stated goal of Separation of Concerns is that we should be able to modify and evolve each concern independently, with
confidence that we won&#8217;t break any of the other concerns.</p>
</div>
<div class="paragraph">
<p>However, let&#8217;s look at exactly how this principle has worked out in our simple counter example.  If you look closely
at the new HTML, it turns out that we&#8217;ve had to add a class to the button.  We addedc this class so that we could look the button
up in JavaScript and add in an event handler for the "click" event. Now, in both the HTML and the JavaScript, this class
name is just a string and there isn&#8217;t any process to <em>verify</em> that the button has the right classes on it or its parents
to ensure that the event handler is actually added to the right element.</p>
</div>
<div class="paragraph">
<p>Unfortunately, it has turned out that the careless use of CSS selectors in JavaScript can cause what is known as
<em>jQuery soup</em>.  jQuery soup is a situation where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The JavaScript that attaches a given behavior to a given element is difficult to find.</p>
</li>
<li>
<p>Code reuse is difficult.</p>
</li>
<li>
<p>The code ends up wildly disorganized and "flat", with lots of unrelated event handlers mixed together.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The name "jQuery Soup" comes from the fact that early JavaScript-heavy applications were typically built in jQuery,
which, perhaps inadvertently, tended to encourage this style of JavaScript.</p>
</div>
<div class="paragraph">
<p>So, you can see that the notion of "Separation of Concerns" doesn&#8217;t always work out as well as promised: our concerns
end up intertwined pretty deeply, even when we separate them into different files.</p>
</div>
<div class="paragraph">
<p>To show that it isn&#8217;t just naming between concerns that can get you into trouble, consider another small change to our HTML
that demonstrates the problems with our separation of concerns.  Imagine that we decide to change the number field from
an <code>&lt;output&gt;</code> tag to an <code>&lt;input type="number"&gt;</code>.</p>
</div>
<div class="paragraph">
<p>This small change to our HTML will break our JavaScript, despite the fact we have "separated" our concerns!</p>
</div>
<div class="paragraph">
<p>The fix for this issue is simple enough (we would need to change the <code>.textContent</code> property to <code>.value</code> property), but
this demonstrates the burden of synchronizing markup changes and code changes across multiple files.  Keeping everything
in sync can become increasingly difficult as your application size increases .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/separation-of-concerns-expectation-v-reality.png" alt="separation of concerns expectation v reality">
</div>
</div>
<div class="paragraph">
<p>The fact that small changes to our HTML can break our scripting indicates that the two are <em>tightly coupled</em>, despite being
broken up into multiple files.  This tight coupling suggests that separation between HTML and JavaScript (and CSS) is often
an illusory separation of concerns: the concerns are sufficiently related to one another that they aren&#8217;t easily separated.</p>
</div>
<div class="paragraph">
<p>In Contact.app we are not <em>concerned</em> with "structure", "styling" or "behavior"; we are concerned with collecting contact
info and presenting it to users. SoC, in the way it&#8217;s formulated in web development orthodoxy, is not really an inviolate
architectural guideline, but rather a stylistic choice that, as we can see, can even become a hindrance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_locality">15.3.3. Locality</h4>
<div class="paragraph">
<p>It turns out that there is a burgeoning reaction <em>agains</em> Separation of Concerns.  Consider the following web technologies
and techniques:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JSX</p>
</li>
<li>
<p>LitHTML</p>
</li>
<li>
<p>CSS-in-JS</p>
</li>
<li>
<p>Single-File Components</p>
</li>
<li>
<p>Filesystem based routing</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these technologies <em>colocate</em> code in various languages that address a single <em>feature</em> (typically a UI widget).</p>
</div>
<div class="paragraph">
<p>All of them mix <em>implementation</em> concerns together in order to present a unified abstraction to the end-user.  Separating
technical detail concerns just isn&#8217;t as much of an, ahem, concern.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Locality of Behavior</div>
<div class="paragraph">
<p>Locality of Behavior (LoB) is an alternative software design principle that we coined, in opposition to Separation of Concerns.
It describes the following characteristic of a piece of software:</p>
</div>
<div class="quoteblock">
<blockquote>
The behaviour of a unit of code should be as obvious as possible by looking only at that unit of code.
</blockquote>
<div class="attribution">
&#8212; <a href="https://htmx.org/essays/locality-of-behaviour/" class="bare">https://htmx.org/essays/locality-of-behaviour/</a>
</div>
</div>
<div class="paragraph">
<p>In simple terms: you should be able to tell what a button does by simply looking at the code or markup that creates that button.
This does not mean you need to inline the entire implementation, but that you shouldn&#8217;t need to hunt for it or require prior knowledge of the codebase to find it.</p>
</div>
<div class="paragraph">
<p>We will demonstrate Locality of Behavior in all of our examples, both the counter demos and the features we add to ContactApp.
Locality of behavior is an explicit design goal of both _hyperscript and Alpine.js (which we will cover later) as well as htmx.</p>
</div>
<div class="paragraph">
<p>All of these tools achieve Locality of Behavior by having you embed attributes directly within your HTML, as opposed to
having code look up elements in a document through CSS selectors in order to add event listeners onto them.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>In a Hypermedia Driven Application, we feel that Locality of Behavior is often more important than Separation of Concerns.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_to_do_with_our_counter">15.3.4. What To Do With Our Counter?</h4>
<div class="paragraph">
<p>So, should we go back to the <code>onclick</code> attribute way of doing things? That approach certainly wins in Locality of
Behavior, and has the additional benefit that it is baked into HTML.</p>
</div>
<div class="paragraph">
<p>Unfortunately, however, the <code>on*</code>  JavaScript attributes also come with some drawbacks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They don&#8217;t support custom events.</p>
</li>
<li>
<p>There is no good mechanism for associating long-lasting variables with an element --- all variables are discarded when an event listener completes executing.</p>
</li>
<li>
<p>If you have multiple instances of an element, you will need to repeat the listener code on each, or use something more clever like event delegation.</p>
</li>
<li>
<p>JavaScript code that directly manipulates the DOM gets verbose, and clutters the markup.</p>
</li>
<li>
<p>An element cannot listen for events on another element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consider this common situation: you have a popup, and you want it to be dismissed when a user clicks outside of it.  The
listener will need to be on the body element in this situation, far away from the actual popup markup. This means that
the body element would need to have listeners attached to it that deal with many unrelated components.  Some of these
components may not even be on the page when it was first rendered, if they are added dynamically after the initial
HTML page is rendered!</p>
</div>
<div class="paragraph">
<p>So vanilla javaScript and Locality of Behavior don&#8217;t seem to mesh <em>quite</em> as well as we would like them to.
The situation is not hopeless, however: it&#8217;s important to understand that LoB does not require behavior to be <em>implemented</em>
at a use site, but merely <em>invoked</em> there.  That is, we don&#8217;t need to write all our code on a given element, we just
need to make it clear that a given element is <em>invoking</em> some code, which can be located elsewhere.</p>
</div>
<div class="paragraph">
<p>Keeping this in mind, it <em>is</em> possible to improve LoB while writing JavaScript in a separate file, provided we have a
reasonable system for structuring our JavaScript.</p>
</div>
<div class="sect4">
<h5 id="_rsjs">RSJS</h5>
<div class="paragraph">
<p>RSJS (the "Reasonable System for JavaScript Structure", <a href="https://ricostacruz.com/rsjs/" class="bare">https://ricostacruz.com/rsjs/</a>) is a set of guidelines for
JavaScript architecture targeted at "a typical non-SPA website". RSJS provides a solution to the lack of a standard code
style for vanilla JavaScript that we mentioned earlier.</p>
</div>
<div class="paragraph">
<p>We won&#8217;t reproduce all the RSJS guidelines here, but here are the ones most relevant for our counter widget:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Use <code>data-</code> attributes" in HTML - invoking behavior via adding data attributes makes it obvious there is JavaScript
happening, as opposed to using random classes or IDs that may be mistakenly removed or changed</p>
</li>
<li>
<p>"One component per file" - the name of the file should match the data attribute so that it can be found easily, a win for LoB</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To follow the RSJS guidelines, let&#8217;s restructure our current HTML and JavaScript files.  First, we will use <em>data attributes</em>,
that is, HTML attributes that begin with <code>data-</code>, a standard feature of HTML, to indicate that our HTML is a counter
component.  We will then update our JavaScript to use an attribute selector that looks for the <code>data-counter</code> attribute
as the root element in our counter component and wires in the appropriate event handlers and logic.  Additionally, let&#8217;s
rework the code to use <code>querySelector()</code> and add the counter functionality to <em>all</em> counter components found on the
page.  (You never know how many counter&#8217;s you might want!)</p>
</div>
<div class="paragraph">
<p>Here is what our code looks like now:</p>
</div>
<div class="openblock">
<div class="title">Counter in vanilla JavaScript, with RSJS</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;section class="counter" data-counter&gt; <b class="conum">(1)</b>
  &lt;output id="my-output" data-counter-output&gt;0&lt;/output&gt; <b class="conum">(2)</b>
  &lt;button class="increment-btn" data-counter-increment&gt;Increment&lt;/button&gt;
&lt;/section&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Invoke a JavaScript behavior with a data attribute</p>
</li>
<li>
<p>Mark relevant descendant elements</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">// counter.js <b class="conum">(1)</b>
document.querySelectorAll("[data-counter]") <b class="conum">(2)</b>
  .forEach(el =&gt; {
    const
    output = el.querySelector("[data-counter-output]"),
    increment = el.querySelector("[data-counter-increment]"); <b class="conum">(3)</b>

    increment.addEventListener("click", e =&gt; output.textContent++); <b class="conum">(4)</b>
  });</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>File should have the same name as the data attribute, so that we can locate it easily</p>
</li>
<li>
<p>Get all elements that invoke this behavior</p>
</li>
<li>
<p>Get any child elements we need</p>
</li>
<li>
<p>Register event handlers</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>Using RSJS solves, or at least alleviates, many of the problems we pointed out with our first, unstructured example of vanilla JS being
split out to a separate file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The JS that attaches behavior to a given element is <strong>clear</strong> (though only through naming conventions).</p>
</li>
<li>
<p>Reuse is <strong>easy</strong> --- you can create another counter component on the page it will just work.</p>
</li>
<li>
<p>The code is <strong>well-organized</strong> --- one behavior per file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All in all, RSJS is a good way to structure your vanilla JavaScript in a Hypermedia Driven Application.  So long as the
JavaScript isn&#8217;t communicating with a server via a plain data JSON API, or holding a bunch of internal state outside of
the DOM, this is perfectly compatible with the HDA approach.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at implementing a feature in Contact.App using the RSJS/vanilla JavaScript approach.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vanilla_js_in_action_an_overflow_menu">15.3.5. Vanilla JS in action: an overflow menu</h4>
<div class="paragraph">
<p>Our homepage has "Edit", "View" and "Delete" links for every contact in our table.
This uses a lot of space and creates visual clutter.
We&#8217;re going to place these actions inside a menu with a button to open it.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s sketch the markup we want for our overflow menu.  First, we need an element, we&#8217;ll use a <code>&lt;div&gt;</code>, to enclose the
entire widget and mark it as a menu component.  Within this div, we will have a standard <code>&lt;button&gt;</code> that will function
as the mechanism that shows and hides our menu items.  Finally, we&#8217;ll have another <code>&lt;div&gt;</code> that holds the menu items
that we are going to show.  These menu items will be simple anchor tags, as they are in the current contacts table.</p>
</div>
<div class="paragraph">
<p>Here is what our updated, RSJS-structured HTML looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-overflow-menu&gt; <b class="conum">(1)</b>
    &lt;button type="button" aria-haspopup="menu"
        aria-controls="contact-menu-{{ contact.id }}"
        &gt;Options&lt;/button&gt; <b class="conum">(2)</b>
    &lt;div role="menu" hidden id="contact-menu-{{ contact.id }}"&gt; <b class="conum">(3)</b>
        &lt;a role="menuitem" href="/contacts/{{ contact.id }}/edit"&gt;Edit&lt;/a&gt; <b class="conum">(4)</b>
        &lt;a role="menuitem" href="/contacts/{{ contact.id }}"&gt;View&lt;/a&gt;
        &lt;!-- ... --&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Mark the root element of the menu component</p>
</li>
<li>
<p>This button will open and close our menu</p>
</li>
<li>
<p>A container for our menu items</p>
</li>
<li>
<p>Menu items</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The roles and ARIA attributes are based on the Menu and Menu Button patterns from the ARIA Authoring Practices Guide.
They&#8217;re currently wrong.
We&#8217;ll fix that with JavaScript and RSJS.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Intermission: WAI-ARIA</div>
<div class="paragraph">
<p>As we web developers create more interactive, app-like websites,
HTML&#8217;s repertoire of elements won&#8217;t have all we need.
Using CSS and JS, we can endow existing elements with the behavior and appearance of native controls.</p>
</div>
<div class="paragraph">
<p>However, there is one thing web apps used to be unable to replicate.
While these widgets were similar enough in appearance for abled users to operate,
assistive technology (e.g. screen readers) could only report the underlying HTML elements.
Even if you got all the keyboard interactions right, disabled users often only got mystery meat.</p>
</div>
<div class="paragraph">
<p>ARIA was created by W3C&#8217;s Web Accessibility Initiative (WAI) in 2008 to address this.
At a surface level, it&#8217;s a set of attributes you can add to HTML to make it meaningful to assistive software.
It has two main parts that interact.</p>
</div>
<div class="paragraph">
<p>The first is <code>role</code>. This attribute has a predefined set of values:
<code>menu</code>, <code>dialog</code>, <code>radiogroup</code>&#8230;&#8203;
These attributes <strong>do not add any behavior</strong>.
Rather, they are a promise you make to the user:
<em>I will make this element work like a menu.</em>
If you add the role but don&#8217;t uphold this promise, the experience will be worse than before.
Hence the mantra:</p>
</div>
<div class="quoteblock">
<blockquote>
No ARIA is better than Bad ARIA.
</blockquote>
<div class="attribution">
&#8212; WAI<br>
<cite>"Read Me First | APG", <a href="https://www.w3.org/WAI/ARIA/apg/practices/read-me-first/" class="bare">https://www.w3.org/WAI/ARIA/apg/practices/read-me-first/</a></cite>
</div>
</div>
<div class="paragraph">
<p>The second is a whole range of attributes all sharing a prefix:
<code>aria-expanded</code>, <code>aria-controls</code>, <code>aria-label</code>&#8230;&#8203;
These attributes can specify the state of a widget, the relationships between components, or additional semantics.
Once again, these are promises, not demands.</p>
</div>
<div class="paragraph">
<p>Rather than learn all the roles and attributes and try to combine them into a usable widget,
the best course of action for most developers is to rely on the ARIA Authoring Practices Guide (APG),
a web resource with practical information aimed directly at web developers.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re new to ARIA, check out the following links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Read this first: <a href="https://www.w3.org/WAI/ARIA/apg/practices/read-me-first/" class="bare">https://www.w3.org/WAI/ARIA/apg/practices/read-me-first/</a></p>
</li>
<li>
<p>UI patterns: <a href="https://www.w3.org/WAI/ARIA/apg/patterns/" class="bare">https://www.w3.org/WAI/ARIA/apg/patterns/</a></p>
</li>
<li>
<p>Good practices: <a href="https://www.w3.org/WAI/ARIA/apg/practices/" class="bare">https://www.w3.org/WAI/ARIA/apg/practices/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And remember: <strong>run accessibility tests</strong>. You wouldn&#8217;t ship a website you&#8217;d never looked at.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s begin with the RSJS boilerplate:
query for all elements with some data attribute,
iterate over them,
get any relevant descendants.
We&#8217;ve modified the RSJS boilerplate a bit to integrate with htmx.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">function overflowMenu(subtree = document) {
  document.querySelectorAll("[data-overflow-menu]").forEach(menuRoot =&gt; { <b class="conum">(1)</b>
    const
    button = menuRoot.querySelector("[aria-haspopup]"), <b class="conum">(2)</b>
    menu = menuRoot.querySelector("[role=menu]"), <b class="conum">(2)</b>
    items = [...menu.querySelectorAll("[role=menuitem]")]; <b class="conum">(3)</b>
  });
}

addEventListener("htmx:load", e =&gt; overflowMenu(e.target)); <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>With RSJS, you&#8217;ll be writing <code>document.querySelectorAll(&#8230;&#8203;).forEach</code> a lot.</p>
</li>
<li>
<p>To keep the HTML clean, we use ARIA attributes rather than custom data attributes here.
Our outer container still has a data attribute, so this shouldn&#8217;t be much of an issue.</p>
</li>
<li>
<p>We use the spread operator to convert the inconvenient <code>NodeList</code> returned by <code>querySelectorAll</code> into a normal <code>Array</code>.</p>
</li>
<li>
<p>Initialize all overflow menus when the page is loaded or content is inserted by htmx.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Conventionally, we&#8217;d keep track of whether the menu is open with a variable or a property in a state object.
This approach is almost always the right thing in large, client-heavy apps.
However, it has some drawbacks.
We&#8217;ll need to keep the DOM in sync with the state (harder without a framework),
and lose the ability to serialize the HTML (as the open state won&#8217;t be stored there).</p>
</div>
<div class="paragraph">
<p>Instead, we&#8217;ll lean on the <code>hidden</code> attribute on the menu to tell us it&#8217;s closed.
If the HTML of the page is snapshotted and restored, the menu can be restored as well by re-running the JS.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">  items = [...menu.querySelectorAll("[role=menuitem]")];

  const isOpen = () =&gt; !menu.hidden; <b class="conum">(1)</b>

});</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>hidden</code> attribute is helpfully reflected as a <code>hidden</code> <em>property</em>, so we don&#8217;t need to use <code>getAttribute</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We&#8217;ll make the menu items non-tabbable. to manage their focus ourselves.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">  const isOpen = () =&gt; !menu.hidden; <b class="conum">(1)</b>

  items.forEach(item =&gt; item.setAttribute("tabindex", "-1"));

});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s implement toggling the menu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">  items.forEach(item =&gt; item.setAttribute("tabindex", "-1"));

  function toggleMenu(open = !isOpen()) { <b class="conum">(1)</b>
    if (open) {
      menu.hidden = false;
      button.setAttribute("aria-expanded", "true");
      items[0].focus(); <b class="conum">(2)</b>
    } else {
      menu.hidden = true;
      button.setAttribute("aria-expanded", "false");
    }
  }

  toggleMenu(isOpen()); <b class="conum">(3)</b>
  button.addEventListener("click", () =&gt; toggleMenu()); <b class="conum">(4)</b>
  menuRoot.addEventListener("blur", e =&gt; console.log(e) || toggleMenu(false)); <b class="conum">(5)</b>

})</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Optional parameter to specify desired state.
This allows us to use one function to open, close, or toggle the menu.</p>
</li>
<li>
<p>Focus first item of menu when opened.</p>
</li>
<li>
<p>Call <code>toggleMenu</code> with current state, to initialize element attributes.</p>
</li>
<li>
<p>Toggle menu when button is clicked.</p>
</li>
<li>
<p>Close menu when focus moves away.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s also make the menu close when we click outside it.
This will require an event listener on the whole window.
Be careful with this kind of listener;
you may find that listeners accumulate as components add listeners and not remove them when they are long gone, that is to say, you will get memory leaks.</p>
</div>
<div class="paragraph">
<p>Unfortunately, there&#8217;s not an easy way to do stuff when an element is removed.
The best option is <code>MutationObserver</code>, a very useful but heavy API.</p>
</div>
<div class="paragraph">
<p>The pattern (well, <em>a</em> pattern) to avoid this is to check if the attaching component is in the DOM as part of the listener,
and remove the listener if so.
It&#8217;s form of <em>garbage collection</em>.
As is (usually) the case with garbage collection, it removes listeners a nondeterministic amount of time after they are no longer needed.
With a frequent event like "the user clicks anywhere in the page", it works well enough.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">  button.addEventListener("click", () =&gt; toggleMenu())

  window.addEventListener("click", function clickAway(event) {
    if (!menuRoot.isConnected) window.removeEventListener("click", clickAway);
    if (!menuRoot.contains(event.target)) toggleMenu(false);
  });
});</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This line is the garbage collection</p>
</li>
<li>
<p>If the click is outside the menu, close the menu</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, it&#8217;s time for keyboard interactions.
These are pretty similar to one another and not that intricate.
Let&#8217;s get them all done.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">  const currentIndex = () =&gt; { <b class="conum">(1)</b>
    const idx = items.indexOf(document.activeElement);
    if (idx === -1) return 0;
    return idx;
  }

  menu.addEventListener("keydown", e =&gt; {
    if (e.key === "ArrowUp") {
      items[currentIndex() - 1]?.focus(); <b class="conum">(2)</b>

    } else if (e.key === "ArrowDown") {
      items[currentIndex() + 1]?.focus(); <b class="conum">(3)</b>

    } else if (e.key === "Space") {
      items[currentIndex()].click(); <b class="conum">(4)</b>

    } else if (e.key === "Home") {
      items[0].focus(); <b class="conum">(5)</b>

    } else if (e.key === "End") {
      items[items.length - 1].focus(); <b class="conum">(6)</b>

    } else if (e.key === "Escape") {
      toggleMenu(false); <b class="conum">(7)</b>
      button.focus(); <b class="conum">(8)</b>
    }
  });</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Helper: Get the index in the items array of the currently focused menu item (0 if none).</p>
</li>
<li>
<p>Move focus to the previous menu item when the up arrow key is pressed</p>
</li>
<li>
<p>Move focus to the next menu item when the down arrow key is pressed</p>
</li>
<li>
<p>Activate the currently focused element when the space key is pressed</p>
</li>
<li>
<p>Move focus to the first menu item when Home is pressed</p>
</li>
<li>
<p>Move focus to the last menu item when End is pressed</p>
</li>
<li>
<p>Close menu when Escape is pressed</p>
</li>
<li>
<p>Return focus to menu button when closing menu</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>I&#8217;m pretty sure that covers all our bases.
That&#8217;s a lot of code!
But it&#8217;s code that encodes a lot of behavior.</p>
</div>
<div class="paragraph">
<p>Though, we still don&#8217;t support submenus, or menu items being added or removed dynamically.
If we need more features, it might make more sense to use an off-the-shelf library --- for instance, GitHub&#8217;s <a href="https://github.com/github/details-menu-element"><code>details-menu-element</code></a>.
For our relatively simple use case, however, this library does a beautiful job.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_alpine_js">15.4. Alpine.js</h3>
<div class="paragraph">
<p>OK, so that&#8217;s an in-depth look at how to structure plain "vanilla" JavaScript.  Now let&#8217;s turn our attention to a JavaScript
framework that enables a different approach for adding dynamic behavior to your application, Alpine.js (<a href="https://alpinejs.dev" class="bare">https://alpinejs.dev</a>).
Alpine is a relatively new JavaScript library which allows you to embed your code directly in HTML, akin to the <code>on*</code>
attributes available in plain HTML and JavaScript, but takes this concept much further. Alpine bills itself as a modern
replacement for jQuery, a widely used, older JavaScript library, and, as you will see, it lives up to that promise.</p>
</div>
<div class="paragraph">
<p>Installing Alpine is very easy: it is a single file and is dependency-free, so you can simply include it via a CDN:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 208. Installing Alpine</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;script src="https://unpkg.com/alpinejs"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also install it via a package manager such as NPM, or vendor it from your own server.</p>
</div>
<div class="paragraph">
<p>Alpine provides a set of HTML attributes, all of which begin with the <code>x-</code> prefix, the main one of which is <code>x-data</code>.
The content of <code>x-data</code> is a JavaScript expression which evaluates to an object.  The properties of this object can, then,
be access within the element that the <code>x-data</code> attribute is located on.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at our counter example, and how to implement it using Alpine.  For the counter, the only state we need to
keep track of is the current number, so let&#8217;s declare a JavaScript object with one property, <code>count</code>, in an <code>x-data</code>
attribute on the div for our counter:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 209. Counter with Alpine, line 1</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="counter" x-data="{ count: 0 }"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This defines our state, that is, the data we are going to be using to drive dynamic updates to the DOM.  With the state
declared like this, we can now use it <em>within</em> the div element it is declared on.  Let&#8217;s add an <code>output</code> element with
an <code>x-text</code> attribute.  We will <em>bind</em> the <code>x-text</code> attribute to the <code>count</code> attribute we declared in the <code>x-data</code> attribute
on the parent <code>div</code> element.  This will have the effect of setting the text of the <code>output</code> element to whatever the
value of <code>count</code> is: if <code>count</code> is updates, so will the text of the <code>output</code>.  This is "reactive" programming, in that
the DOM will "react" to changes to the backing data.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 210. Counter with Alpine, lines 1-2</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="counter" x-data="{ count: 0 }"&gt;
  &lt;output x-text="count"&gt;&lt;/output&gt; <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>x-text</code> attribute.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next, we need to update the count, using a button.  Alpine allows you to attach event listeners with the <code>x-on</code> attribute.
To specify the event to listen for, you add a colon and then the event name after the <code>x-on</code> attribute name.  Then, the
value of the attribute is the JavaScript you wish to execute.  This is similar to the plain <code>on*</code> attributes we discussed
earlier, but it turns out to be much more flexible.</p>
</div>
<div class="paragraph">
<p>We want to listen for a <code>click</code> event, and we want to increment <code>count</code> when a click occurs, so here is what our Alpine
code will look like:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 211. Counter with Alpine, the full thing</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="counter" x-data="{ count: 0 }"&gt;
  &lt;output x-text="count"&gt;&lt;/output&gt;

  &lt;button x-on:click="count++"&gt;Increment&lt;/button&gt; <b class="conum">(1)</b>
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>With <code>x-on</code>, we specify the attribute in the attribute <em>name</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And, would you look at that, we&#8217;re done already! A simple component, like a counter, should be simple, and Alpine sure
delivers on that!</p>
</div>
<div class="sect3">
<h4 id="_x_onclick_vs_onclick">15.4.1. <code>x-on:click</code> vs. <code>onclick</code></h4>
<div class="paragraph">
<p>As we said, the Alpine <code>x-on:click</code> attribute (or its shorthand, the <code>@click</code> attribute) is similar to the built-in
<code>onclick</code> attribute.   However, it has additional features that make it significantly more useful:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can listen for events from other elements. For example, the <code>.outside</code> modifier lets you listen to any click event
that is <strong>not</strong> within the element.</p>
</li>
<li>
<p>You can use other modifiers to:</p>
<div class="ulist">
<ul>
<li>
<p>throttle or debounce event listeners,</p>
</li>
<li>
<p>ignore events that are bubbled up from descendant elements, or</p>
</li>
<li>
<p>attach passive listeners.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You can listen to custom events.  For example, if you wanted to listen for the <code>htmx:after-request</code> event you could write
<code>x-on:htmx:after-request="doSomething()"</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reactivity_and_templating">15.4.2. Reactivity and Templating</h4>
<div class="paragraph">
<p>We hope that you&#8217;ll agree that the AlpineJS version of the counter widget is better, in general, than the VanillaJS
implementation, which was either somewhat hacky or spread out over multiple files.</p>
</div>
<div class="paragraph">
<p>A big part of the power of AlpineJS is that it supports a notion of "reactive" variables, allowing you to bind the count
of the <code>div</code> element to a variable that both the <code>output</code> and the <code>button</code> can reference, and properly updating all the
dependencies when a mutation occurs.  Alpine allows for much more elaborate data bindings than what we have demonstrated
here, and it is an excellent general purpose client-side scripting library.</p>
</div>
</div>
<div class="sect3">
<h4 id="_alpine_js_in_action_a_bulk_action_toolbar">15.4.3. Alpine.js in Action: A Bulk Action Toolbar</h4>
<div class="paragraph">
<p>Next, let&#8217;s implement a feature in Contact.app with Alpine. As it stands currently, Contact.app has a "Delete Selected
Contacts" button at the very bottom of the page. This button has a long name, is not easy to find and takes up a
lot of room.  If we wanted to add additional "bulk" actions, this wouldn&#8217;t really scale very well visually.</p>
</div>
<div class="paragraph">
<p>In this section, we&#8217;ll replace this single button with a toolbar.  Furthermore, the toolbar will only appear when the
user starts selecting contacts. Finally, it will show how many contacts are selected and let you select all contacts in
one go.</p>
</div>
<div class="paragraph">
<p>The first thing we will need to add is an <code>x-data</code> attribute, to hold the state that we will use to determine if the
toolbar is visible or not.  We will need to place this on a parent element of both the toolbar that we are going to
add, as well as of the checkboxes, which will be updating the state when they are checked and unchecked.  The best
option given our current HTML is to place the attribute on the <code>form</code> element that surrounds the contacts table.  We
will declare a property, <code>selected</code>, which will be an array that holds the selected contact ids, based on the checkboxes
that are selected.</p>
</div>
<div class="paragraph">
<p>Here is what our form tag will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;form x-data="{ selected: [] }"&gt; <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This is the form that was wrapped around the contacts table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next, at the top of the contacts table, we are going to add a <code>template</code> tag.  A template tag is <em>not</em> rendered by a
browser, by default, so you might be surprised that we are using it.  However, by adding an Alpine <code>x-if</code> attribute,
we can tell Alpine: if a condition is true, show the HTML within this template.</p>
</div>
<div class="paragraph">
<p>Recall that we want to show the toolbar if and only if one or more contacts are selected.  But we know that we will
have the ids of the selected contacts in the <code>selected</code> property.  Therefore, we can check the <em>length</em> of that array
to see if there are any selected contacts, quite easily:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;template x-if="selected.length &gt; 0"&gt; <b class="conum">(1)</b>
  &lt;div class="box info tool-bar"&gt;
    &lt;slot x-text="selected.length"&gt;&lt;/slot&gt;
    contacts selected

    &lt;button type="button" class="bad bg color border"&gt;Delete&lt;/button&gt; <b class="conum">(2)</b>
    &lt;hr aria-orientation="vertical"&gt;
    &lt;button type="button"&gt;Cancel&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Show this HTML if there are 1 or more selected contacts</p>
</li>
<li>
<p>We will implement these buttons in just a moment</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The next step is to ensure that toggling a checkbox for a given contact adds (or removes) a given contact&#8217;s id from the
<code>selected</code> property.  To do this, we will need to use a new Alpine attribute, <code>x-model</code>.  The <code>x-model</code> attribute allows
you to <em>bind</em> a given element to some underlying data, or it&#8217;s "model".</p>
</div>
<div class="paragraph">
<p>In this case, we want to bind the value of the checkbox inputs to the <code>selected</code> property.  This is how we do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;td&gt;
&lt;input type="checkbox" name="selected_contact_ids" value="{{ contact.id }}" x-model="selected"&gt; <b class="conum">(1)</b>
&lt;/td&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>x-model</code> attribute binds the <code>value</code> of this input to the <code>selected</code> property</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, when a checkbox is checked or unchecked, the <code>selected</code> array will be updated with the given rows contact id.
Furthermore, mutations we make to the <code>selected</code> array will similarly be reflected in the checkboxes' state.  This is
known as a <em>two-way</em> binding.</p>
</div>
<div class="paragraph">
<p>With this code written, we can make the toolbar appear and disappear, based on whether contact checkboxes are selected!
Awesome.</p>
</div>
<div class="sect4">
<h5 id="_implementing_actions">Implementing Actions</h5>
<div class="paragraph">
<p>Now that we have the mechanics of showing and hiding the toolbar, let&#8217;s look at how to implement the buttons within
the toolbar.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s first implement the "Clear" button, because it is quite easy.  All we need to do is, when the button is clicked,
clear out the <code>selected</code> array.  Because of the two-way binding that Alpine provides, this will uncheck all the selected
contacts (and then hide the toolbar)!</p>
</div>
<div class="paragraph">
<p>Here is the code:</p>
</div>
<div class="paragraph">
<p>For the <em>Cancel</em> button, our job is quite simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button type="button" @click="selected = []"&gt;Cancel&lt;/button&gt;<b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Just reset the <code>selected</code> array</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pretty easy!</p>
</div>
<div class="paragraph">
<p>The "Delete" button, however, will be a bit more complicated.  It will need to do two things: first it will confirm
if the user indeed intends to delete the contacts selected, and, if the user confirms the action, it will use the
htmx JavaScript API to issue a <code>DELETE</code> request.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button type="button" class="bad bg color border"
  @click="confirm(`Delete ${selected.length} contacts?`) &amp;&amp; <b class="conum">(1)</b>
    htmx.ajax('DELETE', '/contacts', { source: $root, target: document.body })" <b class="conum">(2)</b>
&gt;Delete&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Confirm the user wishes to delete the selected number of contacts</p>
</li>
<li>
<p>Issue a <code>DELETE</code> using the htmx JavaScript API</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that we are using the short-circuiting behavior of the <code>&amp;&amp;</code> operator in JavaScript to avoid the call to
<code>htmx.ajax()</code> if the <code>confirm()</code> call returns false.</p>
</div>
<div class="paragraph">
<p>The <code>htmx.ajax()</code> function is just a way to directly access the normal, HTML-driven hypermedia exchange that htmx&#8217;s
attributes give you from JavaScript.  We pass in that we want ot issue a <code>DELETE</code> to <code>/contacts</code>.  We then pass in
two additional pieces of information: <code>source</code> and <code>target</code>. The <code>source</code> properly is the element from which htmx will
collect data to include in the request. We set this to <code>$root</code>, which is a special symbol in Alpine that will be
the element that has the <code>x-data</code> attribute declared on it.  In this case, it will be  the form containing all of our
contacts. The <code>target</code>, or where the response HTML will be placed, is just the entire document&#8217;s body, since the
<code>DELETE</code> handler returns a whole page when it completes.</p>
</div>
<div class="paragraph">
<p>Note that we are using Alpine here in a Hypermedia Driven Application compatible manner.  We <em>could</em> have issued an
AJAX request directly from Alpine and perhaps updated an <code>x-data</code> property depending on the results of that request.
But, instead, we delegated to htmx&#8217;s JavaScript API, which made a <em>hypermedia exchange</em> with the server.  This is the
key to scripting in a Hypermedia Driven Application.</p>
</div>
<div class="paragraph">
<p>So, with all of this in place, we now have a much improved experience for performing bulk actions on contacts:  less
visual clutter and the toolbar can be extended with more options without creating bloat in the main interface of our app.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hyperscript">15.5. _hyperscript</h3>
<div class="paragraph">
<p>The next scripting technology we are going to look at is a bit further afield: _hyperscript (<a href="https://hyperscript.org" class="bare">https://hyperscript.org</a>)
While previous two examples are JavaScript-oriented, _hyperscript is an entire new scripting language for front-end development.
_hyperscript has a completely different syntax than JavaScript, and is based on an older language called HyperTalk.  HyperTalk
was the scripting language for a technology called HyperCard, an old hypermedia system available on early Macintosh Computers.</p>
</div>
<div class="paragraph">
<p>The most noticeable thing about \_hyperscript is that it resembles English prose more than it resembles other programming
languages. \_hyperscript was initially created as a sibling project to htmx, because it was felt that JavaScript wasn&#8217;t
event-oriented enough and made adding small script enhancements to htmx applications too cumbersom.  Like Alpine,
\_hyperscript, is positioned as a modern jQuery replacement and, further, as alternative to JavaScript.</p>
</div>
<div class="paragraph">
<p>Also like Alpine, _hyperscript allows you to write your scripting inline, in HTML.</p>
</div>
<div class="paragraph">
<p>Unline Alpine, _hyprescript is _not_ reactive.  It instead focuses on making DOM manipulations in response to events
easy and clear. It has built-in language constructs for many DOM operations, preventing you from needing to navigate
the sometimes-verbose JavaScript DOM APIs.</p>
</div>
<div class="paragraph">
<p>We will not be doing a deep dive on the language, but again just want to give you a flavor of what scripting in
_hyperscript is like, so you can pursue the language in more depth later if you find it interesting.</p>
</div>
<div class="paragraph">
<p>Like htmx and AlpineJS, _hyperscript can be installed via a CDN or from npm (package name <code>hyperscript.org</code>):</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 212. Installing _hyperscript via CDN</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;script src="//unpkg.com/hyperscript.org"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>_hyperscript uses the <code>_</code> (underscore) attribute for putting scripting on DOM elements.  You may also use the <code>script</code>
or <code>data-script</code> attributes, depending on your HTML validation needs.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at how to implement the simple counter component we have been looking at using \_hyperscript.  We will place
 an <code>output</code> element and a <code>button</code> inside of a <code>div</code>.  To implement the counter, we will need to add a small bit of
\_hyperscript to the button.  On a click, the button should increment the text of the previous <code>output</code> tag.</p>
</div>
<div class="paragraph">
<p>Well, it turns out that that last sentence is almost valid \_hyperscript!</p>
</div>
<div class="paragraph">
<p>Here is our code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="counter"&gt;
  &lt;output&gt;0&lt;/output&gt;
  &lt;button _="on click increment the textContent of the previous &lt;output/&gt;"&gt;Increment&lt;/button&gt; <b class="conum">(1)</b>
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This is what _hyperscript looks like, believe it or not!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s go through each component of the _hyperscript:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>on click</code> This is an event listener, telling the button to listen for a <code>click</code> event and then executing
the remaining code</p>
</li>
<li>
<p><code>increment</code> This is a "command"  in \_hypsercipt that, well, increments things, similar to the <code>++</code> operator in JavaScript</p>
</li>
<li>
<p><code>the</code> "the" doesn&#8217;t have any semantic meaning \_hyperscript, but can used to make scripts more readable</p>
</li>
<li>
<p><code>textContent of</code> -  This one form of <em>property access</em> in _hyperscript.  You are probably familiar with the JavaScript
syntax <code>a.b</code>, meaning "Get the property <code>b</code> on object <code>a</code>\".  \_hyperscript supports this syntax, but _also_ supports
the forms <code>b of a</code> and <code>a&#8217;s b</code>.  Which one you use should depend on which one is most readable.</p>
</li>
<li>
<p><code>the previous</code> The <code>previous</code> expression in hyperscript finds the previous element in the DOM that matches some condition</p>
</li>
<li>
<p><code>&lt;output /&gt;</code> This is a <em>query literal</em>, which is a CSS selector is wrapped between "&lt;" and "/&gt;"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this code, the <code>previous</code> keyword (and the accompanying <code>next</code>) is an example of how _hyperscript makes DOM operations
easier: there is no such native functionality to be found in the standard DOM API, and implementing it is actually trickier
than you might think!</p>
</div>
<div class="paragraph">
<p>So, you can see, \_hyperscript is very expressive, particularly when it comes to DOM manipulations.  This makes it
easier to embed scripts directly in HTML: since the scripting language is more powerful, scripts written in it tend
to be shorter and easier to read.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Natural Language Programming?</div>
<div class="paragraph">
<p>Seasoned programmers are often suspicious of _hyperscript: There have been many "natural language programming" (NLP)
projects that target non-programmers and beginner programmers, assuming that being able to read code in their
"natural language" will give them the ability to write it as well.  This has lead to some badly written and
structured code and has failed to live up to the (often over the top) hype.</p>
</div>
<div class="paragraph">
<p>_hyperscript is _not_ an NLP programming language.  Yes, its syntax is inspired in many places
by the speech patterns of web developers. But _hyperscript&#8217;s readability is achieved not through complex
heuristics or fuzzy NLP processing, but rather through judicious use of common parsing tricks, coupled with a culture
of readability.</p>
</div>
<div class="paragraph">
<p>As you can see in the above example, with the use of a <em>query reference</em>, <code>&lt;output/&gt;</code>,  _hyperscript does not shy away
from using DOM-specific, non-natural language when appropriate.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hyperscript_in_action_a_keyboard_shortcut">15.5.1. _hyperscript in action: a keyboard shortcut</h4>
<div class="paragraph">
<p>While the counter demo is a good way to compare various approaches to scripting, the rubber meets the road when
you try to actually implement a useful feature with an approach.  For \_hyperscript, let&#8217;s add a keyboard shortcut
to Contact.app: when a user hits Shift-S in our app, we will focus the search field.</p>
</div>
<div class="paragraph">
<p>Since our keyboard shortcut focuses the search input, let&#8217;s put the code for it on that search input, satisfying
locality.</p>
</div>
<div class="paragraph">
<p>Here is the original HTML for the search input:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;input id="search" name="q" type="search" placeholder="Search Contacts"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>We will add an event listener using the <code>on keydown</code> syntax, which will fire whenever a keydown occurs.  Further, we
can use an <em>event filter</em> syntax in _hyperscript using square brackets after the event.  In the square brackets we
can place a _filter expression_ that will filter out <code>keydown</code> events we aren&#8217;t interested in.  In our case, we only
want to consider events where the shift key is held down and where the "S" key is being pressed.  We can create a
boolean expression that inspects the <code>shiftKey</code> property (to see if it is <code>true</code>) and the <code>code</code> property (to see if
it is <code>"KeyS"</code>) of the event to achieve this.</p>
</div>
<div class="paragraph">
<p>So far our hyperscript looks like this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 213. A Start On Our Keyboard Shortcut</div>
<div class="content">
<pre class="highlight"><code class="language-applescript" data-lang="applescript">  on keydown[shiftKey and code is 'KeyS'] ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, by default, _hyperscript will listen for a given event _on the element it is declared on_.  So, in this case, with
the script we have so far, we would only get <code>keydown</code> events if the search box is already focused.  That&#8217;s not what
we want!  We want to have this key work <em>globally</em>, no matter which element has focus.</p>
</div>
<div class="paragraph">
<p>Not a problem!  We can listen for the <code>keyDown</code> event elsewhere by using a <code>from</code> clause in our event handler.  In this
case we want to listen for the <code>keyDown</code> from the window, and our code ends up looking, naturally, like this:</p>
</div>
<div class="paragraph">
<p>We need to attach the listener to the whole window instead.
No problem:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 214. Listening Globally</div>
<div class="content">
<pre class="highlight"><code class="language-applescript" data-lang="applescript">  on keydown[shiftKey and code is 'KeyS'] from window ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the <code>from</code> clause, we can attach the listener to the window while, at the same time, keeping the code on the
element it logically relates to.  Very nice!</p>
</div>
<div class="paragraph">
<p>Now that we&#8217;ve picked out the event we want to use to focus the search box, let&#8217;s implement the actual focusing by
calling the standard <code>.focus()</code> method.</p>
</div>
<div class="paragraph">
<p>Here is the entire script, embedded in HTML</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 215. Our Final Script</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;input id="search" name="q" type="search" placeholder="Search Contacts"
  _="on keydown[shiftKey and code is 'KeyS'] from the window
       me.focus()"&gt; <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>"me" refers to the element that the script is written on.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Given all the functionality, this is surprisingly terse, and, as an English-like programming language, pretty easy to
read.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_a_new_programming_language">15.5.2. Why a new programming language?</h4>
<div class="paragraph">
<p>This is all well and good, but you may be thinking "An entirely new scripting language?  That seems excessive."  And,
at some level, you are right: JavaScript is a decent scripting language, is very well optimized and is widely understood
in web development.  On the other hand, by creating an entirely new front end scripting language, we had the freedom
to address some problems that we saw generating ugly and verbose code in JavaScript:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Async transparency</dt>
<dd>
<p>In <em>hyperscript, asynchronous functions (i.e. functions that return <code>Promise</code> instances) can be
invoked _as if they were synchronous</em>. Changing a function from sync to async does not break any _hyperscript code that
calls it.  This is achieved by checking for a Promise when evaluating any expression, and suspending the running script
if one exists (only the current event handler is suspended and the main thread is not blocked). JavaScript, instead, requires
either the explicit use of callbacks _or_ the use of explicit <code>async</code> annotations (which can&#8217;t be mixed with synchronous
code).</p>
</dd>
<dt class="hdlist1">Array property access</dt>
<dd>
<p>In _hyperscript, accessing a property on an array (other than <code>length</code> or a number) will return
an array of the values of property on each member of that array, making array property access act like a flat-map operation.
jQuery has a similar feature, but only for its own data structure.</p>
</dd>
<dt class="hdlist1">Native CSS Syntax</dt>
<dd>
<p>In _hyperscript, you can use things like CSS class and ID literals, or CSS query literals, directly
in the language, rather than needing to call out to a wordy DOM API, as you do in JavaScript</p>
</dd>
<dt class="hdlist1">Deep Event Support</dt>
<dd>
<p>Working with events in \_hyperscript is far more pleasant than working with them in JavaScript, with
native support for responding to and sending events, as well as for common event-handling patterns such as "debouncing"
or rate limiting events.  Hyperscript also provides declarative mechanisms for synchronizing events within a given element
and across multiple elements.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Again we wish to stress that, in this example, we are not stepping outside the line of a Hypermedia Driven
Application: we are only adding front-end, client-side functionality with our scripting.  We are not creating and
managing a large amount of state outside of the DOM itself, or communicating with the server in a non-hypermedia
exchange.  Additionally, since _hyperscript embeds so well in HTML, it keeps the focus _on the hypermedia_, rather than
on the scripting logic.</p>
</div>
<div class="paragraph">
<p>Taken all together, given a certain style of scripting and certain scripting needs, \_hyperscript can provide an
excellent scripting experience for your Hypermedia Driven Application.  Of course, it is small and obscure programming
language, so we won&#8217;t blame you if you decide to pass on it, but it is at least worth a look to understand what it
is trying to achieve, if only out of intellectual interest.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_off_the_shelf_components">15.6. Using Off-the-shelf Components</h3>
<div class="paragraph">
<p>That concludes our look at three different options for <em>your</em> scripting infrastructure, that is, the code that <em>you</em> write
to enhance your Hypermedia Driven Application.  However, there is another major area to consider when discussing client
side scripting: "off the shelf" components.  That is, JavaScript libraries that other people have created that offer
some sort of functionality, such as showing modal dialogs.</p>
</div>
<div class="paragraph">
<p>Components have become very popular in the web development works, with libraries like DataTables (<a href="https://datatables.net/" class="bare">https://datatables.net/</a>)
providing rich user experiences with very little JavaScript code on the part of a user.  Unfortunately, if these libraries
aren&#8217;t integrated well into a website, they can begin to make an application feel "patched together".  Furthermore, some
libraries go beyond simple DOM manipulation, and require that you integrate with a server end point, almost invariably
with a JSON data API.  This means you are no longer building a Hypermedia Driven Application, simply because a particular
widget demands something different.  A shame!</p>
</div>
<div class="sect3">
<h4 id="_integration_options">15.6.1. Integration Options</h4>
<div class="paragraph">
<p>The best JavaScript libraries to work with when you are building a Hypermedia Driven Application are ones that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mutate the DOM but don&#8217;t communicate with a server over JSON</p>
</li>
<li>
<p>Respect HTML norms (e.g. using <code>input</code> elements to store values)</p>
</li>
<li>
<p>Trigger many custom events, as the library updates things</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last point, triggering many custom events (over the alternative of using lots of methods and callbacks) is especially
important, as these custom events can be dispatched or listened to without additional glue code written in a scripting.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at two different approaches to scripting, one using JavaScript call backs, and one using events.</p>
</div>
<div class="paragraph">
<p>To make things concrete, let&#8217;s  implement a better confirmation dialog for the <code>DELETE</code> button we created in Alpine in the
previous section.  In the original example we used the <code>confirm()</code> function built in to JavaScript, which shows a
pretty bare-bones system confirmation dialog.  We will replace this function with a popular JavaScript library,
SweetAlert2, that shows a much nicern nice looking confirmation dialog.  Unlink the <code>confirm()</code> function, which blocks
and returns a boolean (<code>true</code> if the user confirmed, <code>false</code> otherwise), SweetAlert2 returns a <code>Promise</code> object, which
is a JavaScript mechanism for hooking in a callback once an asynchronous action (such as waiting for a user to confirm
or deny an action) completes.</p>
</div>
<div class="sect4">
<h5 id="_integrating_using_callbacks">Integrating Using Callbacks</h5>
<div class="paragraph">
<p>With SweetAlert2 installed as a library, you have access to the <code>Swal</code> object, which has a <code>fire()</code> function on it to
trigger showing an alert.  You can pass in arguments to the <code>fire()</code> method to configure exactly what the buttons
on the confirmation dialog look like, what the title of the dialog is, and so forth.  We won&#8217;t get into these details
too much, but you will see what a dialog looks like in a bit.</p>
</div>
<div class="paragraph">
<p>So, given we have installed the SweetAlert2 library, we can swap it in place of the <code>confirm()</code> function call.  We then
need to restructure the code to pass a <em>callback</em> to the <code>then()</code> method on the <code>Promise</code> that <code>Swal.fire()</code> returns.  A
deep dive into Promises is beyond the scope of this chapter, but suffice to say that this callback will be called when
a user confirms or denys the action.  If the user confirmed the action, then the <code>result.isConfirmed</code> property will be
<code>true</code>.</p>
</div>
<div class="paragraph">
<p>Given all that, our updated code will look like this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 216. A Callback-based Confirmation Dialog</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button type="button" class="bad bg color border"
  @click="Swal.fire({  <b class="conum">(1)</b>
                  title: 'Delete these contacts?',  <b class="conum">(2)</b>
                  showCancelButton: true,
                  confirmButtonText: 'Delete'
                }).then((result) =&gt; { <b class="conum">(3)</b>
                  if (result.isConfirmed) {
                    htmx.ajax('DELETE', '/contacts', { source: $root, target: document.body })
                  }
               });"
&gt;Delete&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Invoke the <code>Swal.fire()</code> function</p>
</li>
<li>
<p>Configure how the dialog appears</p>
</li>
<li>
<p>Handle the result of the users selection</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And now, when this button is clicked, we get a nice looking dialog in our web application:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/screenshot_sweet_alert.png" alt="screenshot sweet alert">
</div>
</div>
<div class="paragraph">
<p>Much nicer than the system confirmation dialog!  Still, this feels a little wrong.  This is a lot of code to write
just to trigger a slightly nicer <code>confirm()</code>, isn&#8217;t it?  And the htmx JavaScript code we are using here feels a little
awkward.  It would be more natural to move the htmx out to attributes on the button, as we have been doing, and then
trigger the request via events.</p>
</div>
<div class="paragraph">
<p>So let&#8217;s take a different approach and see how that looks.</p>
</div>
</div>
<div class="sect4">
<h5 id="_integrating_using_events">Integrating Using Events</h5>
<div class="paragraph">
<p>To clean this code up, we will pull the <code>Swal.fire()</code> code out to a custom JavaScript function we will create called
<code>sweetConfirm()</code>.  <code>sweetConfirm()</code> will take the dialog options that are passed into the <code>fire()</code> method, as well as
the element that is confirming an action.  The big difference between the code we already have and <code>sweetConfirm()</code> is
that <code>sweetConfirm()</code>, rather than calling some htmx directly, will, instead, trigger a <code>confirmed</code> event on the
button when the user confirms they wish to delete.</p>
</div>
<div class="paragraph">
<p>Here is what our JavaScript function looks like:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 217. An Event-based Confirmation Dialog</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">function sweetConfirm(elt, config) {
      Swal.fire(config) <b class="conum">(1)</b>
          .then((result) =&gt; {
                  if (result.isConfirmed) {
                      elt.dispatchEvent(new Event('confirmed')); <b class="conum">(2)</b>
                  }
          });
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Pass the config through to the <code>fire()</code> function</p>
</li>
<li>
<p>If the user confirmed the action, trigger an <code>confirmed</code> event</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With this method available, we can now tighten up our delete button quite a bit.  We can remove all the SweetAlert2
code that we had in the <code>@click</code> Alpine attribute, and simply call this new <code>sweetConfirm()</code> method, passing in the
arguments <code>$el</code>, which is the Alpine syntax for getting "the current element" that the script is on, and then
the exact configuration we want for our dialog.</p>
</div>
<div class="paragraph">
<p>If the user confirms the action, a <code>confirmed</code> event will be triggered on the button.  This means that we can go back
to using our trusty htmx attributes!  Namely, we can move <code>DELETE</code> to an <code>hx-delete</code> attribute, and we can we can use
<code>hx-target</code> to target the body.  And then, and here is the crucial step, we can use the <code>confirmed</code> event that is
triggered in the <code>sweetConfirm()</code> function, to trigger the request, but adding an <code>hx-trigger</code> for it!</p>
</div>
<div class="paragraph">
<p>Here is</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 218. An Event-based Confirmation Dialog</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button type="button" class="bad bg color border"
        hx-delete="/contacts" hx-target="body" hx-trigger="confirmed" <b class="conum">(1)</b>
        @click="sweetConfirm($el, <b class="conum">(2)</b>
                { title: 'Delete these contacts?',  <b class="conum">(3)</b>
                  showCancelButton: true,
                  confirmButtonText: 'Delete'})"&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>htmx attributes are back</p>
</li>
<li>
<p>We pass the button in to the function, so an event can be triggered on it</p>
</li>
<li>
<p>We pass through the SweetAlert2 configuration information</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, as you can see, this event-based code is much cleaner and certainly more "HTML-ish".  The key to this cleaner
implementation is that our new <code>sweetConfirm()</code> function an event that htmx is able to listen for.  This is why a rich
event model is important to look for when choosing a library to work with, both with htmx and with Hypermedia Driven
Applications in general.</p>
</div>
<div class="paragraph">
<p>Unfortunately, due to the prevalence and dominance of the JavaScript-first mindset today, many libraries are like
SweetAlert2: they expect you to pass a callback in the first style.  In these cases you can use the technique we
have demonstrated here, wrapping the library in a function that triggers events in a callback, to make the library more
hypermedia and htmx-friendly.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pragmatic_scripting">15.7. Pragmatic Scripting</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In case of conflict, consider users over authors over implementors over specifiers over theoretical purity.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; W3C<br>
<cite>HTML Design Principles § 3.2 Priority of Constituencies</cite>
</div>
</div>
<div class="paragraph">
<p>We have shown you quite a few tools and techniques for scripting in a Hypermedia Driven Application.  How should you
pick between them?  The sad truth is that there will never be a single, always correct answer to this question.  Are
you committed to vanilla JavaScript-only, perhaps due to company policy?  Well, you can use vanilla JavaScript effectively
to script your Hypermedia Driven Application.  Do you have more leeway and like the look of Alpine.js?  That&#8217;s a great
way to add more structured, localized JavaScript to your application, and offers some nice reactive features as well.</p>
</div>
<div class="paragraph">
<p>Are you perhaps a bit more wild in your technical choices?  Maybe \_hypercript would be worth taking a look at.  (We
think so!)</p>
</div>
<div class="paragraph">
<p>Sometimes you might even consider picking two (or more!) of these approaches within an application.  Each has its own
strengths and weaknesses, and all of them are relatively small and self-contained, so picking the right tool for the job
at hand might be the best approach.</p>
</div>
<div class="paragraph">
<p>In general, we encourage a <em>pragmatic</em> approach to scripting: whatever feels right is probably right (or, at least,
right <em>enough</em>) for you.  Rather than being concerned about which particular approach is taken for your scripting,
we would focus with these more general concerns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Avoiding communicating with the server via JSON data APIs</p>
</li>
<li>
<p>Avoiding storing large amounts of state outside of the DOM</p>
</li>
<li>
<p>Favoring using events, rather than hard-coded callbacks or method calls</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But even on these topics, sometimes a web developer has to do what a web developer has to do.  If the perfect widget
for your application exists but, darn it, it uses a JSON data API, that&#8217;s OK.  Just don&#8217;t make it a habit!</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_10">15.8. Summary</h3>
<div class="ulist">
<ul>
<li>
<p>Maximize locality of behavior, sometimes at the expense of separation of concerns.</p>
</li>
<li>
<p>Avoid maintaining large amounts of state outside of the DOM.</p>
</li>
<li>
<p>Avoid communicating with the server using JSON data APIs.</p>
</li>
<li>
<p>Use progressive enhancement.</p>
</li>
<li>
<p>If you&#8217;re mostly going to write reusable, generalized components: use vanilla JavaScript with RSJS.</p>
</li>
<li>
<p>If you&#8217;re mostly going to write one-off, specialized components: use Alpine.js or \_hyperscript.</p>
</li>
<li>
<p>If you need a common UI pattern that isn&#8217;t built into HTML: use a library.</p>
</li>
<li>
<p>If you&#8217;re going to write such a library yourself, use vanilla JS with RSJS.</p>
</li>
<li>
<p>Don&#8217;t worry too much about theoretical purity.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_extending_the_hyperview_client.html">Extending the Hyperview Client</a> | ↑ Up: <a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a> | ⌂ Home: <a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a> | Next: <a href="_building_hypermedia_systems_5.html">Building Hypermedia Systems</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-20 12:44:43 -0600
</div>
</div>
</body>
</html>