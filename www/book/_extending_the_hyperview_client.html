<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Adam Stepinski, Carson Gross, Deniz Akşimşek">
<title>Building Hypermedia Systems</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_extending_the_hyperview_client" class="book">
<div id="header">
<h1>Building Hypermedia Systems</h1>
<div class="details">
<span id="author" class="author">Adam Stepinski, Carson Gross, Deniz Akşimşek</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a></span></p><ul class="sectlevel0">
<li><a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a>
<ul class="sectlevel1">
<li><a href="_reintroducing_hypermedia.html">1. Reintroducing Hypermedia</a>
</li>
<li><a href="_rest_hateoas_and_all_that.html">2. REST, HATEOAS and All That</a>
</li>
<li><a href="_building_a_simple_web_1_0_application.html">3. Building A Simple Web 1.0 Application</a>
</li>
<li><a href="_extending_html_as_hypermedia.html">4. Extending HTML As Hypermedia</a>
</li>
<li><a href="_htmx_in_action.html">5. htmx In Action</a>
</li>
<li><a href="_building_hypermedia_systems_2.html">6. Building Hypermedia Systems</a>
</li>
<li><a href="_more_htmx_patterns.html">7. More htmx Patterns</a>
</li>
<li><a href="_building_hypermedia_systems_3.html">8. Building Hypermedia Systems</a>
</li>
<li><a href="_a_dynamic_archive_ui_with_htmx.html">9. A Dynamic Archive UI With htmx</a>
</li>
<li><a href="_building_hypermedia_systems_4.html">10. Building Hypermedia Systems</a>
</li>
<li><a href="_deep_htmx.html">11. Deep htmx</a>
</li>
<li><a href="_hyperview_a_mobile_hypermedia.html">12. Hyperview: A Mobile Hypermedia</a>
</li>
<li><a href="_building_a_contacts_app_with_hyperview.html">13. Building a Contacts App With Hyperview</a>
</li>
<li><a href="_extending_the_hyperview_client.html"><span class="toc-current">14. Extending the Hyperview Client</span></a>
<ul class="sectlevel2">
<li><a href="_extending_the_hyperview_client.html#_adding_phone_calls_and_email">14.1. Adding Phone Calls and Email</a>
</li>
<li><a href="_extending_the_hyperview_client.html#_adding_toast_messages">14.2. Adding Toast Messages</a>
</li>
<li><a href="_extending_the_hyperview_client.html#_swipe_gesture_on_contacts">14.3. Swipe gesture on Contacts</a>
<ul class="sectlevel3">
<li><a href="_extending_the_hyperview_client.html#_designing_the_component">14.3.1. Designing The Component</a>
</li>
<li><a href="_extending_the_hyperview_client.html#_implementing_the_component">14.3.2. Implementing The Component</a>
</li>
</ul>
</li>
<li><a href="_extending_the_hyperview_client.html#_conclusion_2">14.4. Conclusion</a>
</li>
</ul>
</li>
<li><a href="_client_side_scripting.html">15. Client Side Scripting</a>
</li>
<li><a href="_building_hypermedia_systems_5.html">16. Building Hypermedia Systems</a>
</li>
<li><a href="_json_data_apis_hypermedia_driven_applications.html">17. JSON Data APIs &amp; Hypermedia Driven Applications</a>
</li>
<li><a href="_other_hypermedia_libraries_technologies.html">18. Other Hypermedia Libraries &amp; Technologies</a>
</li>
<li><a href="_conclusion_3.html">19. Conclusion</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_extending_the_hyperview_client">14. Extending the Hyperview Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter covers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding phone call and email integration with a custom behavior action</p>
</li>
<li>
<p>Showing confirmation toast messages with a custom behavior action</p>
</li>
<li>
<p>Supporting a "swipeable row" UI with a custom Hyperview component</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the previous chapter, we created a fully-featured native mobile version of our Contacts app.
Aside from customizing the entrypoint URL, we didn&#8217;t need to touch any code that runs on the mobile device.
We defined our mobile app&#8217;s UI and logic completely in the backend code, using Flask and HXML templates.
This is possible because the standard Hyperview client supports all of the basic features by mobile apps.
But the standard Hyperview client can&#8217;t do everything out of the box.
App developers want their apps to have unique touches like custom UIs or deep integration with platform capabilities.
To support these needs, the Hyperview client was designed to be extended with custom behavior actions and UI elements.
In this section, we will enhance our mobile app with examples of both.</p>
</div>
<div class="paragraph">
<p>Before diving in, a quick introduction on the tech stack we&#8217;ll be using.
The Hyperview client is written in React Native.
If you&#8217;re not familiar with React Native, it is a popular cross-platform framework for creating mobile apps.
It uses the same component-based API as React.
This means developers familiar with JavaScript and React can quickly pick up React Native.
React Native has a healthy ecosystem of open-source libraries.
We&#8217;ll be leveraging these libraries to create our custom extensions to the Hyperview client.</p>
</div>
<div class="sect2">
<h3 id="_adding_phone_calls_and_email">14.1. Adding Phone Calls and Email</h3>
<div class="paragraph">
<p>Let&#8217;s start with the most obvious feature missing from our Contacts app: phone calls.
Mobile device can make phone calls.
The contacts in our app have phone numbers.
Shouldn&#8217;t our app support calling those phone numbers?
And while we&#8217;re at it, our app should also support e-mailing the contacts.</p>
</div>
<div class="paragraph">
<p>On the web, calling phone numbers is supported with the <code>tel:</code> URI scheme, and e-mails are supported with the <code>mailto:</code> URI scheme:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 187. <code>tel</code> and <code>mailto</code> schemes in HTML</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;a href="tel:555-555-5555"&gt;Call&lt;/a&gt; <b class="conum">(1)</b>
&lt;a href="mailto:joe@example.com"&gt;Email&lt;/a&gt; <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>When clicked, prompt the user to call the given phone number</p>
</li>
<li>
<p>When clicked, open an e-mail client with the given address populated in the <code>to:</code> field.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Hyperview client doesn&#8217;t support the <code>tel:</code> and <code>mailto:</code> URI schemes.
But we can add these capabilities to the client with custom behavior actions.
Remember that behaviors are interactions defined in HXML.
Behaviors have triggers ("press", "refresh") and actions ("update, "share").
The values of "action" are not limited to the set that comes in the Hyperview library.
So let&#8217;s define two new actions, "open-phone" and "open-email".</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 188. Phone and Email actions</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;view xmlns:comms="https://manning.com/hyperview/communications"&gt; <b class="conum">(1)</b>
  &lt;text&gt;
    &lt;behavior action="open-phone" comms:phone-number="555-555-5555" /&gt; <b class="conum">(2)</b>
    Call
  &lt;/text&gt;
  &lt;text&gt;
    &lt;behavior action="open-email" comms:email-address="joe@example.com" /&gt; <b class="conum">(3)</b>
    Email
  &lt;/text&gt;
&lt;/view&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Define an alias for an XML namespace used by our new attributes</p>
</li>
<li>
<p>When pressed, prompt the user to call the given phone number</p>
</li>
<li>
<p>When pressed, open an e-mail client with the given address populated in the <code>to:</code> field.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notice I defined the actual phone number and email address using separate attributes.
In HTML, the scheme and data are crammed into the <code>href</code> attribute.
HXML&#8217;s <code>&lt;behavior&gt;</code> elements give more options for representing the data.
I chose to use attributes, but I could&#8217;ve represented the phone number or email using child elements.
I&#8217;m also using a namespace to avoid potential future conflicts with other client extensions.</p>
</div>
<div class="paragraph">
<p>So far so good, but how does the Hyperview client know how to interpret <code>open-phone</code> and <code>open-email</code>, and how to reference the <code>phone-number</code> and <code>email-address</code> attributes?
This is where we finally need to write some Javascript.</p>
</div>
<div class="paragraph">
<p>First, I&#8217;m going to add a 3rd-party library (<code>react-native-communications</code>) to our demo app.
This library provides a simple API that interacts with OS-level functionality for calls and emails.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">&gt; cd hyperview/demo
&gt; yarn add react-native-communications <b class="conum">(1)</b>
&gt; yarn start <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add dependency on <code>react-native-communications</code></p>
</li>
<li>
<p>Re-start the mobile app</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next, we&#8217;ll create a new file, <code>phone.js</code>, that will implement the code associated with the <code>open-phone</code> action:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 189. demo/src/phone.js</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">import { phonecall } from 'react-native-communications'; <b class="conum">(1)</b>

const namespace = "https://manning.com/hyperview/communications";

export default {
  action: "open-phone", <b class="conum">(2)</b>
  callback: (behaviorElement) =&gt; { <b class="conum">(3)</b>
    const number = behaviorElement.getAttributeNS(namespace, "phone-number"); <b class="conum">(4)</b>
    if (number != null) {
      phonecall(number, false); <b class="conum">(5)</b>
    }
  },
};</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Import the function we need from the 3rd party library.</p>
</li>
<li>
<p>The name of the action</p>
</li>
<li>
<p>The callback that runs when the action triggers.</p>
</li>
<li>
<p>Get the phone number from the <code>&lt;behavior&gt;</code> element.</p>
</li>
<li>
<p>Pass the phone number to the function from the 3rd party library.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Custom actions are defined as a JavaScript objects with two keys: <code>action</code> and <code>callback</code>.
This is how the Hyperview client associates a custom action in the HXML with our custom code.
The callback value is a function that takes a single parameter, <code>behaviorElement</code>.
This parameter is an XML DOM representation of the <code>&lt;behavior&gt;</code> element that triggered the action.
That means we can call methods on it like <code>getAttribute</code>, or access attributes like <code>childNodes</code>.
In this case, we use <code>getAttributeNS</code> to read the phone number from the <code>phone-number</code> attribute on the <code>&lt;behavior&gt;</code> element.
If the phone number is defined on the element, we can call the <code>phonecall()</code> function provided by the <code>react-native-communications</code> library.</p>
</div>
<div class="paragraph">
<p>There&#8217;s one more thing we need to before we can use our custom action: register the action with the Hyperview client.
The Hyperview client is represented as a React Native component called <code>Hyperview</code>.
This component takes a prop called <code>behaviors</code>, which is an array of custom action objects like our "open-phone" action.
Let&#8217;s pass our "open-phone" implementation to the <code>Hyperview</code> component in our demo app.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 190. demo/src/HyperviewScreen.js</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">import React, { PureComponent } from 'react';
import Hyperview from 'hyperview';
import OpenPhone from './phone'; <b class="conum">(1)</b>

export default class HyperviewScreen extends PureComponent {
  // ... omitted for brevity

  behaviors = [OpenPhone]; <b class="conum">(2)</b>

  render() {
    return (
      &lt;Hyperview
        behaviors={this.behaviors} <b class="conum">(3)</b>
        entrypointUrl={this.entrypointUrl}
        // more props...
      /&gt;
    );
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Import the open-phone action</p>
</li>
<li>
<p>Create an array of custom actions</p>
</li>
<li>
<p>Pass the custom actions to the <code>Hyperview</code> component, as a prop called <code>behaviors</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Under the hood, the <code>Hyperview</code> component is responsible for taking HXML and turning it into mobile UI elements.
It also handles triggering behavior actions based on user interactions.
By passing the "open-phone" action to Hyperview, we can now use it as a value for the <code>action</code> attribute on <code>&lt;behavior&gt;</code> elements.
In fact, let&#8217;s switch do that now by updating the <code>show.xml</code> template in our Flask app:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 191. Snippet of <code>hv/show.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">{% block content %}
&lt;view style="details"&gt;
  &lt;text style="contact-name"&gt;{{ contact.first }} {{ contact.last }}&lt;/text&gt;

  &lt;view style="contact-section"&gt;
    &lt;behavior <b class="conum">(1)</b>
      xmlns:comms="https://manning.com/hyperview/communications"
      trigger="press"
      action="open-phone" <b class="conum">(2)</b>
      comms:phone-number="{{contact.phone}}" <b class="conum">(3)</b>
    /&gt;
    &lt;text style="contact-section-label"&gt;Phone&lt;/text&gt;
    &lt;text style="contact-section-info"&gt;{{contact.phone}}&lt;/text&gt;
  &lt;/view&gt;

  &lt;view style="contact-section"&gt;
    &lt;behavior <b class="conum">(4)</b>
      xmlns:comms="https://manning.com/hyperview/communications"
      trigger="press"
      action="open-email"
      comms:email-address="{{contact.email}}"
    /&gt;
    &lt;text style="contact-section-label"&gt;Email&lt;/text&gt;
    &lt;text style="contact-section-info"&gt;{{contact.email}}&lt;/text&gt;
  &lt;/view&gt;
&lt;/view&gt;
{% endblock %}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add a behavior to the phone number section that triggers on "press".</p>
</li>
<li>
<p>Trigger the new "open-phone" action.</p>
</li>
<li>
<p>Set the attribute expected by the "open-phone" action.</p>
</li>
<li>
<p>Same idea, with a different action ("open-email")</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>I skipped over the implementation of the second custom action, "open-email".
As you can guess, this action will open a system-level email composer to let the user send an email to their contact.
The implementation of "open-email" is almost identical to "open-phone".
The <code>react-native-communications</code> library exposes a function called <code>email()</code>, so we just wrap it and pass arguments to it in the same way.</p>
</div>
<div class="paragraph">
<p>There we have a complete example of extending the client with some custom behavior actions!
We chose a new name for our actions ("open-phone" and "open-email"), and mapped those names to functions.
The functions take <code>&lt;behavior&gt;</code> elements and can run any arbitrary React Native code.
We wrapped an existing 3rd party library, and read attributes set on the <code>&lt;behavior&gt;</code> element to pass data to the library.
After re-starting our demo app, our client has new capabilities we can immediately utilize by referencing the actions from our HXML templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_toast_messages">14.2. Adding Toast Messages</h3>
<div class="paragraph">
<p>The phone and email actions added in the previous section are examples of "system actions".
System actions trigger some UI or capability provided by the device&#8217;s OS.
But custom actions are not limited to only interacting with OS-level APIs.
Remember, the callbacks that implement actions can run arbitrary code, including code that renders our own UI elements.
This next custom action example will do just that: render a custom confirmation toast UI element.</p>
</div>
<div class="paragraph">
<p>If you recall, our Contacts web app shows messages upon successful actions, such as deleting or creating a contact.
These messages are generated in the Flask backend using the <code>flash()</code> function, called from the views.
Thenm the base <code>layout.html</code> template rendered the messages into the final web page.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 192. Snippet templates/layout.html</div>
<div class="content">
<pre class="highlight"><code class="language-" data-lang="">{% for message in get_flashed_messages() %}
  &lt;div class="flash"&gt;{{ message }}&lt;/div&gt;
{% endfor %}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our Flask app still includes the calls to <code>flash()</code>, but the Hyperview app is not accessing the flashed message to display to the user.
Let&#8217;s add that support now.
We could just show the messages using a similar technique to the web app: loop through the messages and render some <code>&lt;text&gt;</code> elements in <code>layout.xml</code>.
This approach has a major downside: the rendered messages would be tied to a specific screen.
If that screen get hidden by a navigation action, the message would be hidden too.
What we really want is for our toast UI to display "above" all of the screens in the navigation stack.
That way, the toast would remain visible (fading away after a few seconds), even if the stack of screens changes below.
To display some UI outside of the <code>&lt;screen&gt;</code> elements, we&#8217;re going to need to extend the Hyperview client with a new custom action, <code>show-toast</code>.
This is another opportunity to use an open-source library, <code>react-native-root-toast</code>.
Let&#8217;s add this library to our demo app.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">&gt; cd hyperview/demo
&gt; yarn add react-native-root-toast <b class="conum">(1)</b>
&gt; yarn start <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add dependency on <code>react-native-root-toast</code></p>
</li>
<li>
<p>Re-start the mobile app</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, we can write the code to implement the toast UI as a custom action.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 193. demo/src/toast.js</div>
<div class="content">
<pre class="highlight"><code class="language-" data-lang="">import Toast from 'react-native-root-toast'; <b class="conum">(1)</b>

const namespace = "https://manning.com/hyperview/toast";

export default {
  action: "show-toast", <b class="conum">(2)</b>
  callback: (behaviorElement) =&gt; { <b class="conum">(3)</b>
    const message = behaviorElement.getAttributeNS(namespace, "message");
    if (message != null) {
      Toast.show(message, {position: Toast.positions.TOP, duration: 2000}); <b class="conum">(4)</b>
    }
  },
};</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Import the <code>Toast</code> API.</p>
</li>
<li>
<p>The name of the action</p>
</li>
<li>
<p>The callback that runs when the action triggers</p>
</li>
<li>
<p>Pass the message to the toast library</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This code looks very similar to the implementation of <code>open-phone</code>.
Both callbacks follow a similar pattern: read namespaced attributes from the <code>&lt;behavior&gt;</code> element, and pass those values to a 3rd party library.
For simplicity, I&#8217;m hard-coding options to show the toast at the top of the screen, fading out after 2 seconds.
But <code>react-native-root-toast</code> exposes many options for positioning, timing of animations, colors, and more.
We could specify these options using extra attributes on <code>behaviorElement</code> to make the action more configurable.
For our purposes, we will just stick to a bare-bones implementation.</p>
</div>
<div class="paragraph">
<p>Now we just need to register our custom action with the <code>&lt;Hyperview&gt;</code> component, by passing it to the <code>behaviors</code> prop.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 194. demo/src/HyperviewScreen.js</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">import React, { PureComponent } from 'react';
import Hyperview from 'hyperview';
import OpenEmail from './email';
import OpenPhone from './phone';
import ShowToast from './toast'; <b class="conum">(1)</b>

export default class HyperviewScreen extends PureComponent {
  // ... omitted for brevity

  behaviors = [OpenEmail, OpenPhone, ShowToast]; <b class="conum">(2)</b>

  // ... omitted for brevity
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Import the show-toast action</p>
</li>
<li>
<p>Pass the action to the <code>Hyperview</code> component, as a prop called <code>behaviors</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All that&#8217;s left to do is trigger the <code>show-toast</code> action from our HXML.
There are 3 user actions that result in showing a toast message:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creating a new contact</p>
</li>
<li>
<p>Updating an existing contact</p>
</li>
<li>
<p>Deleting a contact</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first two actions are implemented in our app using the same HXML template, <code>form_fields.xml</code>.
Upon successfully creating or updating a contact, this template will reload the screen and trigger an event, using behaviors that trigger on "load".
The deletion action also uses behaviors that trigger on "load", defined in the <code>deleted.xml</code> template.
So both <code>form_fields.xml</code> and <code>deleted.xml</code> need to be modified to also show toasts on load.
Since the actual behaviors will be the same in both templates, let&#8217;s created a shared template to reuse the HXML.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 195. hv/templates/toasts.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">{% for message in get_flashed_messages() %}
  &lt;behavior <b class="conum">(1)</b>
    xmlns:toast="https://manning.com/hyperview/toast"
    trigger="load" <b class="conum">(2)</b>
    action="show-toast" <b class="conum">(3)</b>
    toast:message="{{ message }}" <b class="conum">(4)</b>
  /&gt;
{% endfor %}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Define a behavior for each message to display</p>
</li>
<li>
<p>Trigger this behavior as soon as the screen loads</p>
</li>
<li>
<p>Trigger the new "show-toast" action.</p>
</li>
<li>
<p>The "show-toast" action will display the flashed message in its UI.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Like in <code>layout.html</code> of the web app, we loop through all of the flashed messages and render some markup for each message.
However, in the web app, the message was directly rendered into the web page.
In the Hyperview app, each message is displayed using a behavior that triggers our custom UI.
Now we just need to include this template in <code>form_fields.xml</code>:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 196. Snippet of hv/templates/form_fields.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;view xmlns="https://hyperview.org/hyperview" style="edit-group"&gt;
  {% if saved %}
    {% include "hv/toasts.xml" %} <b class="conum">(1)</b>
    &lt;behavior trigger="load" once="true" action="dispatch-event" event-name="contact-updated" /&gt;
    &lt;behavior trigger="load" once="true" action="reload" href="/contacts/{{contact.id}}" /&gt;
  {% endif %}
  &lt;!-- omitted for brevity --&gt;
&lt;/view&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Show the toasts as soon as the screen loads.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And we can do the same thing in <code>deleted.xml</code>:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 197. hv/templates/deleted.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;view xmlns="https://hyperview.org/hyperview"&gt;
  {% include "hv/toasts.xml" %} <b class="conum">(1)</b>
  &lt;behavior trigger="load" action="dispatch-event" event-name="contact-updated" /&gt;
  &lt;behavior trigger="load" action="back" /&gt;
&lt;/view&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Show the toasts as soon as the screen loads.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In both <code>form_fields.xml</code> and <code>deleted.xml</code>, multiple behaviors get triggered on "load".
In <code>deleted.xml</code>, we immediately navigate back to the previous screen.
In <code>form_fields.xml</code>, we immediately reload the current screen to show the Contact details.
If we rendered our toast UI elements directly in the screen, the user would barely see them before the screen disappeared or reloaded.
By using a custom action, the toast UI remains visible even while the screens change beneath them.</p>
</div>
<div id="figure-7-8" class="imageblock">
<div class="content">
<img src="../images/screenshot_hyperview_toast.png" alt="screenshot hyperview toast">
</div>
<div class="title">Figure 12. 20. Toast shown during back navigation</div>
</div>
</div>
<div class="sect2">
<h3 id="_swipe_gesture_on_contacts">14.3. Swipe gesture on Contacts</h3>
<div class="paragraph">
<p>To add communication capabilities and the toast UI, we extended the client with custom behavior actions.
But the Hyperview client can also be extended with custom UI components that render on the screen.
Custom components are implemented as React Native components.
That means anything that&#8217;s possible in React Native can be done in Hyperview as well!
Custom components open up endless possibilities to build rich mobile apps with the Hypermedia architecture.</p>
</div>
<div class="paragraph">
<p>To illustrate the possibilities, we will extend the Hyperview client in our mobile app to add a "swipeable row" component.
How does it work?
The "swipeable row" component supports a horizontal swiping gesture.
As the user swipes this component from right to left, the component will slide over, revealing a series of action buttons.
Each action buttons will be able to trigger standard Hyperview behaviors when pressed.
We will use this custom component in our Contacts List screen.
Each contact item will be a "swipeable row", and the actions will give quick access to edit and delete actions for the contact.</p>
</div>
<div id="figure-7-9" class="imageblock">
<div class="content">
<img src="../images/screenshot_hyperview_swipe.png" alt="screenshot hyperview swipe">
</div>
<div class="title">Figure 12. 21. Swipeable contact item</div>
</div>
<div class="sect3">
<h4 id="_designing_the_component">14.3.1. Designing The Component</h4>
<div class="paragraph">
<p>Rather than implementing the swipe gesture from scratch, we will once again use an open-source third-party library: <code>react-native-swipeable</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">&gt; cd hyperview/demo
&gt; yarn add react-native-swipeable <b class="conum">(1)</b>
&gt; yarn start <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Add dependency on <code>react-native-swipeable</code></p>
</li>
<li>
<p>Re-start the mobile app</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This library provides a React Native component called <code>Swipeable</code>.
It can render any React Native components as its main content (the part that can be swiped).
It also takes an array of React Native components as a prop to render as the action buttons.
When designing a custom component, I like to iterate on the HXML of the component before writing the code.
This way, I can make sure the markup is expressive but succinct, and will work with the underlying library.
For the swipeable row, we need a way to represent the entire component, the main content, and one of many buttons.
I came up with something that looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;swipe:row xmlns:swipe="https://manning.com/hyperview/swipeable"&gt; <b class="conum">(1)</b>
  &lt;swipe:main&gt; <b class="conum">(2)</b>
    &lt;!-- main content shown here --&gt;
  &lt;/swipe:main&gt;

  &lt;swipe:button&gt; <b class="conum">(3)</b>
    &lt;!-- first button that appears when swiping --&gt;
  &lt;/swipe:button&gt;

  &lt;swipe:button&gt; <b class="conum">(4)</b>
    &lt;!-- second button that appears when swiping --&gt;
  &lt;/swipe:button&gt;
&lt;/swipe:row&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Parent element encapsulating the entire swipeable row, with custom namespace</p>
</li>
<li>
<p>The main content of the swipeable row, can hold any HXML</p>
</li>
<li>
<p>The first button that appears when swiping, can hold any HXML</p>
</li>
<li>
<p>The second button that appears when swiping, can hold any HXML</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This structure clearly separates the main content from the buttons.
It also supports one, two, or more buttons.
Buttons appear in the order of definition, making it easy to swap the order.
This design covers everything we need to implement a swipeable row for our contacts list.
But it&#8217;s also generic enough to be reusable.
The markup above contains nothing specific to the contact name, editing the contact, or deleting the contact.
If down the line, we add another list screen to our app, we can use this component to make the items in that list swipeable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_the_component">14.3.2. Implementing The Component</h4>
<div class="paragraph">
<p>Now that we know the HXML structure of our custom component, we can write the code to implement it.
What does that code look like?
Hyperview components are written as React Native components.
These React Native components are mapped to a unique XML namespace &amp; tag name.
When the Hyperview client encounters that namespace &amp; tag name in the HXML, it delegates rendering of the HXML element to the matching React Native component.
As part of delegation, the Hyperview Client passes several props to the React Native component:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>element</code>: The XML DOM element that maps to the React Native component</p>
</li>
<li>
<p><code>stylesheets</code>: The styles defined in the <code>&lt;screen&gt;</code></p>
</li>
<li>
<p><code>onUpdate</code>: The function to call when the component triggers a behavior</p>
</li>
<li>
<p><code>option</code>: Miscellaneous settings used by the Hyperview client.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Our swipeable row component is a container with slots to render arbitrary main content and buttons.
That means it needs to delegate rendering back to the Hyperview client to render those parts of the UI.
This is done with a public function exposed by the Hyperview client, <code>Hyperview.renderChildren()</code>.
<code>renderChildren()</code></p>
</div>
<div class="paragraph">
<p>Now that we know how custom Hyperview components are implemented, let&#8217;s write the code for our swipeable row.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 198. demo/src/swipeable.js</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">import React, { PureComponent } from 'react';
import Hyperview from 'hyperview';
import Swipeable from 'react-native-swipeable';

const NAMESPACE_URI = 'https://manning.com/hyperview/swipeable';

export default class SwipeableRow extends PureComponent { <b class="conum">(1)</b>
  static namespaceURI = NAMESPACE_URI; <b class="conum">(2)</b>
  static localName = "row"; <b class="conum">(3)</b>

  getElements = (tagName) =&gt; {
    return Array.from(this.props.element.getElementsByTagNameNS(NAMESPACE_URI, tagName));
  };

  getButtons = () =&gt; { <b class="conum">(4)</b>
    return this.getElements("button").map((buttonElement) =&gt; {
      return Hyperview.renderChildren(buttonElement, this.props.stylesheets, this.props.onUpdate, this.props.options); <b class="conum">(5)</b>
    });
  };

  render() {
    const [main] = this.getElements("main");
    if (!main) {
      return null;
    }

    return (
      &lt;Swipeable rightButtons={this.getButtons()}&gt; <b class="conum">(6)</b>
        {Hyperview.renderChildren(main, this.props.stylesheets, this.props.onUpdate, this.props.options)} <b class="conum">(7)</b>
      &lt;/Swipeable&gt;
    );
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Class-based React Native component</p>
</li>
<li>
<p>Map this component to the given HXML namespace</p>
</li>
<li>
<p>Map this component to the given HXML tag name</p>
</li>
<li>
<p>Function that returns an array of React Native components for each <code>&lt;button&gt;</code> element.</p>
</li>
<li>
<p>Delegate to the Hyperview client to render each button</p>
</li>
<li>
<p>Pass the buttons and main content to the third-party library</p>
</li>
<li>
<p>Delegate to the Hyperview client to render the main content</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>SwipeableRow</code> class implements a React Native component.
At the top of the class, we set a static <code>namespaceURI</code> property and <code>localName</code> property.
These properties map the React Native component to a unique namespace &amp; tag name pair in the HXML.
This is how the Hyperview client knows to delegate to <code>SwipeableRow</code> when encountering custom elements in the HXML.
At the bottom of the class, you&#8217;ll see a <code>render()</code> method.
<code>render()</code> gets called by React Native to return the rendered component.
Since React Native is built on principle of composition, <code>render()</code> typically returns a composition of other React Native components.
In this case, we return the <code>Swipeable</code> component (provided by the <code>react-native-swipeable</code> library), composed with React Native components for the buttons and main content.
The React Native components for the buttons and main content are created using a similar process:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Find the specific child elements (<code>&lt;button&gt;</code> or <code>&lt;main&gt;</code>)</p>
</li>
<li>
<p>Turn those elements into React Native components using <code>Hyperview.renderChildren()</code></p>
</li>
<li>
<p>Set the components as children or props of <code>Swipeable</code>.</p>
</li>
</ul>
</div>
<div id="figure-7-10" class="imageblock">
<div class="content">
<img src="../images/figure_hyperview_components.png" alt="figure hyperview components">
</div>
<div class="title">Figure 12. 22. Component rendering delegation</div>
</div>
<div class="paragraph">
<p>I realize this code may be hard to follow if you&#8217;ve never worked with React or React Native.
That&#8217;s ok.
The important takeaway is: we can write code to translate arbitrary HXML into React Native components.
The structure of the HXML (both attributes and elements) can be used to represent multiple facets of the UI (in this case, the buttons and main content).
Finally, the code can delegate rendering of child components back to the Hyperview client.
That means this swipeable row component is completely generic.
The actual structure and styling and interactions of the main content and buttons can be defined in the HXML.
Creating a generic component means we can reuse it across multiple screens for different purposes.
If we add more custom components or new behavior actions in the future, they will work with our swipeable row implementation.</p>
</div>
<div class="paragraph">
<p>The last thing to do is register this new component with the Hyperview client.
The process is similar to registering custom actions.
Custom components are passed as a separate <code>components</code> prop to the <code>Hyperview</code> component.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 199. demo/src/HyperviewScreen.js</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">import React, { PureComponent } from 'react';
import Hyperview from 'hyperview';
import OpenEmail from './email';
import OpenPhone from './phone';
import ShowToast from './toast';
import SwipeableRow from './swipeable'; <b class="conum">(1)</b>

export default class HyperviewScreen extends PureComponent {
  // ... omitted for brevity

  behaviors = [OpenEmail, OpenPhone, ShowToast];
  components = [SwipeableRow]; <b class="conum">(2)</b>

  render() {
    return (
      &lt;Hyperview
        behaviors={this.behaviors}
        components={this.components} <b class="conum">(3)</b>
        entrypointUrl={this.entrypointUrl}
        // more props...
      /&gt;
    );
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Import the <code>SwipeableRow</code> component</p>
</li>
<li>
<p>Create an array of custom components</p>
</li>
<li>
<p>Pass the custom component to the <code>Hyperview</code> component, as a prop called <code>components</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We&#8217;re now ready to update our HXML templates to make use of the new swipeable row component!</p>
</div>
<div class="sect4">
<h5 id="_using_the_component">Using The Component</h5>
<div class="paragraph">
<p>Currently, the HXML for a contact item in the list consists of a <code>&lt;behavior&gt;</code> and <code>&lt;text&gt;</code> element:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 200. Snippet of <code>hv/rows.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;item key="{{ contact.id }}" style="contact-item"&gt;
  &lt;behavior trigger="press" action="push" href="/contacts/{{ contact.id }}" /&gt; <b class="conum">(1)</b>
  &lt;text style="contact-item-label"&gt;
    &lt;!-- omitted for brevity --&gt;
  &lt;/text&gt;
&lt;/item&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With our swipeable row component, this markup will become the "main" UI.
So let&#8217;s start by adding <code>&lt;row&gt;</code> and <code>&lt;main&gt;</code> as parent elements.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 201. Adding swipeable row <code>hv/rows.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;item key="{{ contact.id }}"&gt;
  &lt;swipe:row xmlns:swipe="https://manning.com/hyperview/swipeable"&gt; <b class="conum">(1)</b>
    &lt;swipe:main&gt; <b class="conum">(2)</b>
      &lt;view style="contact-item"&gt; <b class="conum">(3)</b>
        &lt;behavior trigger="press" action="push" href="/contacts/{{ contact.id }}" /&gt; <b class="conum">(1)</b>
        &lt;text style="contact-item-label"&gt;
          &lt;!-- omitted for brevity --&gt;
        &lt;/text&gt;
      &lt;/view&gt;
    &lt;/swipe:main&gt;
  &lt;/swipe:row&gt;
&lt;/item&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Added <code>&lt;swipe:row&gt;</code> parent element, with namespace alias for <code>swipe</code>.</p>
</li>
<li>
<p>Added <code>&lt;swipe:main&gt;</code> element to define the main content</p>
</li>
<li>
<p>Wrapped the existing <code>&lt;behavior&gt;</code> and <code>&lt;text&gt;</code> elements in a <code>&lt;view&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Previously, the <code>contact-item</code> style was set on the <code>&lt;item&gt;</code> element.
That made sense when the <code>&lt;item&gt;</code> element was the container for the main content of the list item.
Now that the main content is a child of <code>&lt;swipe:main&gt;</code>, we need to introduce a new <code>&lt;view&gt;</code> where we apply the styles.</p>
</div>
<div class="paragraph">
<p>If we reload our backend and mobile app, you won&#8217;t experience any changes on the Contacts List screen yet.
Without any action buttons defined, there&#8217;s nothing to reveal when swiping a row.
Let&#8217;s add two buttons to the swipeable row.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 202. Adding swipeable row <code>hv/rows.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;item key="{{ contact.id }}"&gt;
  &lt;swipe:row xmlns:swipe="https://manning.com/hyperview/swipeable"&gt; <b class="conum">(1)</b>
    &lt;swipe:main&gt;
      &lt;!-- omitted for brevity --&gt;
    &lt;/swipe:main&gt;

    &lt;swipe:button&gt; <b class="conum">(1)</b>
      &lt;view style="swipe-button"&gt;
        &lt;text style="button-label"&gt;Edit&lt;/text&gt;
      &lt;/view&gt;
    &lt;/swipe:button&gt;

    &lt;swipe:button&gt; <b class="conum">(2)</b>
      &lt;view style="swipe-button"&gt;
        &lt;text style="button-label-delete"&gt;Delete&lt;/text&gt;
      &lt;/view&gt;
    &lt;/swipe:button&gt;
  &lt;/swipe:row&gt;
&lt;/item&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Added <code>&lt;swipe:button&gt;</code> for edit action</p>
</li>
<li>
<p>Added <code>&lt;swipe:button&gt;</code> for delete action</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now if we use our mobile app, we can see the swipeable row in action!
As you swipe the contact item, the "Edit" and "Delete" buttons reveal themselves.
But they don&#8217;t do anything yet. We need to add some behaviors to these buttons.
The "Edit" button is straight-forward: pressing it should open the contact details screen in edit mode.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 203. Snippet of <code>hv/rows.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;swipe:button&gt;
  &lt;view style="swipe-button"&gt;
    &lt;behavior trigger="press" action="push" href="/contacts/{{ contact.id }}/edit" /&gt; <b class="conum">(1)</b>
    &lt;text style="button-label"&gt;Edit&lt;/text&gt;
  &lt;/view&gt;
&lt;/swipe:button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>When pressed, push a new screen with the Edit Contact UI.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The "Delete" button is a bit more complicated.
There&#8217;s no screen to open for deletion, so what should happen when the user presses this button?
Perhaps we use the same interaction as the "Delete" button on the Edit Contact screen.
That interaction brings up a system dialog, asking the user to confirm the deletion.
If the user confirms, the Hyperview client makes a <code>POST</code> request to <code>/contacts/&lt;contact_id&gt;/delete</code>, and appends the response to the screen.
The response triggers a few behaviors immediately to reload the contacts list and show a toast message.
This interaction will work for our action button as well:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 204. Snippet of <code>hv/rows.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;swipe:button&gt;
  &lt;view style="swipe-button"&gt;
    &lt;behavior <b class="conum">(1)</b>
      xmlns:alert="https://hyperview.org/hyperview-alert"
      trigger="press"
      action="alert"
      alert:title="Confirm delete"
      alert:message="Are you sure you want to delete {{ contact.first }}?"
    &gt;
      &lt;alert:option alert:label="Confirm"&gt;
        &lt;behavior <b class="conum">(2)</b>
          trigger="press"
          action="append"
          target="item-{{ contact.id }}"
          href="/contacts/{{ contact.id }}/delete"
          verb="post"
        /&gt;
      &lt;/alert:option&gt;
      &lt;alert:option alert:label="Cancel" /&gt;
    &lt;/behavior&gt;
    &lt;text style="button-label-delete"&gt;Delete&lt;/text&gt;
  &lt;/view&gt;
&lt;/swipe:button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>When pressed, open a system dialog box asking the user to confirm the action</p>
</li>
<li>
<p>If confirmed, make a POST request to the deletion endpoint, and append the response to the parent <code>&lt;item&gt;</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now when we press "Delete", we get the confirmation dialog as expected.
After pressing confirm, the backend response triggers behaviors that show a confirmation toast and reload the list of contacts.
The item for the deleted contact disappears from the list.</p>
</div>
<div id="figure-7-11" class="imageblock">
<div class="content">
<img src="../images/screenshot_hyperview_swipe_delete.png" alt="screenshot hyperview swipe delete">
</div>
<div class="title">Figure 12. 23. Delete from swipe button</div>
</div>
<div class="paragraph">
<p>Notice that the action buttons are able to support any type of behavior action, from <code>push</code> to <code>alert</code>.
If we wanted to, we could have the action buttons trigger our custom actions, like <code>open-phone</code> and <code>open-email</code>.
Custom components and actions can be mixed freely with the standard components and actions that come standard with the Hyperview framework.
This makes the extensions to the Hyperview client feel like first-class features.</p>
</div>
<div class="paragraph">
<p>In fact, I&#8217;ll let you in on a secret.
Within the Hyperview client, standard components and actions are implemented the same way as custom components and actions!
The rendering code does not treat <code>&lt;view&gt;</code> differently from <code>&lt;swipe:row&gt;</code>.
The behavior code does not treat <code>alert</code> differently from <code>open-phone</code>.
They are both implemented using the same techniques desbribed in this section.
Standard components and actions are just the ones that are universally needed by all mobile apps.
But they are just the starting point.
Most mobile apps will require some extensions to the Hyperview client to deliver a great user experience.
Extensions evolve the client from being a generic "Hyperview client", to being a purpose-built client for your app.
And importantly, this evolution preserver the Hypermedia, server-driven architecture and all of its benefits.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion_2">14.4. Conclusion</h3>
<div class="ulist">
<ul>
<li>
<p>With custom components and behaviors, Hyperview apps can do anything a native app can do.</p>
</li>
<li>
<p>Support for system actions (like SMS and email) can be added with a Hyperview behavior action.</p>
</li>
<li>
<p>Support for high-level UIs (like confirmation toasts) can also be added with a Hyperview behavior action.</p>
</li>
<li>
<p>Support for customized screen elements (like swipeable items in lists) can be added with Hyperview custom components.</p>
</li>
<li>
<p>The standard behaviors and components that come with the Hyperview client are implemented the same was as custom behavior actions and components.</p>
</li>
<li>
<p>By customizing the Hyperivew client, developers can build a mobile app that suits their specific needs while retaining the benefits of a thin-client, hypermedia architecture.
= Building Hypermedia Systems
:chapter: 9
:sectnums:
:figure-caption: Figure 12.
:listing-caption: Listing 12.
:table-caption: Table 12.
:sectnumoffset: 8
:leveloffset: 1
:sourcedir: ../code/src
:source-language:</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_building_a_contacts_app_with_hyperview.html">Building a Contacts App With Hyperview</a> | ↑ Up: <a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a> | ⌂ Home: <a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a> | Next: <a href="_client_side_scripting.html">Client Side Scripting</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-20 12:44:43 -0600
</div>
</div>
</body>
</html>