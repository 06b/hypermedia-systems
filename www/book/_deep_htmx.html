<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="Adam Stepinski, Carson Gross, Deniz Akşimşek">
<title>Building Hypermedia Systems</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_deep_htmx" class="book">
<div id="header">
<h1>Building Hypermedia Systems</h1>
<div class="details">
<span id="author" class="author">Adam Stepinski, Carson Gross, Deniz Akşimşek</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a></span></p><ul class="sectlevel0">
<li><a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a>
<ul class="sectlevel1">
<li><a href="_reintroducing_hypermedia.html">1. Reintroducing Hypermedia</a>
</li>
<li><a href="_rest_hateoas_and_all_that.html">2. REST, HATEOAS and All That</a>
</li>
<li><a href="_building_a_simple_web_1_0_application.html">3. Building A Simple Web 1.0 Application</a>
</li>
<li><a href="_extending_html_as_hypermedia.html">4. Extending HTML As Hypermedia</a>
</li>
<li><a href="_htmx_in_action.html">5. htmx In Action</a>
</li>
<li><a href="_building_hypermedia_systems_2.html">6. Building Hypermedia Systems</a>
</li>
<li><a href="_more_htmx_patterns.html">7. More htmx Patterns</a>
</li>
<li><a href="_building_hypermedia_systems_3.html">8. Building Hypermedia Systems</a>
</li>
<li><a href="_a_dynamic_archive_ui_with_htmx.html">9. A Dynamic Archive UI With htmx</a>
</li>
<li><a href="_building_hypermedia_systems_4.html">10. Building Hypermedia Systems</a>
</li>
<li><a href="_deep_htmx.html"><span class="toc-current">11. Deep htmx</span></a>
<ul class="sectlevel2">
<li><a href="_deep_htmx.html#_getting_deeper_into_htmx">Getting Deeper Into htmx</a>
</li>
<li><a href="_deep_htmx.html#_htmx_attributes">11.1. htmx Attributes</a>
<ul class="sectlevel3">
<li><a href="_deep_htmx.html#_hx_swap">11.1.1. <code>hx-swap</code></a>
</li>
<li><a href="_deep_htmx.html#_hx_trigger">11.1.2. <code>hx-trigger</code></a>
</li>
<li><a href="_deep_htmx.html#_other_attributes">11.1.3. Other Attributes</a>
</li>
</ul>
</li>
<li><a href="_deep_htmx.html#_events">11.2. Events</a>
<ul class="sectlevel3">
<li><a href="_deep_htmx.html#_htmx_generated_events">11.2.1. htmx-generated Events</a>
</li>
<li><a href="_deep_htmx.html#_using_the_htmxconfigrequest_event">11.2.2. Using The <code>htmx:configRequest</code> Event</a>
</li>
<li><a href="_deep_htmx.html#_canceling_a_request_using_htmxabort">11.2.3. Canceling a Request using <code>htmx:abort</code></a>
</li>
<li><a href="_deep_htmx.html#_server_generated_events">11.2.4. Server Generated Events</a>
</li>
</ul>
</li>
<li><a href="_deep_htmx.html#_http_requests_responses">11.3. HTTP Requests &amp; Responses</a>
<ul class="sectlevel3">
<li><a href="_deep_htmx.html#_http_response_codes_2">11.3.1. HTTP Response Codes</a>
</li>
</ul>
</li>
<li><a href="_deep_htmx.html#_updating_other_content">11.4. Updating Other Content</a>
<ul class="sectlevel3">
<li><a href="_deep_htmx.html#_expanding_your_selection">11.4.1. Expanding Your Selection</a>
</li>
<li><a href="_deep_htmx.html#_out_of_band_swaps">11.4.2. Out of Band Swaps</a>
</li>
<li><a href="_deep_htmx.html#_events_2">11.4.3. Events</a>
</li>
<li><a href="_deep_htmx.html#_being_pragmatic">11.4.4. Being Pragmatic</a>
</li>
</ul>
</li>
<li><a href="_deep_htmx.html#_debugging">11.5. Debugging</a>
<ul class="sectlevel3">
<li><a href="_deep_htmx.html#_logging_htmx_events">11.5.1. Logging htmx Events</a>
</li>
<li><a href="_deep_htmx.html#_monitoring_events_in_chrome">11.5.2. Monitoring Events in Chrome</a>
</li>
</ul>
</li>
<li><a href="_deep_htmx.html#_security_considerations">11.6. Security Considerations</a>
<ul class="sectlevel3">
<li><a href="_deep_htmx.html#_content_security_policies_htmx">11.6.1. Content Security Policies &amp; htmx</a>
</li>
</ul>
</li>
<li><a href="_deep_htmx.html#_configuring">11.7. Configuring</a>
</li>
<li><a href="_deep_htmx.html#_summary_7">11.8. Summary</a>
</li>
</ul>
</li>
<li><a href="_hyperview_a_mobile_hypermedia.html">12. Hyperview: A Mobile Hypermedia</a>
</li>
<li><a href="_building_a_contacts_app_with_hyperview.html">13. Building a Contacts App With Hyperview</a>
</li>
<li><a href="_extending_the_hyperview_client.html">14. Extending the Hyperview Client</a>
</li>
<li><a href="_client_side_scripting.html">15. Client Side Scripting</a>
</li>
<li><a href="_building_hypermedia_systems_5.html">16. Building Hypermedia Systems</a>
</li>
<li><a href="_json_data_apis_hypermedia_driven_applications.html">17. JSON Data APIs &amp; Hypermedia Driven Applications</a>
</li>
<li><a href="_other_hypermedia_libraries_technologies.html">18. Other Hypermedia Libraries &amp; Technologies</a>
</li>
<li><a href="_conclusion_3.html">19. Conclusion</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_deep_htmx">11. Deep htmx</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter covers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The details of htmx attributes</p>
</li>
<li>
<p>Events &amp; htmx</p>
</li>
<li>
<p>HTTP Requests &amp; htmx</p>
</li>
<li>
<p>Updating Other Content</p>
</li>
<li>
<p>Debugging htmx Applications</p>
</li>
<li>
<p>Security Considerations</p>
</li>
<li>
<p>Configuring htmx</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_getting_deeper_into_htmx">Getting Deeper Into htmx</h3>
<div class="paragraph">
<p>In this chapter we are going to look more deeply into htmx.  We&#8217;ve accomplished quite a bit with what we&#8217;ve learned
so far, but, when you are developing Hypermedia Driven Applications, there are likely to be situations that arise
that require additional functionality to address cleanly.  We will go over some less commonly used attributes in htmx,
as well as expand on the details of some attributes we have already used.</p>
</div>
<div class="paragraph">
<p>Additionally, we will look at the functionality that htmx offers beyond simple HTML attributes:  how htmx extends
standard HTTP request and responses, how htmx works with (and produces) events, and how to approach situations where
there isn&#8217;t a simple, single target on the page to be updated.</p>
</div>
<div class="paragraph">
<p>Finally, we will take a look at practical considerations when doing htmx development: how to debug htmx-based applications
effectively, security considerations you will need to take into account when working with htmx, and how to configure
the behavior of htmx.</p>
</div>
</div>
<div class="sect2">
<h3 id="_htmx_attributes">11.1. htmx Attributes</h3>
<div class="paragraph">
<p>Thus far we have, we&#8217;ve used about fifteen different attributes from htmx in our application.  The most important ones have been:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-get</code>, <code>hx-post</code>, etc.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To specify the AJAX request an element should make</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-trigger</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To specify the event that triggers a request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-swap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To specify how to swap the returned HTML content into the DOM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hx-target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To specify where in the DOM to swap the returned HTML content</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s do a deep dive on two of these attributes, <code>hx-swap</code> and <code>hx-trigger</code>, because they support a large number of
options that might be useful when you are creating more advanced Hypermedia Driven Applications.</p>
</div>
<div class="sect3">
<h4 id="_hx_swap">11.1.1. <code>hx-swap</code></h4>
<div class="paragraph">
<p>The <code>hx-swap</code> attribute is often not included on elements that issue htmx-driven requests.  This is because, for many
cases, the default behavior, <code>innerHTML</code>, which swaps the inner HTML of the element, is fine.  Of course, we have seen
cases where we wanted to override this behavior and use <code>outerHTML</code>, for example.  And, in chapter 3, we discussed some
other swap options beyond these two, <code>beforebegin</code>, <code>afterend</code>, etc.</p>
</div>
<div class="paragraph">
<p>In chapter 5, we also looked at the <code>swap</code> delay modifier for <code>hx-swap</code>, which allowed us to fade some content out before
it was removed from the DOM.</p>
</div>
<div class="paragraph">
<p>In addition to these, <code>hx-swap</code> also supports the following modifiers:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>settle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Like <code>swap</code>, this allows you to apply a specific delay between when the content has been swapped into the DOM and
  when its attributes are "settled", that is, updated from their old values (if any) to their new values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>show</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to specify an element that should be shown (that is, scrolled into the viewport of the browser if necessary)
 when a request is completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scroll</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to specify a scrollable element (that is, an element with scrollbars), that should be scrolled to the top
  or bottom when a request is completed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>focus-scroll</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to specify that htmx should scroll to the focused element when a request completes.  (This defaults to
  false)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>So, for example, if we had a button that issued a <code>GET</code> request, and we wished to scroll to the top of the <code>body</code> element
when the request had completed, we would write the following HTML:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 115. Scrolling To The Top Of The Page</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts" hx-target="#content-div"
        hx-swap="innerHTML show:body:top"&gt; <b class="conum">(1)</b>
  Get Contacts
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This tells htmx to show the top of the body after the swap occurs</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>More details and examples can be found online at the documentation page for <code>hx-swap</code>: <a href="https://htmx.org/attributes/hx-swap/" class="bare">https://htmx.org/attributes/hx-swap/</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_hx_trigger">11.1.2. <code>hx-trigger</code></h4>
<div class="paragraph">
<p>Like <code>hx-swap</code>, <code>hx-trigger</code> can often be omitted when you are using htmx, because the default behavior is typically
what you want anyway.  Recall the default triggering events are determined by an element&#8217;s type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Requests on <code>input</code>, <code>textarea</code> &amp; <code>select</code> elements are triggered by the <code>change</code> event</p>
</li>
<li>
<p>Requests on <code>form</code> elements are triggered on the <code>submit</code> event</p>
</li>
<li>
<p>Requests on all other elements are triggered by the <code>click</code> event</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are times, however, when you want a more elaborate trigger specification.  A classic example was the active
search example we implemented in Contact.app:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 116. The Active Search Input</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">    &lt;input id="search" type="search" name="q" value="{{ request.args.get('q') or '' }}"
           hx-get="/contacts"
           hx-trigger="search, keyup delay:200ms changed"/&gt; <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>An elaborate trigger specification</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This example took advantage of two modifiers available for the <code>hx-trigger</code> attribute:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>delay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to specify a delay to wait before a request is issued.  If the event occurs again, the first event is
  discarded and the timer resets.  This allows you to "debounce" requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to specify that a request should only be issued when the <code>value</code> property of the given element has changed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>hx-trigger</code> has quite a few additional modifiers.  This makes sense, because events are fairly complex and we want to
be able to take advantage of all the power they offer.  (We will discuss events in more detail below.)</p>
</div>
<div class="paragraph">
<p>Here are the other modifiers available on <code>hx-trigger</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>once</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The given event will only trigger a request once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>throttle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to throttle events, only issuing them once every certain interval.  This is different than <code>delay</code> in that
  the first event will trigger immediately, but any following events will not trigger until the throttle time period
  has elapsed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>from</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A CSS selector that allows you to pick another element to listen for events on.  We will see an example of this used
  later in the chapter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A CSS selector that allows you to filter events to only those that occur directly on a given element.  In the DOM,
  events "bubble" to their parent elements, so a <code>click</code> event on a button will also trigger a <code>click</code> event on a parent
  <code>div</code>, all the way up to the <code>body</code> element.  Sometimes you want to specify an event directly on a given element, and
  this attribute allows you to do that.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consume</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If this option is set to <code>true</code>, the triggering event will be cancelled and not propagate to parent elements.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>queue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This option allows you to specify how events are queued in htmx.  By default, when htmx receives a triggering event,
  it will issue a request and start an event queue.  If the request is still in flight when another event is received,
  it will queue the event and, when the request finishes, trigger a new request.  By default, it only keeps the last
  event it receives, but you can modify that behavior using this option: for example, you can set it to <code>none</code> and ignore
  all triggering events that occur during a request.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_filters">Filters</h5>
<div class="paragraph">
<p>The <code>hx-trigger</code> attribute allows you to specify a <em>filter</em> to events by using square brackets enclosing a JavaScript
expression after the event name.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you have a complex situation where contacts should only be retrievable in certain situations, and you have
a JavaScript function, <code>contactRetrievalEnabled()</code> that returns a boolean, <code>true</code> if contacts can be retrieved and
<code>false</code> otherwise.  You want to gate a button that issues a request to <code>/contacts</code> on this function.  To do this using
an event filter in htmx, you would write the following HTML:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 117. The Active Search Input</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;script&gt;
  function contactRetrievalEnabled() {
      ...
  }
&lt;/script&gt;
&lt;button hx-get="/contacts" hx-trigger="click[contactRetrievalEnabled()]"&gt; <b class="conum">(1)</b>
  Get Contacts
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>the event filter, calling <code>contactRetrievalEnabled()</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The button will not issue a request if <code>contactRetrievalEnabled()</code> returns false, allowing you to dynamically control
when the request will be made.  Common situations that call for an event trigger are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only issue a request when a certain element has focus</p>
</li>
<li>
<p>Only issue a request when a given form is valid</p>
</li>
<li>
<p>Only issue a request when a set of inputs have specific values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using event filters, you can use whatever logic you&#8217;d like to filter requests by htmx.</p>
</div>
</div>
<div class="sect4">
<h5 id="_synthetic_events">Synthetic Events</h5>
<div class="paragraph">
<p>In addition to these modifiers, <code>hx-trigger</code> offers a few "synthetic" events, that is events that are not part of the
regular DOM API.  We have already seen <code>load</code> and <code>revealed</code> in our lazy loading and infinite scroll examples, but
htmx also gives you an <code>intersect</code> event that triggers when an element intersects its parent element.</p>
</div>
<div class="paragraph">
<p>This synthetic event uses the modern Intersection Observer API, which you can read more about
here: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" class="bare">https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API</a></p>
</div>
<div class="paragraph">
<p>Intersection gives you much finer grained control over exactly when a request should be triggered.  For example, you can
specify a threshold and specify that the request should only be issued when an element is 50% visible.</p>
</div>
<div class="paragraph">
<p>The <code>hx-trigger</code> attribute certainly is the most complex on in htmx, and more details and examples can be found online its
documentation page: <a href="https://htmx.org/attributes/hx-trigger/" class="bare">https://htmx.org/attributes/hx-trigger/</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_attributes">11.1.3. Other Attributes</h4>
<div class="paragraph">
<p>htmx offers many other less commonly used attributes for fine-tuning the behavior of your Hypermedia Driven Application.
Here are some of the most useful ones:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hx-push-url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Pushes" the request URL (or some other value) into the navigation bar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hx-preserve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preserves a bit of the DOM between requests (the original content will be kept, regardless of what is returned)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hx-sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronized requests between two or more elements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hx-disable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disables htmx behavior on this element and any children.  We will discuss this more below in the security section.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s take a look at <code>hx-sync</code>, which allows us to synchronize AJAX requests between two or more elements.  Consider
a simple case where we have two buttons that both target the same element on the screen:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 118. Two Competing Buttons</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button hx-get="/contacts" hx-target="body"&gt; <b class="conum">(1)</b>
  Get Contacts
&lt;/button&gt;
&lt;button hx-get="/settings" hx-target="body"&gt; <b class="conum">(1)</b>
  Get Settings
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is fine and will work, but what if a user clicks the "Get Contacts" button and then the request takes a while to
respond?  And, in the meantime the user clicks the "Get Settings" button?  In this case we would have two requests in
flight at the same time.</p>
</div>
<div class="paragraph">
<p>If the <code>/settings</code> request finished first and displayed the user&#8217;s setting information, they might be very surprised
if they began making changes and then, suddenly, the <code>/contacts</code> request finished and replaced the entire body with
the contacts instead!</p>
</div>
<div class="paragraph">
<p>To deal with this situation, we might consider using an <code>hx-indicator</code> to alert the user that something is going on, making
it less likely that they click the second button.  But if we really want to guarantee that there is only one request
at a time issued between these two buttons, the right thing to do is to use the <code>hx-sync</code> attribute.  Let&#8217;s enclose
both buttons in a <code>div</code> and eliminate the redundant <code>hx-target</code> specification by hoisting the attribute up to that
<code>div</code>.  We can then use <code>hx-sync</code> on that div to coordinate requests between the two buttons.</p>
</div>
<div class="paragraph">
<p>Here is our updated code:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 119. Syncing Two Buttons</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div hx-target="body"  <b class="conum">(1)</b>
     hx-sync="this"&gt;  <b class="conum">(2)</b>
    &lt;button hx-get="/contacts"&gt; <b class="conum">(1)</b>
      Get Contacts
    &lt;/button&gt;
    &lt;button hx-get="/settings"&gt; <b class="conum">(1)</b>
      Get Settings
    &lt;/button&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Hoist the duplicate <code>hx-target</code> attributes to the parent <code>div</code></p>
</li>
<li>
<p>Synchronize on the parent <code>div</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By placing the <code>hx-sync</code> attribute on the <code>div</code> with the value <code>this</code>, we are saying "Synchronize all htmx requests that
occur within this <code>div</code> element with one another."  This means that if one button already has a request in flight, other
buttons within the <code>div</code> will not issue requests until that has finished.</p>
</div>
<div class="paragraph">
<p>The <code>hx-sync</code> attribute supports a few different strategies that allow you to, for example, replace an existing request
in flight, or queue requests with a particular queuing strategy.  You can find complete documentation, as well as
examples, at the documentation page for <code>hx-sync</code>: <a href="https://htmx.org/attributes/hx-sync/" class="bare">https://htmx.org/attributes/hx-sync/</a></p>
</div>
<div class="paragraph">
<p>As you can see, htmx offers a lot of attribute-driven functionality for more advanced Hypermedia Driven Applications.
A complete reference for all htmx attributes can be found at <a href="https://htmx.org/reference/#attributes" class="bare">https://htmx.org/reference/#attributes</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_events">11.2. Events</h3>
<div class="paragraph">
<p>We have been working with events in htmx primary via the <code>hx-trigger</code> attribute.  This has proven to be a powerful
mechanism for driving our application using declarative, HTML-friendly syntax.  However, there is more to events
and htmx than just <code>hx-trigger</code>.</p>
</div>
<div class="sect3">
<h4 id="_htmx_generated_events">11.2.1. htmx-generated Events</h4>
<div class="paragraph">
<p>It turns out that, in addition to making it easy to <em>respond</em> to events, htmx also <em>emits</em> many useful events.  You
can use these events to add more functionality to your application, either via htmx itself, or by way of scripting.</p>
</div>
<div class="paragraph">
<p>Here are some of the most commonly used events in htmx:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>htmx:load</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggered when new content is loaded into the DOM by htmx</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>htmx:configRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggered before a request is issued, allowing you to programmatically configure the request (or cancel it entirely)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>htmx:afterRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Triggered after a request has responded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>htmx:abort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom event that can be sent to an htmx-powered element to abort an open request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We have already seen how to use the <code>htmx:load</code> event, using the <code>htmx.onLoad()</code> API in the sortable.js example, which
is probably one of the most common uses of events.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_htmxconfigrequest_event">11.2.2. Using The <code>htmx:configRequest</code> Event</h4>
<div class="paragraph">
<p>Let&#8217;s take a look at how you might use the <code>htmx:configRequest</code> event to configure an HTTP request.  Consider the following
scenario: our server-side team has decided that they want you to include a token for extra validation on every request.
The token is going to be stored in <code>localStorage</code> in the browser, in the slot <code>special-token</code>.  The server-side team
wants you to include this special token on every request made by htmx, as the <code>X-SPECIAL-TOKEN</code> header.</p>
</div>
<div class="paragraph">
<p>How could you achieve this?  One way would be to catch the <code>htmx:configRequest</code> event and update the <code>detail.headers</code>
object with this token from <code>localStorage</code>.</p>
</div>
<div class="paragraph">
<p>In VanillaJS, it would look something like this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 120. Adding the <code>X-SPECIAL-TOKEN</code> Header</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">document.body.addEventListener("htmx:configRequest", function(configEvent){
    configEvent.detail.headers['X-SPECIAL-TOKEN'] = localStorage['special-token']; <b class="conum">(1)</b>
})</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>retrieve the value from local storage and set it into a header</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As you can see, we add a new value to the <code>headers</code> property of the event&#8217;s detail.  After the event handler executes,
the <code>headers</code> property is read by htmx and used to construct the headers for an AJAX request.  So, with this bit of
JavaScript code, we have added a new custom header to every AJAX request that htmx makes.  Slick!</p>
</div>
<div class="paragraph">
<p>You can also update the <code>parameters</code> property to change the parameters submitted by the request, change the target
of the request, and so on.  Full documentation for the <code>htmx:configRequest</code> event can be found here: <a href="https://htmx.org/events/#htmx:configRequest" class="bare">https://htmx.org/events/#htmx:configRequest</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_canceling_a_request_using_htmxabort">11.2.3. Canceling a Request using <code>htmx:abort</code></h4>
<div class="paragraph">
<p>So we can listen for many useful events from htmx, and we can respond to events using <code>hx-trigger</code>.  What else can
we do with events?  It turns out that htmx itself listens for one special event, <code>htmx:abort</code>.  When htmx receives this
event on an element that has a request in flight, it will abort the request.</p>
</div>
<div class="paragraph">
<p>Consider a situation where we have a potentially long-running request to <code>/contacts</code>, and we want to offer a way for
the users to cancel the request.  What we want is a button that issues the request, driven by htmx, of course, and then
another button that will send an <code>htmx:abort</code> event to the first one.</p>
</div>
<div class="paragraph">
<p>Here is what the code might look like:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 121. A Button With An Abort</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button id="contacts-btn" hx-get="/contacts" hx-target="body"&gt; <b class="conum">(1)</b>
  Get Contacts
&lt;/button&gt;
&lt;button onclick="document.getElementById('contacts-btn').dispatchEvent(new Event('htmx:abort'))"&gt; <b class="conum">(2)</b>
  Cancel
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A normal htmx-driven <code>GET</code> request to <code>/contacts</code></p>
</li>
<li>
<p>JavaScript to look up the button and send it an <code>htxm:abort</code> event</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So now, if a user clicks on the "Get Contacts" button and the request takes a while, they can click on the "Cancel"
button and end the request.  Of course, in a more sophisticated user interface, you may want to disable the "Cancel"
button unless an HTTP request is in flight, but that would be a pain to implement in pure JavaScript.  Thankfully
it isn&#8217;t too bad to implement in hyperscript, so let&#8217;s take a look at what that would look like:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 122. A hyperscript-Powered Button With An Abort</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;button id="contacts-btn" hx-get="/contacts" hx-target="body"&gt;
  Get Contacts
&lt;/button&gt;
&lt;button _="on click send htmx:abort to #contacts-btn
           on htmx:beforeRequest from #contacts-btn remove @disabled from me
           on htmx:afterRequest from #contacts-btn add @disabled to me"&gt;
  Cancel
&lt;/button&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have a "Cancel" button that is disabled only when a request from the <code>contacts-btn</code> button is in flight.  And
we are taking advantage of htmx-generated and handled events, as well as the event-friendly syntax of hyperscript, to
make it happen.  Not bad!</p>
</div>
</div>
<div class="sect3">
<h4 id="_server_generated_events">11.2.4. Server Generated Events</h4>
<div class="paragraph">
<p>We are going to talk more about the various ways that htmx enhances regular HTTP requests and responses in the next section,
but, since it involves events, we are going to discuss one HTTP Response header that htmx supports: <code>HX-Trigger</code>.  We
have discussed before how HTTP requests and responses support <em>headers</em>, name-value pairs that contain metadata about
a given request or response.  We took advantage of the <code>HX-Trigger</code> request header, which includes the id of the element
that triggered a given request.</p>
</div>
<div class="paragraph">
<p>It turns out that there is a <em>response</em> header, also named <code>HX-Trigger</code> in that htmx supports.  This response header
allows you to trigger an event on the element that submitted an AJAX request.  This turns out to be a powerful way
to coordinate elements in the DOM in a decoupled manner.</p>
</div>
<div class="paragraph">
<p>To see how this might work, lets consider the following situation: we have a button that grabs new contacts from some
remote system on the server.  We will ignore the details of the server side implementation, but we know that if we issue
a <code>POST</code> to the <code>/integrations/1</code> path, it will trigger a synchronization with the system.</p>
</div>
<div class="paragraph">
<p>Now, this synchronization may or may not result in new contacts being created.  In the case where new contacts <em>are</em>
created, we want to refresh our contacts table.  In the case where no contacts are created, we don&#8217;t want to refresh
the table.</p>
</div>
<div class="paragraph">
<p>How could we implement this using the <code>HX-Trigger</code> response header?  Well, we could conditionally add an <code>HX-Trigger</code>
response header with the value <code>contacts-updated</code>, which would trigger the <code>contacts-updated</code> event on the button that
made the AJAX request to <code>/integrations/1</code>.  And we can then take advantage of the <code>from:</code> modifier of the <code>hx-trigger</code>
attribute to listen for that event!  Now we can effectively trigger htmx request from the server side!</p>
</div>
<div class="paragraph">
<p>Here is what the client-side code might look like:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 123. The Contacts Table</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">   &lt;button hx-post="/integrations/1"&gt; <b class="conum">(1)</b>
     Pull Contacts From Integration
   &lt;/button&gt;

      ...

    &lt;table hx-get="/contacts/table" hx-trigger="contacts-updated from:body"&gt; <b class="conum">(2)</b>
      ...
    &lt;/table&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The response to this request may conditionally trigger the <code>contacts-updated</code> event</p>
</li>
<li>
<p>This table listens for the event and refreshes when it occurs</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The table listens for the <code>contacts-updated</code> event, and it does so on the <code>body</code> element.  It listens on the <code>body</code>
element since the event will bubble up from the button, and this allows us to not couple the button and table together:
we can move the button and table around as we like and, via events, the behavior we want will continue to work fine.
Additionally, we may want <em>other</em> elements or requests to trigger the <code>contacts-updated</code> event, so this provides a
general mechanism for refreshing the contacts table in our application.  Very nice!</p>
</div>
<div class="paragraph">
<p>Now, we are omitting the server side implementation of this feature in the interest of simplicity, but this gives you
and idea of how the <code>HX-Trigger</code> response header can be used to coordinate sophisticated interactions in the DOM.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_requests_responses">11.3. HTTP Requests &amp; Responses</h3>
<div class="paragraph">
<p>We have just seen an advanced feature of HTTP responses supported by htmx, the <code>HX-Trigger</code> response header,
but htmx supports quite a few more headers for both requests and responses.  In chapter 5 we discussed the
headers present in HTTP Requests.  Here some of the more important headers you can use to change htmx behavior with
HTTP responses:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response Header</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HX-Location</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Causes a client-side redirection to a new location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HX-Push-Url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pushes a new URL into the location bar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HX-Refresh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refreshes the current page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HX-Retarget</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows you to specify a new target to swap the response content into on the client side</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can find a reference for all requests and response headers here: <a href="https://htmx.org/reference/#headers" class="bare">https://htmx.org/reference/#headers</a></p>
</div>
<div class="sect3">
<h4 id="_http_response_codes_2">11.3.1. HTTP Response Codes</h4>
<div class="paragraph">
<p>Even more important than response headers, in terms of information conveyed to the client, is the <em>HTTP Response Code</em>.
We discussed HTTP Response Codes in Chapter 4.  By and large htmx handles various response codes in the manner that
you would expect: it swaps content for all 200-level response codes and does nothing for others.  There are, however,
two "special" 200-level response codes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>204 No Content</code> - When htmx receives this response code, it will <em>not</em> swap any content into the DOM (even if the response
has a body)</p>
</li>
<li>
<p><code>286</code> - When htmx receives this response code to a request that is polling, it will stop the polling</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can override the behavior of htmx with respect to response codes by, you guessed it, responding to an event!  The
<code>htmx:beforeSwap</code> event allows you to change the behavior of htmx with respect to various status codes.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say that, rather than doing nothing when a <code>404</code> occurred, you wanted to alert the user that an error had occurred.
To do so, you want to invoke a JavaScript method, <code>showNotFoundError()</code>.  Let&#8217;s add some code to use the <code>htmx:beforeSwap</code>
event to make this happen:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 124. Showing a 404 Dialog</div>
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">document.body.addEventListener('htmx:beforeSwap', function(evt) { <b class="conum">(1)</b>
    if(evt.detail.xhr.status === 404){ <b class="conum">(2)</b>
        showNotFoundError();
    }
});</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>hook into the <code>htmx:beforeSwap</code> event</p>
</li>
<li>
<p>if the response code is a <code>404</code>, show the user a dialog</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the <code>htmx:beforeSwap</code> event to configure if the response should be swapped into the DOM and what element
the response should target.  This gives you quite a bit of flexibility in choosing how you want to use HTTP Response
codes in your application.  Full documentation on the <code>htmx:beforeSwap</code> event can be found here: <a href="https://htmx.org/events/#htmx:beforeSwap" class="bare">https://htmx.org/events/#htmx:beforeSwap</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updating_other_content">11.4. Updating Other Content</h3>
<div class="paragraph">
<p>Above we saw how to use a server-triggered event, via the <code>HX-Trigger</code> HTTP response header, to update a piece of the
DOM based on the response to another part of the DOM.  This technique addresses the general problem that comes up
in Hypermedia Driven Applications: "How do I update other content?"  After all, in normal HTTP requests, there is only
one "target", the entire screen, and, similarly, in htmx-based requests, there is only one target: either the explicit
or implicit target of the element.</p>
</div>
<div class="paragraph">
<p>If you want to update other content in htmx, you have a few options:</p>
</div>
<div class="sect3">
<h4 id="_expanding_your_selection">11.4.1. Expanding Your Selection</h4>
<div class="paragraph">
<p>The first option, and the simplest, is to "expand the target".  That is, rather than simply replacing a small part
of the screen, expand the target of your htmx-driven request until it is large enough to enclose all the elements that
need to updated on a screen.  This has the tremendous advantage of being simple and reliable.  The downside is that
it may not provide the user experience that you want, and it may not play well with a particular server-side template
layout.  Regardless, I always recommend at least thinking about this approach first.</p>
</div>
</div>
<div class="sect3">
<h4 id="_out_of_band_swaps">11.4.2. Out of Band Swaps</h4>
<div class="paragraph">
<p>A second option, which is a bit more complex, is to take advantage of "Out Of Band" content support in htmx.  When
htmx receives a response, it will look for top-level content in that response that includes the <code>hx-swap-oob</code> attribute
on it.  That content will be removed from the response, so it will not be swapped into the DOM in the normal manner.  Instead,
it will be swapped in for the content that it matches, by its id.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at an example of this approach.  Let&#8217;s consider the situation we had above, where a contacts table needs to be updated
conditionally, based on if an integration pulls down any new contacts.  Previously we solved this by using events and
a server-triggered event via the <code>HX-Trigger</code> response header.</p>
</div>
<div class="paragraph">
<p>In this case, instead of using an event, let&#8217;s take advantage of the <code>hx-swap-oob</code> attribute in the response to the
<code>POST</code> to <code>/integrations/1</code> to "piggy back" the new contacts table content on the response.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 125. The Updated Contacts Table</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">   &lt;button hx-post="/integrations/1"&gt; <b class="conum">(1)</b>
     Pull Contacts From Integration
   &lt;/button&gt;

      ...

    &lt;table id="contacts-table"&gt; <b class="conum">(2)</b>
      ...
    &lt;/table&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>the button still issues a <code>POST</code> to <code>/integrations/1</code></p>
</li>
<li>
<p>the table no longer listens for an event, but it now has an id</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now let&#8217;s look at a potential response to the <code>POST</code> to <code>/integrations/1</code>. This response will include the "regular"
content that needs to be swapped into the button, per the usual htmx mechanism.  But it will also include a new version,
updated version of the contacts table, which will be marked as <code>hx-swap-oob="true"</code>.  This content will be removed from
the response so it is not inserted into the button, but will be instead swapped into the DOM in place of the existing
table since it has the same id value.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 126. A Response With Out of Band Content</div>
<div class="content">
<pre class="highlight"><code class="language-" data-lang="">HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
...

Pull Contacts From Integration <b class="conum">(1)</b>

&lt;table id="contacts-table" hx-swap-oob="true"&gt; <b class="conum">(2)</b>
  ...
&lt;/table&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>this content will be placed in the button</p>
</li>
<li>
<p>this content will be removed from the response and swapped by id</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Using this technique, you are able to piggyback content updates of other elements on top of requests by other elements.
The <code>hx-swap-oob</code> attribute supports other additional features, all of which are documented here: <a href="https://htmx.org/attributes/hx-swap-oob/" class="bare">https://htmx.org/attributes/hx-swap-oob/</a></p>
</div>
<div class="paragraph">
<p>Depending on how exactly your server side templating technology works, and what level of interactivity your application
requires, out of band swapping can be a powerful mechanism for more flexible content updates.</p>
</div>
</div>
<div class="sect3">
<h4 id="_events_2">11.4.3. Events</h4>
<div class="paragraph">
<p>Finally, the most complex mechanism for updating content is the one we saw back in the events section: using server-triggered
events to update elements.  This approach can be very clean, but also requires a lot deeper conceptual knowledge of HTML
and events, and a commitment to the event-driven approach.  While we like this style of development, it isn&#8217;t for everyone
and we typically recommend this only if the htmx philosophy of event-driven hypermedia really speaks to you.</p>
</div>
<div class="paragraph">
<p>If it <em>does</em> speak to you, however, we say: go for it!  We&#8217;ve created some very complex and flexible user interfaces using
this approach, and we are quite fond of it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_being_pragmatic">11.4.4. Being Pragmatic</h4>
<div class="paragraph">
<p>All of these approaches to the "Updating Other Content" problem will work, and will often work well.  However, there may
come a point where it would just be simpler to use a different approach, like the reactive one.  As much as we like
the hypermedia approach, the reality is that there are some UX patterns that simply cannot be implemented
easily using it.  The canonical example of this sort of pattern, which we have mentioned before, is something like a live
online spreadsheet: it is simply to complex a user interface, with too many inter-dependencies, to be done well via
exchanges of hypermedia with a server.</p>
</div>
<div class="paragraph">
<p>In cases like this, and any time you feel like an htmx-based solution is proving to be more complex than another approach
might be, we can gladly recommend that you consider a different technology: use the right tool for the job!  You can always
use htmx for the parts of your application that aren&#8217;t as complex and don&#8217;t need the full complexity of a reactive framework,
and save that complexity budget for the parts that do.</p>
</div>
<div class="paragraph">
<p>We are not hypermedia puritans and encourage you to learn many different web technologies, with an eye to the strengths
and weaknesses of each one.  This will give you a deep tool chest to reach into when problems present themselves. Our
hope is that, with htmx, hypermedia might be a tool you reach for more frequently!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_debugging">11.5. Debugging</h3>
<div class="paragraph">
<p>We have been talking a lot about events in this chapter and we are not ashamed to admit: we are big fans of events.  They
are the underlying technology of almost any interesting user interface, and are particularly useful in the DOM once they
have been unlocked for general using in HTML.  They let you build nicely decoupled software while often preserving
the locality of behavior we like so much.</p>
</div>
<div class="paragraph">
<p>However, events are not perfect.  One area where events can be particularly tricky to deal with is <em>debugging</em>: you
often want to know why an event <em>isn&#8217;t</em> happening.  But where can you set a break point for something that <em>isn&#8217;t</em> happening?
The answer, as of right now, is: you can&#8217;t.</p>
</div>
<div class="paragraph">
<p>There are two techniques that can help in this regard, one provided by htmx, the other provided by Chrome, the browser
by google.</p>
</div>
<div class="sect3">
<h4 id="_logging_htmx_events">11.5.1. Logging htmx Events</h4>
<div class="paragraph">
<p>The first technique, provided by htmx itself, is to call the <code>htmx.logAll()</code> method.  When you do this, htmx will log
all the internal events that occur as it goes about its business, loading up content, responding to events and so forth.</p>
</div>
<div class="paragraph">
<p>This can be overwhelming, but with judicious filtering can help you zero in on a problem.  Here are what (a bit of) the logs
look like when clicking on the "docs" link on <a href="https://htmx.org" class="bare">https://htmx.org</a>, with <code>logAll()</code> enabled:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 127. htmx Logs</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">htmx:configRequest
&lt;a href="/docs/"&gt;
Object { parameters: {}, unfilteredParameters: {}, headers: {…}, target: body, verb: "get", errors: [], withCredentials: false, timeout: 0, path: "/docs/", triggeringEvent: a
, … }
htmx.js:439:29
htmx:beforeRequest
&lt;a href="/docs/"&gt;
Object { xhr: XMLHttpRequest, target: body, requestConfig: {…}, etc: {}, pathInfo: {…}, elt: a
 }
htmx.js:439:29
htmx:beforeSend
&lt;a class="htmx-request" href="/docs/"&gt;
Object { xhr: XMLHttpRequest, target: body, requestConfig: {…}, etc: {}, pathInfo: {…}, elt: a.htmx-request
 }
htmx.js:439:29
htmx:xhr:loadstart
&lt;a class="htmx-request" href="/docs/"&gt;
Object { lengthComputable: false, loaded: 0, total: 0, elt: a.htmx-request
 }
htmx.js:439:29
htmx:xhr:progress
&lt;a class="htmx-request" href="/docs/"&gt;
Object { lengthComputable: true, loaded: 4096, total: 19915, elt: a.htmx-request
 }
htmx.js:439:29
htmx:xhr:progress
&lt;a class="htmx-request" href="/docs/"&gt;
Object { lengthComputable: true, loaded: 19915, total: 19915, elt: a.htmx-request
 }
htmx.js:439:29
htmx:beforeOnLoad
&lt;a class="htmx-request" href="/docs/"&gt;
Object { xhr: XMLHttpRequest, target: body, requestConfig: {…}, etc: {}, pathInfo: {…}, elt: a.htmx-request
 }
htmx.js:439:29
htmx:beforeSwap
&lt;body hx-ext="class-tools, preload"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yikes!  Not exactly easy on the eyes, is it?  But, if you take a deep breath and squint, you can see that it isn&#8217;t
<em>that</em> bad: a series of htmx events, some of which we have seen before (there&#8217;s <code>htmx:configRequest</code>!), get logged
to the console, along with the element they are triggered on.  After a bit of reading and filtering, you will be
able to make sense of the event stream, and it can help you debug htmx-related issues.</p>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring_events_in_chrome">11.5.2. Monitoring Events in Chrome</h4>
<div class="paragraph">
<p>The preceding technique is useful if the problem is occuring somewhere <em>within</em> htmx, but what if htmx is never getting
triggered at all?  This comes up some times, like when, for example, you have accidentally typed an event name incorrectly
somewhere.</p>
</div>
<div class="paragraph">
<p>In cases like this you will need recourse to a tool available in the browser itself.  Fortunately, the Chrome browser
by Google provides a very useful function, <code>monitorEvents()</code>, that allows you to monitor <em>all</em> events that are triggered
on an element.  This feature is available <em>only</em> in the console, so you can&#8217;t use it in code on your page.  But, if
you are working with htmx in Chrome, and are curious why an event isn&#8217;t triggering on an element, you can open the
developers console and type the following:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 128. htmx Logs</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">monitorEvents(document.getElementById("some-element"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will then print <em>all</em> the events that are triggered on the element with the id <code>some-element</code> to the console.  This
can be very useful for understanding exactly which events you want to respond to with htmx, or troubleshooting why an
expected event isn&#8217;t occurring.</p>
</div>
<div class="paragraph">
<p>Using these two techniques will help you as you (infrequently, we hope!) troubleshoot event-related issues when developing
with htmx.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_security_considerations">11.6. Security Considerations</h3>
<div class="paragraph">
<p>In general, htmx and hypermedia tends to be more secure than JavaScript heavy approaches to building web applications. This
is because, by moving much of the processing to the back end, the hypermedia approach tends not to expose as much surface
area of your system to end users for manipulation and shenanigans.</p>
</div>
<div class="paragraph">
<p>However, even with hypermedia, there are still situations that require care when doing development.  Of particular
concern are situations where user-generated content is shown to other users: a clever user might try to insert
htmx code that tricks the other users into clicking on content that triggers actions they don&#8217;t want to take.</p>
</div>
<div class="paragraph">
<p>In general, all user-generated content should be escaped on the server side, and most server side rendering frameworks
provide functionality for handling this situation.  But there is always a risk that something slips through the cracks.</p>
</div>
<div class="paragraph">
<p>In order to help you sleep better at night, htmx provides the <code>hx-disable</code> attribute.  When this attribute is placed
on an element, all htmx attributes within that element will be ignored.</p>
</div>
<div class="sect3">
<h4 id="_content_security_policies_htmx">11.6.1. Content Security Policies &amp; htmx</h4>
<div class="paragraph">
<p>A Content Security Policy (CSP) is a browser technology that allows you to detect and prevent certain types of
content injection-based attacks.  A full discussion of CSPs is beyond the scope of this book, but we refer you to
the Mozilla Developer Network article on them for more information: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" class="bare">https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</a></p>
</div>
<div class="paragraph">
<p>A common feature to disable using a CSP is the <code>eval()</code> feature of JavaScript, which allows you to evaluate arbitrary
javascript code from a string.  This has proven to be a security issue and many teams have decided that it is not worth
the risk to keep it enabled in their web applications.</p>
</div>
<div class="paragraph">
<p>htmx does not make heavy use of <code>eval()</code> and, thus, a CSP with this restriction in place will be fine.  The one
feature that does rely on <code>eval()</code> is event filters, discussed above.  If you decide to disable <code>eval()</code> for your
web application, you will not be able to use the event filtering syntax.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring">11.7. Configuring</h3>
<div class="paragraph">
<p>There are a large number of configuration options available for htmx.  Some examples of things you can configure are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The default swap style</p>
</li>
<li>
<p>The default swap delay</p>
</li>
<li>
<p>The default timeout of AJAX requests</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A full list of configuration options can be found in the config section of the main htmx documentation: <a href="https://htmx.org/docs/#config" class="bare">https://htmx.org/docs/#config</a></p>
</div>
<div class="paragraph">
<p>htmx is typically configured via a <code>meta</code> tag, found in the header of a page.  The name of the meta tag should be
<code>htmx-config</code>, and the content attribute should contain the configuration overrides, formatted as JSON.  Here is
an example:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. 129. An htmx configuration via a <code>meta</code> tag</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">&lt;meta name="htmx-config" content='{"defaultSwapStyle":"outerHTML"}'&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, we are overriding the default swap style from the usual <code>innerHTML</code> to <code>outerHTML</code>.  This might be useful
if you find yourself using <code>outerHTML</code> more frequently than <code>innerHTML</code> and want to avoid having to explicitly set that
swap value throughout your application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_7">11.8. Summary</h3>
<div class="ulist">
<ul>
<li>
<p>In this chapter we looked at some details and tricks of htmx development</p>
</li>
<li>
<p>We looked in detail at the options available for <code>hx-swap</code> and <code>hx-trigger</code>, including filters and scrolling</p>
</li>
<li>
<p>We took a look at the events that htmx triggers and responds to</p>
</li>
<li>
<p>We explored HTTP response headers and HTTP response codes in htmx, and how to modify how htmx handles them</p>
</li>
<li>
<p>We looked at various techniques for updating content beyond the target of a request, including out of band swaps</p>
</li>
<li>
<p>We saw how htmx applications can be debugged, secured and configured
= Building Hypermedia Systems
:chapter: 6
:sectnums:
:figure-caption: Figure 12.
:listing-caption: Listing 12.
:table-caption: Table 12.
:sectnumoffset: 5
:leveloffset: 1
:sourcedir: ../code/src
:source-language:</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_building_hypermedia_systems_4.html">Building Hypermedia Systems</a> | ↑ Up: <a href="_building_hypermedia_systems.html">Building Hypermedia Systems</a> | ⌂ Home: <a href="BuildingHypermediaSystems.html">Building Hypermedia Systems</a> | Next: <a href="_hyperview_a_mobile_hypermedia.html">Hyperview: A Mobile Hypermedia</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-20 12:44:43 -0600
</div>
</div>
</body>
</html>